<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Q-Learning Grid | Reinforcement Learning</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&family=Inter:wght@400;600&display=swap" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <div class="viz-area">
            <canvas id="grid-canvas"></canvas>
            <div class="legend">
                <div class="item"><span class="box start"></span> Start</div>
                <div class="item"><span class="box goal"></span> Goal (+100)</div>
                <div class="item"><span class="box fire"></span> Fire (-100)</div>
                <div class="item"><span class="box agent"></span> Agent</div>
            </div>
        </div>

        <aside class="sidebar">
            <div class="header">
                <h1>Q-Learning<span class="highlight">Grid</span></h1>
                <p>Reinforcement Learning Sim</p>
            </div>

            <div class="stats-panel">
                <div class="stat-row">
                    <span>Episode:</span>
                    <span id="ep-count" class="val">0</span>
                </div>
                <div class="stat-row">
                    <span>Epsilon (Exploration):</span>
                    <span id="epsilon-val" class="val">1.00</span>
                </div>
                <div class="stat-row">
                    <span>Last Reward:</span>
                    <span id="reward-val" class="val">0</span>
                </div>
            </div>

            <div class="controls">
                <div class="control-group">
                    <label>Simulation Speed</label>
                    <input type="range" id="speed-slider" min="1" max="50" value="5">
                </div>

                <div class="control-group">
                    <label>Map Difficulty</label>
                    <select id="map-select">
                        <option value="easy">Easy</option>
                        <option value="medium" selected>Medium</option>
                        <option value="hard">Hard</option>
                    </select>
                </div>

                <div class="toggle-group">
                    <label>
                        <input type="checkbox" id="toggle-heatmap"> Show Q-Values (Heatmap)
                    </label>
                </div>

                <div class="btn-group">
                    <button class="btn primary" id="btn-train">Train (Fast)</button>
                    <button class="btn warning" id="btn-reset">Reset Matrix</button>
                </div>
            </div>

            <div class="info-box">
                <p><strong>Logic:</strong> The agent gets +100 for the goal, -100 for fire, and -1 per step to encourage efficiency.</p>
                <div class="equation">
                    Q(s,a) ← Q(s,a) + α[R + γ·maxQ(s',a') - Q(s,a)]
                </div>
            </div>
        </aside>
    </div>

    <script src="script.js"></script>
</body>
</html>