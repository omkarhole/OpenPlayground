const Config = {
	PALETTES: {
		Acorn: {
			"BBC Micro": [
				"#000000",
				"#FF0000",
				"#00FF00",
				"#FFFF00",
				"#0000FF",
				"#FF00FF",
				"#00FFFF",
				"#FFFFFF",
				"#800000",
				"#008000",
				"#808000",
				"#000080",
				"#800080",
				"#008080",
				"#808080",
				"#C0C0C0"
			],
			Archimedes: [
				"#000000",
				"#0000FF",
				"#00FF00",
				"#00FFFF",
				"#FF0000",
				"#FF00FF",
				"#FFFF00",
				"#FFFFFF",
				"#808080",
				"#000080",
				"#008000",
				"#008080",
				"#800000",
				"#800080",
				"#808000",
				"#C0C0C0"
			]
		},
		Amstrad: {
			"CPC 464": [
				"#000000",
				"#000080",
				"#0000FF",
				"#800000",
				"#800080",
				"#808000",
				"#808080",
				"#C0C0C0",
				"#FF0000",
				"#FF00FF",
				"#FFFF00",
				"#FFFFFF",
				"#008000",
				"#008080",
				"#00FF00",
				"#00FFFF",
				"#808040",
				"#804000",
				"#FF8040",
				"#004000",
				"#404000",
				"#804040",
				"#404080",
				"#408080",
				"#408040",
				"#804080",
				"#FF8080",
				"#80FF80",
				"#FFFF80",
				"#80FFFF",
				"#FF80FF",
				"#8080FF"
			]
		},
		Apple: {
			"Apple II": [
				"#000000",
				"#901740",
				"#4074A9",
				"#D0D0D0",
				"#1A1C1A",
				"#4B4B4B",
				"#FFFFFF",
				"#FF4A4A",
				"#8DFF4A",
				"#4A4AFF",
				"#FF4AFF",
				"#4AFFFF",
				"#FFFF4A",
				"#FF8D4A",
				"#8D8DFF",
				"#FF8D8A"
			],
			"Apple IIGS": [
				"#000000",
				"#DD0033",
				"#880000",
				"#FF6666",
				"#007700",
				"#00DD00",
				"#008800",
				"#55FF55",
				"#0000DD",
				"#000077",
				"#6666FF",
				"#5555FF",
				"#DDDD00",
				"#FFDD00",
				"#DD8800",
				"#FFFF55",
				"#880088",
				"#DD00DD",
				"#FF55FF",
				"#005588",
				"#0088DD",
				"#55FFFF",
				"#00DDDD",
				"#AAAAAA",
				"#DDDDDD",
				"#FFFFFF"
			]
		},
		Atari: {
			"2600 NTSC": [
				"#000000",
				"#404040",
				"#6C6C6C",
				"#909090",
				"#B0B0B0",
				"#C8C8C8",
				"#DCDCDC",
				"#ECECEC",
				"#444400",
				"#646410",
				"#848424",
				"#A0A034",
				"#B8B840",
				"#D0D050",
				"#E8E85C",
				"#FCFC68",
				"#702800",
				"#844414",
				"#985C28",
				"#AC783C",
				"#BC8C4C",
				"#CCA05C",
				"#DCB468",
				"#E8CC7C",
				"#841800",
				"#983418",
				"#AC5030",
				"#C06848",
				"#D0805C",
				"#E09470",
				"#ECA880",
				"#FCBC94",
				"#880000",
				"#9C2020",
				"#B03C3C",
				"#C05858",
				"#D07070",
				"#E08888",
				"#ECA0A0",
				"#FCB4B4",
				"#78005C",
				"#8C2074",
				"#A03C88",
				"#B0589C",
				"#C070B0",
				"#D084C0",
				"#DC9CD0",
				"#ECB0E0",
				"#480078",
				"#602090",
				"#783CA4",
				"#8C58B8",
				"#A070CC",
				"#B484DC",
				"#C49CEC",
				"#D4B0FC",
				"#140084",
				"#302098",
				"#4C3CAC",
				"#6858C0",
				"#7C70D0",
				"#9488E0",
				"#A8A0EC",
				"#BCB4FC",
				"#000088",
				"#1C209C",
				"#3840B0",
				"#505CC0",
				"#6874D0",
				"#7C8CE0",
				"#90A4EC",
				"#A4B8FC",
				"#00187C",
				"#1C3890",
				"#3854A8",
				"#5070BC",
				"#6888CC",
				"#7C9CDC",
				"#90B4EC",
				"#A4C8FC",
				"#002C5C",
				"#1C4C78",
				"#386890",
				"#5084AC",
				"#689CC0",
				"#7CB4D4",
				"#90CCE8",
				"#A4E0FC",
				"#00402C",
				"#1C5C48",
				"#387C64",
				"#509C80",
				"#68B494",
				"#7CD0AC",
				"#90E4C0",
				"#A4FCD4",
				"#003C00",
				"#205C20",
				"#407C40",
				"#5C9C5C",
				"#74B474",
				"#8CD08C",
				"#A4E4A4",
				"#B8FCB8",
				"#143800",
				"#345C1C",
				"#507C38",
				"#6C9850",
				"#84B468",
				"#9CCC7C",
				"#B4E490",
				"#C8FCA4",
				"#2C3000",
				"#4C501C",
				"#687034",
				"#848C4C",
				"#9CA864",
				"#B8C078",
				"#D0D88C",
				"#E8F09C"
			],
			"2600 PAL": [
				"#000000",
				"#404040",
				"#6C6C6C",
				"#909090",
				"#B0B0B0",
				"#C8C8C8",
				"#DCDCDC",
				"#ECECEC",
				"#00005C",
				"#1C2074",
				"#38408C",
				"#505CA4",
				"#6874BC",
				"#7C8CD0",
				"#90A4E4",
				"#A4B8F4",
				"#000084",
				"#1C209C",
				"#3840B0",
				"#505CC0",
				"#6874D0",
				"#7C8CE0",
				"#90A4EC",
				"#A4B8FC",
				"#1C008C",
				"#381CA4",
				"#543CB8",
				"#6C58CC",
				"#8470DC",
				"#9888EC",
				"#ACA0F8",
				"#C0B4FC",
				"#380094",
				"#501CA8",
				"#6C38BC",
				"#8854CC",
				"#9C6CDC",
				"#B084EC",
				"#C49CF8",
				"#D4B0FC",
				"#4C009C",
				"#681CA8",
				"#8038B8",
				"#9854C8",
				"#AC6CD4",
				"#C084E0",
				"#D09CEC",
				"#E0B0F4",
				"#5C009C",
				"#781CA8",
				"#9038B4",
				"#A854C0",
				"#BC6CCC",
				"#D084D8",
				"#E09CE0",
				"#F0B0E8",
				"#68008C",
				"#801C98",
				"#9838A8",
				"#B054B4",
				"#C46CC0",
				"#D484CC",
				"#E49CD4",
				"#F4B0DC",
				"#700070",
				"#881C7C",
				"#A03888",
				"#B45494",
				"#C86CA0",
				"#D880AC",
				"#E89CB4",
				"#F8B0BC",
				"#700050",
				"#881C5C",
				"#A03868",
				"#B45474",
				"#C86C80",
				"#D8848C",
				"#E89C94",
				"#F8B09C",
				"#680030",
				"#801C3C",
				"#983848",
				"#B05454",
				"#C46C60",
				"#D8846C",
				"#E89C74",
				"#F4B07C",
				"#5C0014",
				"#781C20",
				"#90382C",
				"#A85438",
				"#BC6C44",
				"#D08450",
				"#E09C58",
				"#F0B060",
				"#4C0000",
				"#681C08",
				"#803814",
				"#985420",
				"#AC6C2C",
				"#C08438",
				"#D09C40",
				"#E0B048",
				"#380000",
				"#501C00",
				"#6C3804",
				"#885410",
				"#9C6C1C",
				"#B48428",
				"#C49C30",
				"#D4B038",
				"#200000",
				"#3C1C00",
				"#583800",
				"#745400",
				"#886C0C",
				"#9C8418",
				"#B09C20",
				"#C0B028",
				"#000000",
				"#1C1C00",
				"#383800",
				"#545400",
				"#6C6C00",
				"#848410",
				"#9C9C18",
				"#B0B020",
				"#002000",
				"#1C3800",
				"#385400",
				"#547000",
				"#6C8808",
				"#849C14",
				"#9CB01C",
				"#B0C024",
				"#003800",
				"#1C5000",
				"#386C00",
				"#548800",
				"#6CA000",
				"#84B80C",
				"#9CD014",
				"#B0E41C",
				"#004014",
				"#005C1C",
				"#007C28",
				"#009C34",
				"#00B840",
				"#00D44C",
				"#00EC54",
				"#00FC5C",
				"#003C30",
				"#005C40",
				"#007C4C",
				"#009C58",
				"#00B864",
				"#00D470",
				"#00EC78",
				"#00FC80",
				"#003C4C",
				"#005C5C",
				"#007C68",
				"#009C74",
				"#00B880",
				"#00D488",
				"#00EC90",
				"#00FC98",
				"#003C68",
				"#005C74",
				"#007C80",
				"#009C8C",
				"#00B898",
				"#00D4A0",
				"#00ECA4",
				"#00FCAC",
				"#003C80",
				"#005C8C",
				"#007C98",
				"#009CA4",
				"#00B8B0",
				"#00D4B8",
				"#00ECBC",
				"#00FCC4",
				"#003C94",
				"#005CA4",
				"#007CB0",
				"#009CBC",
				"#00B8C8",
				"#00D4D0",
				"#00ECD4",
				"#00FCDC",
				"#003CA8",
				"#005CB8",
				"#007CC8",
				"#009CD4",
				"#00B8E0",
				"#00D4E8",
				"#00ECEC",
				"#00FCF4"
			],
			"2600 SECAM": [
				"#000000",
				"#2121FF",
				"#F3F3F3",
				"#2121FF",
				"#F3F3F3",
				"#2121FF",
				"#F3F3F3",
				"#2121FF",
				"#F3F3F3",
				"#2121FF",
				"#F3F3F3",
				"#2121FF",
				"#F3F3F3",
				"#2121FF",
				"#F3F3F3",
				"#2121FF"
			],
			"800/800XL/XE NTSC": [
				"#000000",
				"#111111",
				"#222222",
				"#333333",
				"#444444",
				"#555555",
				"#666666",
				"#777777",
				"#888888",
				"#999999",
				"#AAAAAA",
				"#BBBBBB",
				"#CCCCCC",
				"#DDDDDD",
				"#EEEEEE",
				"#FFFFFF",
				"#190700",
				"#2A1800",
				"#3B2900",
				"#4C3A00",
				"#5D4B00",
				"#6E5C00",
				"#7F6D00",
				"#907E09",
				"#A18F1A",
				"#B3A02B",
				"#C3B13C",
				"#D4C24D",
				"#E5D35E",
				"#F7E46F",
				"#FFF582",
				"#FFFF96",
				"#310000",
				"#3F0000",
				"#531700",
				"#642800",
				"#753900",
				"#864A00",
				"#975B0A",
				"#A86C1B",
				"#B97D2C",
				"#CA8E3D",
				"#DB9F4E",
				"#ECB05F",
				"#FDC170",
				"#FFD285",
				"#FFE39C",
				"#FFF4B2",
				"#420404",
				"#4F0000",
				"#600800",
				"#711900",
				"#822A0D",
				"#933B1E",
				"#A44C2F",
				"#B55D40",
				"#C66E51",
				"#D77F62",
				"#E89073",
				"#F9A183",
				"#FFB298",
				"#FFC3AE",
				"#FFD4C4",
				"#FFE5DA",
				"#410103",
				"#50000F",
				"#61001B",
				"#720F2B",
				"#83203C",
				"#94314D",
				"#A5425E",
				"#B6536F",
				"#C76480",
				"#D87591",
				"#E986A2",
				"#FA97B3",
				"#FFA8C8",
				"#FFB9DE",
				"#FFCAEF",
				"#FBDCF6",
				"#330035",
				"#440041",
				"#55004C",
				"#660C5C",
				"#771D6D",
				"#882E7E",
				"#993F8F",
				"#AA50A0",
				"#BB61B1",
				"#CC72C2",
				"#DD83D3",
				"#EE94E4",
				"#FFA5E4",
				"#FFB6E9",
				"#FFC7EE",
				"#FFD8F3",
				"#1D005C",
				"#2E0068",
				"#400074",
				"#511084",
				"#622195",
				"#7332A6",
				"#8443B7",
				"#9554C8",
				"#A665D9",
				"#B776EA",
				"#C887EB",
				"#D998EB",
				"#EAA9EB",
				"#FBBAEB",
				"#FFCBEB",
				"#FFDCEB",
				"#00006C",
				"#0F0078",
				"#200084",
				"#300C94",
				"#411DA5",
				"#522EB6",
				"#633FC7",
				"#7450D8",
				"#8561E9",
				"#9672FA",
				"#A783FA",
				"#B894FA",
				"#C9A5FA",
				"#DAB6FA",
				"#EBC7FA",
				"#FCD8FA",
				"#000070",
				"#00007C",
				"#0D0088",
				"#1C0C98",
				"#2D1DA9",
				"#3E2EBA",
				"#4F3FCB",
				"#6050DC",
				"#7161ED",
				"#8272FE",
				"#9383FE",
				"#A494FE",
				"#B5A5FE",
				"#C6B6FE",
				"#D7C7FE",
				"#E8D8FE",
				"#00006C",
				"#000078",
				"#000084",
				"#0F0C94",
				"#201DA5",
				"#312EB6",
				"#423FC7",
				"#5350D8",
				"#6461E9",
				"#7572FA",
				"#8683FA",
				"#9794FA",
				"#A8A5FA",
				"#B9B6FA",
				"#CAC7FA",
				"#DBD8FA",
				"#00005C",
				"#000068",
				"#000074",
				"#000084",
				"#0C0D95",
				"#1D1EA6",
				"#2E2FB7",
				"#3F40C8",
				"#5051D9",
				"#6162EA",
				"#7273FB",
				"#8384FC",
				"#9495FC",
				"#A5A6FC",
				"#B6B7FC",
				"#C7C8FC",
				"#D8D9FC",
				"#000048",
				"#000054",
				"#000060",
				"#000070",
				"#000C81",
				"#0D1D92",
				"#1E2EA3",
				"#2F3FB4",
				"#4050C5",
				"#5161D6",
				"#6272E7",
				"#7383F8",
				"#8494F8",
				"#95A5F8",
				"#A6B6F8",
				"#B7C7F8",
				"#000030",
				"#00003C",
				"#000048",
				"#000058",
				"#000068",
				"#000C79",
				"#0D1D8A",
				"#1E2E9B",
				"#2F3FAC",
				"#4050BD",
				"#5161CE",
				"#6272DF",
				"#7383F0",
				"#8494F0",
				"#95A5F0",
				"#A6B6F0",
				"#000018",
				"#000024",
				"#000030",
				"#000040",
				"#000050",
				"#000060",
				"#000C70",
				"#0D1D81",
				"#1E2E92",
				"#2F3FA3",
				"#4050B4",
				"#5161C5",
				"#6272D6",
				"#7383E7",
				"#8494E7",
				"#95A5E7",
				"#000000",
				"#00000C",
				"#000018",
				"#000028",
				"#000038",
				"#000048",
				"#000058",
				"#000C68",
				"#0D1D79",
				"#1E2E8A",
				"#2F3F9B",
				"#4050AC",
				"#5161BD",
				"#6272CE",
				"#7383DF",
				"#8494DF",
				"#0C0000",
				"#1D000C",
				"#2E0018",
				"#3F0028",
				"#500038",
				"#610048",
				"#720058",
				"#7F0C68",
				"#901D79",
				"#A12E8A",
				"#B23F9B",
				"#C350AC",
				"#D461BD",
				"#E572CE",
				"#F683DF",
				"#FF94DF",
				"#200000",
				"#31000C",
				"#420018",
				"#530028",
				"#640038",
				"#750048",
				"#860058",
				"#930C68",
				"#A41D79",
				"#B52E8A",
				"#C63F9B",
				"#D750AC",
				"#E861BD",
				"#F972CE",
				"#FF83DF",
				"#FF94DF",
				"#300000",
				"#41000C",
				"#520018",
				"#630028",
				"#740038",
				"#850048",
				"#960058",
				"#A30C68",
				"#B41D79",
				"#C52E8A",
				"#D63F9B",
				"#E750AC",
				"#F861BD",
				"#FF72CE",
				"#FF83DF",
				"#FF94DF",
				"#380000",
				"#49000C",
				"#5A0018",
				"#6B0028",
				"#7C0038",
				"#8D0048",
				"#9E0058",
				"#AB0C68",
				"#BC1D79",
				"#CD2E8A",
				"#DE3F9B",
				"#EF50AC",
				"#FF61BD",
				"#FF72CE",
				"#FF83DF",
				"#FF94DF",
				"#380000",
				"#49000C",
				"#5A0018",
				"#6B0028",
				"#7C0038",
				"#8D0048",
				"#9E0058",
				"#AB0C68",
				"#BC1D79",
				"#CD2E8A",
				"#DE3F9B",
				"#EF50AC",
				"#FF61BD",
				"#FF72CE",
				"#FF83DF",
				"#FF94DF",
				"#300000",
				"#41000C",
				"#520018",
				"#630028",
				"#740038",
				"#850048",
				"#960058",
				"#A30C68",
				"#B41D79",
				"#C52E8A",
				"#D63F9B",
				"#E750AC",
				"#F861BD",
				"#FF72CE",
				"#FF83DF",
				"#FF94DF",
				"#200000",
				"#31000C",
				"#420018",
				"#530028",
				"#640038",
				"#750048",
				"#860058",
				"#930C68",
				"#A41D79",
				"#B52E8A",
				"#C63F9B",
				"#D750AC",
				"#E861BD",
				"#F972CE",
				"#FF83DF",
				"#FF94DF",
				"#0C0000",
				"#1D000C",
				"#2E0018",
				"#3F0028",
				"#500038",
				"#610048",
				"#720058",
				"#7F0C68",
				"#901D79",
				"#A12E8A",
				"#B23F9B",
				"#C350AC",
				"#D461BD",
				"#E572CE",
				"#F683DF",
				"#FF94DF"
			],
			"800/800XL/XE PAL": [
				"#000000",
				"#111111",
				"#222222",
				"#333333",
				"#444444",
				"#555555",
				"#666666",
				"#777777",
				"#888888",
				"#999999",
				"#AAAAAA",
				"#BBBBBB",
				"#CCCCCC",
				"#DDDDDD",
				"#EEEEEE",
				"#FFFFFF",
				"#190700",
				"#2A1800",
				"#3B2900",
				"#4C3A00",
				"#5D4B00",
				"#6E5C00",
				"#7F6D00",
				"#907E09",
				"#A18F1A",
				"#B3A02B",
				"#C3B13C",
				"#D4C24D",
				"#E5D35E",
				"#F7E46F",
				"#FFF582",
				"#FFFF96",
				"#310000",
				"#3F0000",
				"#531700",
				"#642800",
				"#753900",
				"#864A00",
				"#975B0A",
				"#A86C1B",
				"#B97D2C",
				"#CA8E3D",
				"#DB9F4E",
				"#ECB05F",
				"#FDC170",
				"#FFD285",
				"#FFE39C",
				"#FFF4B2",
				"#420404",
				"#4F0000",
				"#600800",
				"#711900",
				"#822A0D",
				"#933B1E",
				"#A44C2F",
				"#B55D40",
				"#C66E51",
				"#D77F62",
				"#E89073",
				"#F9A183",
				"#FFB298",
				"#FFC3AE",
				"#FFD4C4",
				"#FFE5DA",
				"#410103",
				"#50000F",
				"#61001B",
				"#720F2B",
				"#83203C",
				"#94314D",
				"#A5425E",
				"#B6536F",
				"#C76480",
				"#D87591",
				"#E986A2",
				"#FA97B3",
				"#FFA8C8",
				"#FFB9DE",
				"#FFCAEF",
				"#FBDCF6",
				"#330035",
				"#440041",
				"#55004C",
				"#660C5C",
				"#771D6D",
				"#882E7E",
				"#993F8F",
				"#AA50A0",
				"#BB61B1",
				"#CC72C2",
				"#DD83D3",
				"#EE94E4",
				"#FFA5E4",
				"#FFB6E9",
				"#FFC7EE",
				"#FFD8F3",
				"#1D005C",
				"#2E0068",
				"#400074",
				"#511084",
				"#622195",
				"#7332A6",
				"#8443B7",
				"#9554C8",
				"#A665D9",
				"#B776EA",
				"#C887EB",
				"#D998EB",
				"#EAA9EB",
				"#FBBAEB",
				"#FFCBEB",
				"#FFDCEB",
				"#00006C",
				"#0F0078",
				"#200084",
				"#300C94",
				"#411DA5",
				"#522EB6",
				"#633FC7",
				"#7450D8",
				"#8561E9",
				"#9672FA",
				"#A783FA",
				"#B894FA",
				"#C9A5FA",
				"#DAB6FA",
				"#EBC7FA",
				"#FCD8FA",
				"#000070",
				"#00007C",
				"#0D0088",
				"#1C0C98",
				"#2D1DA9",
				"#3E2EBA",
				"#4F3FCB",
				"#6050DC",
				"#7161ED",
				"#8272FE",
				"#9383FE",
				"#A494FE",
				"#B5A5FE",
				"#C6B6FE",
				"#D7C7FE",
				"#E8D8FE",
				"#00006C",
				"#000078",
				"#000084",
				"#0F0C94",
				"#201DA5",
				"#312EB6",
				"#423FC7",
				"#5350D8",
				"#6461E9",
				"#7572FA",
				"#8683FA",
				"#9794FA",
				"#A8A5FA",
				"#B9B6FA",
				"#CAC7FA",
				"#DBD8FA",
				"#00005C",
				"#000068",
				"#000074",
				"#000084",
				"#0C0D95",
				"#1D1EA6",
				"#2E2FB7",
				"#3F40C8",
				"#5051D9",
				"#6162EA",
				"#7273FB",
				"#8384FC",
				"#9495FC",
				"#A5A6FC",
				"#B6B7FC",
				"#C7C8FC",
				"#D8D9FC",
				"#000048",
				"#000054",
				"#000060",
				"#000070",
				"#000C81",
				"#0D1D92",
				"#1E2EA3",
				"#2F3FB4",
				"#4050C5",
				"#5161D6",
				"#6272E7",
				"#7383F8",
				"#8494F8",
				"#95A5F8",
				"#A6B6F8",
				"#B7C7F8",
				"#000030",
				"#00003C",
				"#000048",
				"#000058",
				"#000068",
				"#000C79",
				"#0D1D8A",
				"#1E2E9B",
				"#2F3FAC",
				"#4050BD",
				"#5161CE",
				"#6272DF",
				"#7383F0",
				"#8494F0",
				"#95A5F0",
				"#A6B6F0",
				"#000018",
				"#000024",
				"#000030",
				"#000040",
				"#000050",
				"#000060",
				"#000C70",
				"#0D1D81",
				"#1E2E92",
				"#2F3FA3",
				"#4050B4",
				"#5161C5",
				"#6272D6",
				"#7383E7",
				"#8494E7",
				"#95A5E7",
				"#000000",
				"#00000C",
				"#000018",
				"#000028",
				"#000038",
				"#000048",
				"#000058",
				"#000C68",
				"#0D1D79",
				"#1E2E8A",
				"#2F3F9B",
				"#4050AC",
				"#5161BD",
				"#6272CE",
				"#7383DF",
				"#8494DF",
				"#0C0000",
				"#1D000C",
				"#2E0018",
				"#3F0028",
				"#500038",
				"#610048",
				"#720058",
				"#7F0C68",
				"#901D79",
				"#A12E8A",
				"#B23F9B",
				"#C350AC",
				"#D461BD",
				"#E572CE",
				"#F683DF",
				"#FF94DF",
				"#200000",
				"#31000C",
				"#420018",
				"#530028",
				"#640038",
				"#750048",
				"#860058",
				"#930C68",
				"#A41D79",
				"#B52E8A",
				"#C63F9B",
				"#D750AC",
				"#E861BD",
				"#F972CE",
				"#FF83DF",
				"#FF94DF",
				"#300000",
				"#41000C",
				"#520018",
				"#630028",
				"#740038",
				"#850048",
				"#960058",
				"#A30C68",
				"#B41D79",
				"#C52E8A",
				"#D63F9B",
				"#E750AC",
				"#F861BD",
				"#FF72CE",
				"#FF83DF",
				"#FF94DF",
				"#380000",
				"#49000C",
				"#5A0018",
				"#6B0028",
				"#7C0038",
				"#8D0048",
				"#9E0058",
				"#AB0C68",
				"#BC1D79",
				"#CD2E8A",
				"#DE3F9B",
				"#EF50AC",
				"#FF61BD",
				"#FF72CE",
				"#FF83DF",
				"#FF94DF",
				"#380000",
				"#49000C",
				"#5A0018",
				"#6B0028",
				"#7C0038",
				"#8D0048",
				"#9E0058",
				"#AB0C68",
				"#BC1D79",
				"#CD2E8A",
				"#DE3F9B",
				"#EF50AC",
				"#FF61BD",
				"#FF72CE",
				"#FF83DF",
				"#FF94DF",
				"#300000",
				"#41000C",
				"#520018",
				"#630028",
				"#740038",
				"#850048",
				"#960058",
				"#A30C68",
				"#B41D79",
				"#C52E8A",
				"#D63F9B",
				"#E750AC",
				"#F861BD",
				"#FF72CE",
				"#FF83DF",
				"#FF94DF",
				"#200000",
				"#31000C",
				"#420018",
				"#530028",
				"#640038",
				"#750048",
				"#860058",
				"#930C68",
				"#A41D79",
				"#B52E8A",
				"#C63F9B",
				"#D750AC",
				"#E861BD",
				"#F972CE",
				"#FF83DF",
				"#FF94DF",
				"#0C0000",
				"#1D000C",
				"#2E0018",
				"#3F0028",
				"#500038",
				"#610048",
				"#720058",
				"#7F0C68",
				"#901D79",
				"#A12E8A",
				"#B23F9B",
				"#C350AC",
				"#D461BD",
				"#E572CE",
				"#F683DF",
				"#FF94DF"
			],
			5200: [
				"#000000",
				"#111111",
				"#222222",
				"#333333",
				"#444444",
				"#555555",
				"#666666",
				"#777777",
				"#888888",
				"#999999",
				"#AAAAAA",
				"#BBBBBB",
				"#CCCCCC",
				"#DDDDDD",
				"#EEEEEE",
				"#FFFFFF",
				"#190700",
				"#2A1800",
				"#3B2900",
				"#4C3A00",
				"#5D4B00",
				"#6E5C00",
				"#7F6D00",
				"#907E09",
				"#A18F1A",
				"#B3A02B",
				"#C3B13C",
				"#D4C24D",
				"#E5D35E",
				"#F7E46F",
				"#FFF582",
				"#FFFF96",
				"#310000",
				"#3F0000",
				"#531700",
				"#642800",
				"#753900",
				"#864A00",
				"#975B0A",
				"#A86C1B",
				"#B97D2C",
				"#CA8E3D",
				"#DB9F4E",
				"#ECB05F",
				"#FDC170",
				"#FFD285",
				"#FFE39C",
				"#FFF4B2",
				"#420404",
				"#4F0000",
				"#600800",
				"#711900",
				"#822A0D",
				"#933B1E",
				"#A44C2F",
				"#B55D40",
				"#C66E51",
				"#D77F62",
				"#E89073",
				"#F9A183",
				"#FFB298",
				"#FFC3AE",
				"#FFD4C4",
				"#FFE5DA",
				"#410103",
				"#50000F",
				"#61001B",
				"#720F2B",
				"#83203C",
				"#94314D",
				"#A5425E",
				"#B6536F",
				"#C76480",
				"#D87591",
				"#E986A2",
				"#FA97B3",
				"#FFA8C8",
				"#FFB9DE",
				"#FFCAEF",
				"#FBDCF6",
				"#330035",
				"#440041",
				"#55004C",
				"#660C5C",
				"#771D6D",
				"#882E7E",
				"#993F8F",
				"#AA50A0",
				"#BB61B1",
				"#CC72C2",
				"#DD83D3",
				"#EE94E4",
				"#FFA5E4",
				"#FFB6E9",
				"#FFC7EE",
				"#FFD8F3",
				"#1D005C",
				"#2E0068",
				"#400074",
				"#511084",
				"#622195",
				"#7332A6",
				"#8443B7",
				"#9554C8",
				"#A665D9",
				"#B776EA",
				"#C887EB",
				"#D998EB",
				"#EAA9EB",
				"#FBBAEB",
				"#FFCBEB",
				"#FFDCEB",
				"#00006C",
				"#0F0078",
				"#200084",
				"#300C94",
				"#411DA5",
				"#522EB6",
				"#633FC7",
				"#7450D8",
				"#8561E9",
				"#9672FA",
				"#A783FA",
				"#B894FA",
				"#C9A5FA",
				"#DAB6FA",
				"#EBC7FA",
				"#FCD8FA",
				"#000070",
				"#00007C",
				"#0D0088",
				"#1C0C98",
				"#2D1DA9",
				"#3E2EBA",
				"#4F3FCB",
				"#6050DC",
				"#7161ED",
				"#8272FE",
				"#9383FE",
				"#A494FE",
				"#B5A5FE",
				"#C6B6FE",
				"#D7C7FE",
				"#E8D8FE",
				"#00006C",
				"#000078",
				"#000084",
				"#0F0C94",
				"#201DA5",
				"#312EB6",
				"#423FC7",
				"#5350D8",
				"#6461E9",
				"#7572FA",
				"#8683FA",
				"#9794FA",
				"#A8A5FA",
				"#B9B6FA",
				"#CAC7FA",
				"#DBD8FA",
				"#00005C",
				"#000068",
				"#000074",
				"#000084",
				"#0C0D95",
				"#1D1EA6",
				"#2E2FB7",
				"#3F40C8",
				"#5051D9",
				"#6162EA",
				"#7273FB",
				"#8384FC",
				"#9495FC",
				"#A5A6FC",
				"#B6B7FC",
				"#C7C8FC",
				"#D8D9FC",
				"#000048",
				"#000054",
				"#000060",
				"#000070",
				"#000C81",
				"#0D1D92",
				"#1E2EA3",
				"#2F3FB4",
				"#4050C5",
				"#5161D6",
				"#6272E7",
				"#7383F8",
				"#8494F8",
				"#95A5F8",
				"#A6B6F8",
				"#B7C7F8",
				"#000030",
				"#00003C",
				"#000048",
				"#000058",
				"#000068",
				"#000C79",
				"#0D1D8A",
				"#1E2E9B",
				"#2F3FAC",
				"#4050BD",
				"#5161CE",
				"#6272DF",
				"#7383F0",
				"#8494F0",
				"#95A5F0",
				"#A6B6F0",
				"#000018",
				"#000024",
				"#000030",
				"#000040",
				"#000050",
				"#000060",
				"#000C70",
				"#0D1D81",
				"#1E2E92",
				"#2F3FA3",
				"#4050B4",
				"#5161C5",
				"#6272D6",
				"#7383E7",
				"#8494E7",
				"#95A5E7",
				"#000000",
				"#00000C",
				"#000018",
				"#000028",
				"#000038",
				"#000048",
				"#000058",
				"#000C68",
				"#0D1D79",
				"#1E2E8A",
				"#2F3F9B",
				"#4050AC",
				"#5161BD",
				"#6272CE",
				"#7383DF",
				"#8494DF",
				"#0C0000",
				"#1D000C",
				"#2E0018",
				"#3F0028",
				"#500038",
				"#610048",
				"#720058",
				"#7F0C68",
				"#901D79",
				"#A12E8A",
				"#B23F9B",
				"#C350AC",
				"#D461BD",
				"#E572CE",
				"#F683DF",
				"#FF94DF",
				"#200000",
				"#31000C",
				"#420018",
				"#530028",
				"#640038",
				"#750048",
				"#860058",
				"#930C68",
				"#A41D79",
				"#B52E8A",
				"#C63F9B",
				"#D750AC",
				"#E861BD",
				"#F972CE",
				"#FF83DF",
				"#FF94DF",
				"#300000",
				"#41000C",
				"#520018",
				"#630028",
				"#740038",
				"#850048",
				"#960058",
				"#A30C68",
				"#B41D79",
				"#C52E8A",
				"#D63F9B",
				"#E750AC",
				"#F861BD",
				"#FF72CE",
				"#FF83DF",
				"#FF94DF",
				"#380000",
				"#49000C",
				"#5A0018",
				"#6B0028",
				"#7C0038",
				"#8D0048",
				"#9E0058",
				"#AB0C68",
				"#BC1D79",
				"#CD2E8A",
				"#DE3F9B",
				"#EF50AC",
				"#FF61BD",
				"#FF72CE",
				"#FF83DF",
				"#FF94DF",
				"#380000",
				"#49000C",
				"#5A0018",
				"#6B0028",
				"#7C0038",
				"#8D0048",
				"#9E0058",
				"#AB0C68",
				"#BC1D79",
				"#CD2E8A",
				"#DE3F9B",
				"#EF50AC",
				"#FF61BD",
				"#FF72CE",
				"#FF83DF",
				"#FF94DF",
				"#300000",
				"#41000C",
				"#520018",
				"#630028",
				"#740038",
				"#850048",
				"#960058",
				"#A30C68",
				"#B41D79",
				"#C52E8A",
				"#D63F9B",
				"#E750AC",
				"#F861BD",
				"#FF72CE",
				"#FF83DF",
				"#FF94DF",
				"#200000",
				"#31000C",
				"#420018",
				"#530028",
				"#640038",
				"#750048",
				"#860058",
				"#930C68",
				"#A41D79",
				"#B52E8A",
				"#C63F9B",
				"#D750AC",
				"#E861BD",
				"#F972CE",
				"#FF83DF",
				"#FF94DF",
				"#0C0000",
				"#1D000C",
				"#2E0018",
				"#3F0028",
				"#500038",
				"#610048",
				"#720058",
				"#7F0C68",
				"#901D79",
				"#A12E8A",
				"#B23F9B",
				"#C350AC",
				"#D461BD",
				"#E572CE",
				"#F683DF",
				"#FF94DF"
			],
			"7800 NTSC": [
				"#000000",
				"#111111",
				"#222222",
				"#333333",
				"#444444",
				"#555555",
				"#666666",
				"#777777",
				"#888888",
				"#999999",
				"#AAAAAA",
				"#BBBBBB",
				"#CCCCCC",
				"#DDDDDD",
				"#EEEEEE",
				"#FFFFFF",
				"#190700",
				"#2A1800",
				"#3B2900",
				"#4C3A00",
				"#5D4B00",
				"#6E5C00",
				"#7F6D00",
				"#907E09",
				"#A18F1A",
				"#B3A02B",
				"#C3B13C",
				"#D4C24D",
				"#E5D35E",
				"#F7E46F",
				"#FFF582",
				"#FFFF96",
				"#310000",
				"#3F0000",
				"#531700",
				"#642800",
				"#753900",
				"#864A00",
				"#975B0A",
				"#A86C1B",
				"#B97D2C",
				"#CA8E3D",
				"#DB9F4E",
				"#ECB05F",
				"#FDC170",
				"#FFD285",
				"#FFE39C",
				"#FFF4B2",
				"#420404",
				"#4F0000",
				"#600800",
				"#711900",
				"#822A0D",
				"#933B1E",
				"#A44C2F",
				"#B55D40",
				"#C66E51",
				"#D77F62",
				"#E89073",
				"#F9A183",
				"#FFB298",
				"#FFC3AE",
				"#FFD4C4",
				"#FFE5DA",
				"#410103",
				"#50000F",
				"#61001B",
				"#720F2B",
				"#83203C",
				"#94314D",
				"#A5425E",
				"#B6536F",
				"#C76480",
				"#D87591",
				"#E986A2",
				"#FA97B3",
				"#FFA8C8",
				"#FFB9DE",
				"#FFCAEF",
				"#FBDCF6",
				"#330035",
				"#440041",
				"#55004C",
				"#660C5C",
				"#771D6D",
				"#882E7E",
				"#993F8F",
				"#AA50A0",
				"#BB61B1",
				"#CC72C2",
				"#DD83D3",
				"#EE94E4",
				"#FFA5E4",
				"#FFB6E9",
				"#FFC7EE",
				"#FFD8F3",
				"#1D005C",
				"#2E0068",
				"#400074",
				"#511084",
				"#622195",
				"#7332A6",
				"#8443B7",
				"#9554C8",
				"#A665D9",
				"#B776EA",
				"#C887EB",
				"#D998EB",
				"#EAA9EB",
				"#FBBAEB",
				"#FFCBEB",
				"#FFDCEB",
				"#00006C",
				"#0F0078",
				"#200084",
				"#300C94",
				"#411DA5",
				"#522EB6",
				"#633FC7",
				"#7450D8",
				"#8561E9",
				"#9672FA",
				"#A783FA",
				"#B894FA",
				"#C9A5FA",
				"#DAB6FA",
				"#EBC7FA",
				"#FCD8FA",
				"#000070",
				"#00007C",
				"#0D0088",
				"#1C0C98",
				"#2D1DA9",
				"#3E2EBA",
				"#4F3FCB",
				"#6050DC",
				"#7161ED",
				"#8272FE",
				"#9383FE",
				"#A494FE",
				"#B5A5FE",
				"#C6B6FE",
				"#D7C7FE",
				"#E8D8FE",
				"#00006C",
				"#000078",
				"#000084",
				"#0F0C94",
				"#201DA5",
				"#312EB6",
				"#423FC7",
				"#5350D8",
				"#6461E9",
				"#7572FA",
				"#8683FA",
				"#9794FA",
				"#A8A5FA",
				"#B9B6FA",
				"#CAC7FA",
				"#DBD8FA",
				"#00005C",
				"#000068",
				"#000074",
				"#000084",
				"#0C0D95",
				"#1D1EA6",
				"#2E2FB7",
				"#3F40C8",
				"#5051D9",
				"#6162EA",
				"#7273FB",
				"#8384FC",
				"#9495FC",
				"#A5A6FC",
				"#B6B7FC",
				"#C7C8FC",
				"#D8D9FC",
				"#000048",
				"#000054",
				"#000060",
				"#000070",
				"#000C81",
				"#0D1D92",
				"#1E2EA3",
				"#2F3FB4",
				"#4050C5",
				"#5161D6",
				"#6272E7",
				"#7383F8",
				"#8494F8",
				"#95A5F8",
				"#A6B6F8",
				"#B7C7F8",
				"#000030",
				"#00003C",
				"#000048",
				"#000058",
				"#000068",
				"#000C79",
				"#0D1D8A",
				"#1E2E9B",
				"#2F3FAC",
				"#4050BD",
				"#5161CE",
				"#6272DF",
				"#7383F0",
				"#8494F0",
				"#95A5F0",
				"#A6B6F0",
				"#000018",
				"#000024",
				"#000030",
				"#000040",
				"#000050",
				"#000060",
				"#000C70",
				"#0D1D81",
				"#1E2E92",
				"#2F3FA3",
				"#4050B4",
				"#5161C5",
				"#6272D6",
				"#7383E7",
				"#8494E7",
				"#95A5E7",
				"#000000",
				"#00000C",
				"#000018",
				"#000028",
				"#000038",
				"#000048",
				"#000058",
				"#000C68",
				"#0D1D79",
				"#1E2E8A",
				"#2F3F9B",
				"#4050AC",
				"#5161BD",
				"#6272CE",
				"#7383DF",
				"#8494DF",
				"#0C0000",
				"#1D000C",
				"#2E0018",
				"#3F0028",
				"#500038",
				"#610048",
				"#720058",
				"#7F0C68",
				"#901D79",
				"#A12E8A",
				"#B23F9B",
				"#C350AC",
				"#D461BD",
				"#E572CE",
				"#F683DF",
				"#FF94DF",
				"#200000",
				"#31000C",
				"#420018",
				"#530028",
				"#640038",
				"#750048",
				"#860058",
				"#930C68",
				"#A41D79",
				"#B52E8A",
				"#C63F9B",
				"#D750AC",
				"#E861BD",
				"#F972CE",
				"#FF83DF",
				"#FF94DF",
				"#300000",
				"#41000C",
				"#520018",
				"#630028",
				"#740038",
				"#850048",
				"#960058",
				"#A30C68",
				"#B41D79",
				"#C52E8A",
				"#D63F9B",
				"#E750AC",
				"#F861BD",
				"#FF72CE",
				"#FF83DF",
				"#FF94DF",
				"#380000",
				"#49000C",
				"#5A0018",
				"#6B0028",
				"#7C0038",
				"#8D0048",
				"#9E0058",
				"#AB0C68",
				"#BC1D79",
				"#CD2E8A",
				"#DE3F9B",
				"#EF50AC",
				"#FF61BD",
				"#FF72CE",
				"#FF83DF",
				"#FF94DF",
				"#380000",
				"#49000C",
				"#5A0018",
				"#6B0028",
				"#7C0038",
				"#8D0048",
				"#9E0058",
				"#AB0C68",
				"#BC1D79",
				"#CD2E8A",
				"#DE3F9B",
				"#EF50AC",
				"#FF61BD",
				"#FF72CE",
				"#FF83DF",
				"#FF94DF",
				"#300000",
				"#41000C",
				"#520018",
				"#630028",
				"#740038",
				"#850048",
				"#960058",
				"#A30C68",
				"#B41D79",
				"#C52E8A",
				"#D63F9B",
				"#E750AC",
				"#F861BD",
				"#FF72CE",
				"#FF83DF",
				"#FF94DF",
				"#200000",
				"#31000C",
				"#420018",
				"#530028",
				"#640038",
				"#750048",
				"#860058",
				"#930C68",
				"#A41D79",
				"#B52E8A",
				"#C63F9B",
				"#D750AC",
				"#E861BD",
				"#F972CE",
				"#FF83DF",
				"#FF94DF",
				"#0C0000",
				"#1D000C",
				"#2E0018",
				"#3F0028",
				"#500038",
				"#610048",
				"#720058",
				"#7F0C68",
				"#901D79",
				"#A12E8A",
				"#B23F9B",
				"#C350AC",
				"#D461BD",
				"#E572CE",
				"#F683DF",
				"#FF94DF"
			]
		},
		Casio: {
			"PV-1000": [
				"#000000",
				"#0000FF",
				"#00FF00",
				"#00FFFF",
				"#FF0000",
				"#FF00FF",
				"#FFFF00",
				"#FFFFFF"
			],
			"PV-2000": [
				"#000000",
				"#1A1C1A",
				"#4B4B4B",
				"#FFFFFF",
				"#FF0000",
				"#00FF00",
				"#FFFF00",
				"#0000FF",
				"#FF00FF",
				"#00FFFF",
				"#FF8000",
				"#800080",
				"#808000",
				"#008080",
				"#C0C0C0",
				"#FF6666"
			]
		},
		Commodore: {
			C16: [
				"#000000",
				"#FFFFFF",
				"#FF0000",
				"#00FF00",
				"#0000FF",
				"#FFFF00",
				"#00FFFF",
				"#FF00FF",
				"#FF8000",
				"#808080",
				"#C0C0C0",
				"#800000",
				"#008000",
				"#000080",
				"#808000",
				"#008080"
			],
			C128: [
				"#000000",
				"#0000FF",
				"#FF0000",
				"#FF00FF",
				"#00FF00",
				"#00FFFF",
				"#FFFF00",
				"#FFFFFF",
				"#808080",
				"#000080",
				"#008000",
				"#008080",
				"#800000",
				"#800080",
				"#808000",
				"#C0C0C0"
			],
			C64: [
				"#000000",
				"#FFFFFF",
				"#68372B",
				"#70A4B2",
				"#6F3D86",
				"#588D43",
				"#352879",
				"#B8C76F",
				"#6F4F25",
				"#433900",
				"#9A6759",
				"#444444",
				"#6C6C6C",
				"#9AD284",
				"#6C5EB5",
				"#959595"
			],
			"VIC-20": [
				"#000000",
				"#FFFFFF",
				"#FF0000",
				"#00FF00",
				"#0000FF",
				"#FFFF00",
				"#00FFFF",
				"#FF00FF",
				"#FF8000",
				"#808080",
				"#C0C0C0",
				"#800000",
				"#008000",
				"#000080",
				"#808000",
				"#008080"
			]
		},
		Emerson: {
			"Arcadia 2001": [
				"#000000",
				"#4B4B4B",
				"#B6B6B6",
				"#FFFFFF",
				"#FF0000",
				"#00FF00",
				"#0000FF",
				"#FFFF00",
				"#00FFFF",
				"#FF00FF",
				"#FF8000",
				"#800080",
				"#008080",
				"#808000",
				"#FF0080",
				"#80FF00"
			]
		},
		Enterprise: {
			"Enterprise 128": [
				"#000000",
				"#0000FF",
				"#00FF00",
				"#00FFFF",
				"#FF0000",
				"#FF00FF",
				"#FFFF00",
				"#FFFFFF",
				"#808080",
				"#000080",
				"#008000",
				"#008080",
				"#800000",
				"#800080",
				"#808000",
				"#C0C0C0"
			]
		},
		IBM: {
			"CGA 1": [
				"#000000",
				"#0000AA",
				"#00AA00",
				"#00AAAA",
				"#AA0000",
				"#AA00AA",
				"#AA5500",
				"#AAAAAA",
				"#555555",
				"#5555FF",
				"#55FF55",
				"#55FFFF",
				"#FF5555",
				"#FF55FF",
				"#FFFF55",
				"#FFFFFF"
			],
			EGA: [
				"#000000",
				"#0000AA",
				"#00AA00",
				"#00AAAA",
				"#AA0000",
				"#AA00AA",
				"#AA5500",
				"#AAAAAA",
				"#555555",
				"#5555FF",
				"#55FF55",
				"#55FFFF",
				"#FF5555",
				"#FF55FF",
				"#FFFF55",
				"#FFFFFF",
				"#000000",
				"#001010",
				"#002020",
				"#003535",
				"#004040",
				"#005555",
				"#006060",
				"#007575",
				"#008080",
				"#009595",
				"#00AAAA",
				"#00B5B5",
				"#00CACA",
				"#00DCDC",
				"#00ECEC",
				"#00FFFF",
				"#000000",
				"#100010",
				"#200020",
				"#350035",
				"#400040",
				"#550055",
				"#600060",
				"#750075",
				"#800080",
				"#950095",
				"#AA00AA",
				"#B500B5",
				"#CA00CA",
				"#DC00DC",
				"#EC00EC",
				"#FF00FF",
				"#000000",
				"#100000",
				"#200000",
				"#350000",
				"#400000",
				"#550000",
				"#600000",
				"#750000",
				"#800000",
				"#950000",
				"#AA0000",
				"#B50000",
				"#CA0000",
				"#DC0000",
				"#EC0000",
				"#FF0000",
				"#000000",
				"#101000",
				"#202000",
				"#353500",
				"#404000",
				"#555500",
				"#606000",
				"#757500",
				"#808000",
				"#959500",
				"#AAAA00",
				"#B5B500",
				"#CACA00",
				"#DCDC00",
				"#ECEC00",
				"#FFFF00",
				"#000000",
				"#001000",
				"#002000",
				"#003500",
				"#004000",
				"#005500",
				"#006000",
				"#007500",
				"#008000",
				"#009500",
				"#00AA00",
				"#00B500",
				"#00CA00",
				"#00DC00",
				"#00EC00",
				"#00FF00",
				"#000000",
				"#000010",
				"#000020",
				"#000035",
				"#000040",
				"#000055",
				"#000060",
				"#000075",
				"#000080",
				"#000095",
				"#0000AA",
				"#0000B5",
				"#0000CA",
				"#0000DC",
				"#0000EC",
				"#0000FF",
				"#000000",
				"#101010",
				"#202020",
				"#353535",
				"#404040",
				"#555555",
				"#606060",
				"#757575",
				"#808080",
				"#959595",
				"#AAAAAA",
				"#B5B5B5",
				"#CACACA",
				"#DCDCDC",
				"#ECECEC",
				"#FFFFFF"
			],
			VGA: [
				"#000000",
				"#0000AA",
				"#00AA00",
				"#00AAAA",
				"#AA0000",
				"#AA00AA",
				"#AA5500",
				"#AAAAAA",
				"#555555",
				"#5555FF",
				"#55FF55",
				"#55FFFF",
				"#FF5555",
				"#FF55FF",
				"#FFFF55",
				"#FFFFFF",
				"#000000",
				"#101010",
				"#202020",
				"#353535",
				"#404040",
				"#555555",
				"#606060",
				"#757575",
				"#808080",
				"#959595",
				"#AAAAAA",
				"#B5B5B5",
				"#CACACA",
				"#DCDCDC",
				"#ECECEC",
				"#FFFFFF",
				"#000000",
				"#000010",
				"#000020",
				"#000035",
				"#000040",
				"#000055",
				"#000060",
				"#000075",
				"#000080",
				"#000095",
				"#0000AA",
				"#0000B5",
				"#0000CA",
				"#0000DC",
				"#0000EC",
				"#0000FF",
				"#000000",
				"#001000",
				"#002000",
				"#003500",
				"#004000",
				"#005500",
				"#006000",
				"#007500",
				"#008000",
				"#009500",
				"#00AA00",
				"#00B500",
				"#00CA00",
				"#00DC00",
				"#00EC00",
				"#00FF00",
				"#000000",
				"#100000",
				"#200000",
				"#350000",
				"#400000",
				"#550000",
				"#600000",
				"#750000",
				"#800000",
				"#950000",
				"#AA0000",
				"#B50000",
				"#CA0000",
				"#DC0000",
				"#EC0000",
				"#FF0000",
				"#000000",
				"#101000",
				"#202000",
				"#353500",
				"#404000",
				"#555500",
				"#606000",
				"#757500",
				"#808000",
				"#959500",
				"#AAAA00",
				"#B5B500",
				"#CACA00",
				"#DCDC00",
				"#ECEC00",
				"#FFFF00",
				"#000000",
				"#100010",
				"#200020",
				"#350035",
				"#400040",
				"#550055",
				"#600060",
				"#750075",
				"#800080",
				"#950095",
				"#AA00AA",
				"#B500B5",
				"#CA00CA",
				"#DC00DC",
				"#EC00EC",
				"#FF00FF",
				"#000000",
				"#001010",
				"#002020",
				"#003535",
				"#004040",
				"#005555",
				"#006060",
				"#007575",
				"#008080",
				"#009595",
				"#00AAAA",
				"#00B5B5",
				"#00CACA",
				"#00DCDC",
				"#00ECEC",
				"#00FFFF",
				"#000000",
				"#100000",
				"#200000",
				"#350000",
				"#400000",
				"#550000",
				"#600000",
				"#750000",
				"#800000",
				"#950000",
				"#AA0000",
				"#B50000",
				"#CA0000",
				"#DC0000",
				"#EC0000",
				"#FF0000"
			],
			"Windows 3.1": [
				"#000000",
				"#800000",
				"#008000",
				"#808000",
				"#000080",
				"#800080",
				"#008080",
				"#C0C0C0",
				"#808080",
				"#FF0000",
				"#00FF00",
				"#FFFF00",
				"#0000FF",
				"#FF00FF",
				"#00FFFF",
				"#FFFFFF"
			]
		},
		Memotech: {
			MTX512: [
				"#000000",
				"#0000FF",
				"#FF0000",
				"#FF00FF",
				"#00FF00",
				"#00FFFF",
				"#FFFF00",
				"#FFFFFF",
				"#000000",
				"#0000FF",
				"#FF0000",
				"#FF00FF",
				"#00FF00",
				"#00FFFF",
				"#FFFF00",
				"#FFFFFF"
			]
		},
		MSX: {
			MSX1: [
				"#000000",
				"#010101",
				"#3EB849",
				"#74D07D",
				"#5955E0",
				"#8076F1",
				"#B95E51",
				"#65DBEF",
				"#DB6559",
				"#FF897D",
				"#CCC35E",
				"#DED087",
				"#3AA241",
				"#B766B5",
				"#CCCCCC",
				"#FFFFFF"
			],
			MSX2: [
				"#000000",
				"#010101",
				"#3EB849",
				"#74D07D",
				"#5955E0",
				"#8076F1",
				"#B95E51",
				"#65DBEF",
				"#DB6559",
				"#FF897D",
				"#CCC35E",
				"#DED087",
				"#3AA241",
				"#B766B5",
				"#CCCCCC",
				"#FFFFFF",
				"#000000",
				"#010101",
				"#3EB849",
				"#74D07D",
				"#5955E0",
				"#8076F1",
				"#B95E51",
				"#65DBEF",
				"#DB6559",
				"#FF897D",
				"#CCC35E",
				"#DED087",
				"#3AA241",
				"#B766B5",
				"#CCCCCC",
				"#FFFFFF",
				"#000000",
				"#010101",
				"#3EB849",
				"#74D07D",
				"#5955E0",
				"#8076F1",
				"#B95E51",
				"#65DBEF",
				"#DB6559",
				"#FF897D",
				"#CCC35E",
				"#DED087",
				"#3AA241",
				"#B766B5",
				"#CCCCCC",
				"#FFFFFF",
				"#000000",
				"#010101",
				"#3EB849",
				"#74D07D",
				"#5955E0",
				"#8076F1",
				"#B95E51",
				"#65DBEF",
				"#DB6559",
				"#FF897D",
				"#CCC35E",
				"#DED087",
				"#3AA241",
				"#B766B5",
				"#CCCCCC",
				"#FFFFFF",
				"#000000",
				"#010101",
				"#3EB849",
				"#74D07D",
				"#5955E0",
				"#8076F1",
				"#B95E51",
				"#65DBEF",
				"#DB6559",
				"#FF897D",
				"#CCC35E",
				"#DED087",
				"#3AA241",
				"#B766B5",
				"#CCCCCC",
				"#FFFFFF",
				"#000000",
				"#010101",
				"#3EB849",
				"#74D07D",
				"#5955E0",
				"#8076F1",
				"#B95E51",
				"#65DBEF",
				"#DB6559",
				"#FF897D",
				"#CCC35E",
				"#DED087",
				"#3AA241",
				"#B766B5",
				"#CCCCCC",
				"#FFFFFF",
				"#000000",
				"#010101",
				"#3EB849",
				"#74D07D",
				"#5955E0",
				"#8076F1",
				"#B95E51",
				"#65DBEF",
				"#DB6559",
				"#FF897D",
				"#CCC35E",
				"#DED087",
				"#3AA241",
				"#B766B5",
				"#CCCCCC",
				"#FFFFFF",
				"#000000",
				"#010101",
				"#3EB849",
				"#74D07D",
				"#5955E0",
				"#8076F1",
				"#B95E51",
				"#65DBEF",
				"#DB6559",
				"#FF897D",
				"#CCC35E",
				"#DED087",
				"#3AA241",
				"#B766B5",
				"#CCCCCC",
				"#FFFFFF",
				"#000000",
				"#010101",
				"#3EB849",
				"#74D07D",
				"#5955E0",
				"#8076F1",
				"#B95E51",
				"#65DBEF",
				"#DB6559",
				"#FF897D",
				"#CCC35E",
				"#DED087",
				"#3AA241",
				"#B766B5",
				"#CCCCCC",
				"#FFFFFF",
				"#000000",
				"#010101",
				"#3EB849",
				"#74D07D",
				"#5955E0",
				"#8076F1",
				"#B95E51",
				"#65DBEF",
				"#DB6559",
				"#FF897D",
				"#CCC35E",
				"#DED087",
				"#3AA241",
				"#B766B5",
				"#CCCCCC",
				"#FFFFFF",
				"#000000",
				"#010101",
				"#3EB849",
				"#74D07D",
				"#5955E0",
				"#8076F1",
				"#B95E51",
				"#65DBEF",
				"#DB6559",
				"#FF897D",
				"#CCC35E",
				"#DED087",
				"#3AA241",
				"#B766B5",
				"#CCCCCC",
				"#FFFFFF",
				"#000000",
				"#010101",
				"#3EB849",
				"#74D07D",
				"#5955E0",
				"#8076F1",
				"#B95E51",
				"#65DBEF",
				"#DB6559",
				"#FF897D",
				"#CCC35E",
				"#DED087",
				"#3AA241",
				"#B766B5",
				"#CCCCCC",
				"#FFFFFF",
				"#000000",
				"#010101",
				"#3EB849",
				"#74D07D",
				"#5955E0",
				"#8076F1",
				"#B95E51",
				"#65DBEF",
				"#DB6559",
				"#FF897D",
				"#CCC35E",
				"#DED087",
				"#3AA241",
				"#B766B5",
				"#CCCCCC",
				"#FFFFFF",
				"#000000",
				"#010101",
				"#3EB849",
				"#74D07D",
				"#5955E0",
				"#8076F1",
				"#B95E51",
				"#65DBEF",
				"#DB6559",
				"#FF897D",
				"#CCC35E",
				"#DED087",
				"#3AA241",
				"#B766B5",
				"#CCCCCC",
				"#FFFFFF",
				"#000000",
				"#010101",
				"#3EB849",
				"#74D07D",
				"#5955E0",
				"#8076F1",
				"#B95E51",
				"#65DBEF",
				"#DB6559",
				"#FF897D",
				"#CCC35E",
				"#DED087",
				"#3AA241",
				"#B766B5",
				"#CCCCCC",
				"#FFFFFF",
				"#000000",
				"#010101",
				"#3EB849",
				"#74D07D",
				"#5955E0",
				"#8076F1",
				"#B95E51",
				"#65DBEF",
				"#DB6559",
				"#FF897D",
				"#CCC35E",
				"#DED087",
				"#3AA241",
				"#B766B5",
				"#CCCCCC",
				"#FFFFFF",
				"#000000",
				"#010101",
				"#3EB849",
				"#74D07D",
				"#5955E0",
				"#8076F1",
				"#B95E51",
				"#65DBEF",
				"#DB6559",
				"#FF897D",
				"#CCC35E",
				"#DED087",
				"#3AA241",
				"#B766B5",
				"#CCCCCC",
				"#FFFFFF",
				"#000000",
				"#010101",
				"#3EB849",
				"#74D07D",
				"#5955E0",
				"#8076F1",
				"#B95E51",
				"#65DBEF",
				"#DB6559",
				"#FF897D",
				"#CCC35E",
				"#DED087",
				"#3AA241",
				"#B766B5",
				"#CCCCCC",
				"#FFFFFF",
				"#000000",
				"#010101",
				"#3EB849",
				"#74D07D",
				"#5955E0",
				"#8076F1",
				"#B95E51",
				"#65DBEF",
				"#DB6559",
				"#FF897D",
				"#CCC35E",
				"#DED087",
				"#3AA241",
				"#B766B5",
				"#CCCCCC",
				"#FFFFFF",
				"#000000",
				"#010101",
				"#3EB849",
				"#74D07D",
				"#5955E0",
				"#8076F1",
				"#B95E51",
				"#65DBEF",
				"#DB6559",
				"#FF897D",
				"#CCC35E",
				"#DED087",
				"#3AA241",
				"#B766B5",
				"#CCCCCC",
				"#FFFFFF",
				"#000000",
				"#010101",
				"#3EB849",
				"#74D07D",
				"#5955E0",
				"#8076F1",
				"#B95E51",
				"#65DBEF",
				"#DB6559",
				"#FF897D",
				"#CCC35E",
				"#DED087",
				"#3AA241",
				"#B766B5",
				"#CCCCCC",
				"#FFFFFF",
				"#000000",
				"#010101",
				"#3EB849",
				"#74D07D",
				"#5955E0",
				"#8076F1",
				"#B95E51",
				"#65DBEF",
				"#DB6559",
				"#FF897D",
				"#CCC35E",
				"#DED087",
				"#3AA241",
				"#B766B5",
				"#CCCCCC",
				"#FFFFFF",
				"#000000",
				"#010101",
				"#3EB849",
				"#74D07D",
				"#5955E0",
				"#8076F1",
				"#B95E51",
				"#65DBEF",
				"#DB6559",
				"#FF897D",
				"#CCC35E",
				"#DED087",
				"#3AA241",
				"#B766B5",
				"#CCCCCC",
				"#FFFFFF",
				"#000000",
				"#010101",
				"#3EB849",
				"#74D07D",
				"#5955E0",
				"#8076F1",
				"#B95E51",
				"#65DBEF",
				"#DB6559",
				"#FF897D",
				"#CCC35E",
				"#DED087",
				"#3AA241",
				"#B766B5",
				"#CCCCCC",
				"#FFFFFF",
				"#000000",
				"#010101",
				"#3EB849",
				"#74D07D",
				"#5955E0",
				"#8076F1",
				"#B95E51",
				"#65DBEF",
				"#DB6559",
				"#FF897D",
				"#CCC35E",
				"#DED087",
				"#3AA241",
				"#B766B5",
				"#CCCCCC",
				"#FFFFFF",
				"#000000",
				"#010101",
				"#3EB849",
				"#74D07D",
				"#5955E0",
				"#8076F1",
				"#B95E51",
				"#65DBEF",
				"#DB6559",
				"#FF897D",
				"#CCC35E",
				"#DED087",
				"#3AA241",
				"#B766B5",
				"#CCCCCC",
				"#FFFFFF",
				"#000000",
				"#010101",
				"#3EB849",
				"#74D07D",
				"#5955E0",
				"#8076F1",
				"#B95E51",
				"#65DBEF",
				"#DB6559",
				"#FF897D",
				"#CCC35E",
				"#DED087",
				"#3AA241",
				"#B766B5",
				"#CCCCCC",
				"#FFFFFF",
				"#000000",
				"#010101",
				"#3EB849",
				"#74D07D",
				"#5955E0",
				"#8076F1",
				"#B95E51",
				"#65DBEF",
				"#DB6559",
				"#FF897D",
				"#CCC35E",
				"#DED087",
				"#3AA241",
				"#B766B5",
				"#CCCCCC",
				"#FFFFFF",
				"#000000",
				"#010101",
				"#3EB849",
				"#74D07D",
				"#5955E0",
				"#8076F1",
				"#B95E51",
				"#65DBEF",
				"#DB6559",
				"#FF897D",
				"#CCC35E",
				"#DED087",
				"#3AA241",
				"#B766B5",
				"#CCCCCC",
				"#FFFFFF",
				"#000000",
				"#010101",
				"#3EB849",
				"#74D07D",
				"#5955E0",
				"#8076F1",
				"#B95E51",
				"#65DBEF",
				"#DB6559",
				"#FF897D",
				"#CCC35E",
				"#DED087",
				"#3AA241",
				"#B766B5",
				"#CCCCCC",
				"#FFFFFF",
				"#000000",
				"#010101",
				"#3EB849",
				"#74D07D",
				"#5955E0",
				"#8076F1",
				"#B95E51",
				"#65DBEF",
				"#DB6559",
				"#FF897D",
				"#CCC35E",
				"#DED087",
				"#3AA241",
				"#B766B5",
				"#CCCCCC",
				"#FFFFFF",
				"#000000",
				"#010101",
				"#3EB849",
				"#74D07D",
				"#5955E0",
				"#8076F1",
				"#B95E51",
				"#65DBEF",
				"#DB6559",
				"#FF897D",
				"#CCC35E",
				"#DED087",
				"#3AA241",
				"#B766B5",
				"#CCCCCC",
				"#FFFFFF",
				"#000000",
				"#010101",
				"#3EB849",
				"#74D07D",
				"#5955E0",
				"#8076F1",
				"#B95E51",
				"#65DBEF",
				"#DB6559",
				"#FF897D",
				"#CCC35E",
				"#DED087",
				"#3AA241",
				"#B766B5",
				"#CCCCCC",
				"#FFFFFF"
			]
		},
		Nintendo: {
			Famicom: [
				"#000000",
				"#FCFCFC",
				"#F8F8F8",
				"#ECECEC",
				"#DCDCDC",
				"#C0C0C0",
				"#A0A0A0",
				"#808080",
				"#606060",
				"#404040",
				"#202020",
				"#0000FC",
				"#0000E8",
				"#0000D4",
				"#0000C0",
				"#0000A8",
				"#000094",
				"#000080",
				"#00006C",
				"#000058",
				"#000044",
				"#000030",
				"#0058FC",
				"#0054E8",
				"#0050D4",
				"#004CC0",
				"#0048A8",
				"#004494",
				"#004080",
				"#003C6C",
				"#003858",
				"#003444",
				"#003030",
				"#00FCFC",
				"#00E8E8",
				"#00D4D4",
				"#00C0C0",
				"#00A8A8",
				"#009494",
				"#008080",
				"#006C6C",
				"#005858",
				"#004444",
				"#003030",
				"#00FC00",
				"#00E800",
				"#00D400",
				"#00C000",
				"#00A800",
				"#009400",
				"#008000",
				"#006C00",
				"#005800",
				"#004400",
				"#003000",
				"#FCFC00",
				"#E8E800",
				"#D4D400",
				"#C0C000",
				"#A8A800",
				"#949400",
				"#808000",
				"#6C6C00",
				"#585800",
				"#444400",
				"#303000",
				"#FC0000",
				"#E80000",
				"#D40000",
				"#C00000",
				"#A80000",
				"#940000",
				"#800000",
				"#6C0000",
				"#580000",
				"#440000",
				"#300000",
				"#FC00FC",
				"#E800E8",
				"#D400D4",
				"#C000C0",
				"#A800A8",
				"#940094",
				"#800080",
				"#6C006C",
				"#580058",
				"#440044",
				"#300030"
			],
			Gameboy: ["#0F380F", "#306230", "#8BAC0F", "#9BBC0F"],
			NES: [
				"#000000",
				"#FCFCFC",
				"#F8F8F8",
				"#ECECEC",
				"#DCDCDC",
				"#C0C0C0",
				"#A0A0A0",
				"#808080",
				"#606060",
				"#404040",
				"#202020",
				"#0000FC",
				"#0000E8",
				"#0000D4",
				"#0000C0",
				"#0000A8",
				"#000094",
				"#000080",
				"#00006C",
				"#000058",
				"#000044",
				"#000030",
				"#0058FC",
				"#0054E8",
				"#0050D4",
				"#004CC0",
				"#0048A8",
				"#004494",
				"#004080",
				"#003C6C",
				"#003858",
				"#003444",
				"#003030",
				"#00FCFC",
				"#00E8E8",
				"#00D4D4",
				"#00C0C0",
				"#00A8A8",
				"#009494",
				"#008080",
				"#006C6C",
				"#005858",
				"#004444",
				"#003030",
				"#00FC00",
				"#00E800",
				"#00D400",
				"#00C000",
				"#00A800",
				"#009400",
				"#008000",
				"#006C00",
				"#005800",
				"#004400",
				"#003000",
				"#FCFC00",
				"#E8E800",
				"#D4D400",
				"#C0C000",
				"#A8A800",
				"#949400",
				"#808000",
				"#6C6C00",
				"#585800",
				"#444400",
				"#303000",
				"#FC0000",
				"#E80000",
				"#D40000",
				"#C00000",
				"#A80000",
				"#940000",
				"#800000",
				"#6C0000",
				"#580000",
				"#440000",
				"#300000",
				"#FC00FC",
				"#E800E8",
				"#D400D4",
				"#C000C0",
				"#A800A8",
				"#940094",
				"#800080",
				"#6C006C",
				"#580058",
				"#440044",
				"#300030"
			],
			"Virtual Boy": [
				"#000000",
				"#FF0000",
				"#DD0000",
				"#BB0000",
				"#990000",
				"#770000",
				"#550000",
				"#330000"
			]
		},
		Oric: {
			"Oric-1": [
				"#000000",
				"#FF0000",
				"#00FF00",
				"#FFFF00",
				"#0000FF",
				"#FF00FF",
				"#00FFFF",
				"#FFFFFF",
				"#808080",
				"#FF8080",
				"#80FF80",
				"#FFFF80",
				"#8080FF",
				"#FF80FF",
				"#80FFFF",
				"#FFFFFF"
			],
			Atmos: [
				"#000000",
				"#FF0000",
				"#00FF00",
				"#FFFF00",
				"#0000FF",
				"#FF00FF",
				"#00FFFF",
				"#FFFFFF",
				"#808080",
				"#FF8080",
				"#80FF80",
				"#FFFF80",
				"#8080FF",
				"#FF80FF",
				"#80FFFF",
				"#FFFFFF"
			]
		},
		Philips: {
			VG5000: [
				"#000000",
				"#1A1C1A",
				"#4B4B4B",
				"#B6B6B6",
				"#FFFFFF",
				"#FF0000",
				"#00FF00",
				"#FFFF00",
				"#0000FF",
				"#FF00FF",
				"#00FFFF",
				"#FF8000",
				"#800080",
				"#808000",
				"#008080"
			]
		},
		Sega: {
			"Game Gear": [
				"#000000",
				"#0A0A0A",
				"#151515",
				"#202020",
				"#2A2A2A",
				"#353535",
				"#404040",
				"#4A4A4A",
				"#555555",
				"#606060",
				"#6A6A6A",
				"#757575",
				"#808080",
				"#8A8A8A",
				"#959595",
				"#A0A0A0",
				"#AAAAAA",
				"#B5B5B5",
				"#C0C0C0",
				"#CACACA",
				"#D5D5D5",
				"#E0E0E0",
				"#EAEAEA",
				"#F5F5F5",
				"#FFFFFF",
				"#001500",
				"#002A00",
				"#004000",
				"#005500",
				"#006A00",
				"#008000",
				"#009500",
				"#00AA00",
				"#00C000",
				"#00D500",
				"#00EA00",
				"#00FF00",
				"#150000",
				"#2A0000",
				"#400000",
				"#550000",
				"#6A0000",
				"#800000",
				"#950000",
				"#AA0000",
				"#C00000",
				"#D50000",
				"#EA0000",
				"#FF0000",
				"#000015",
				"#00002A",
				"#000040",
				"#000055",
				"#00006A",
				"#000080",
				"#000095",
				"#0000AA",
				"#0000C0",
				"#0000D5",
				"#0000EA",
				"#0000FF",
				"#151500",
				"#2A2A00",
				"#404000",
				"#555500",
				"#6A6A00",
				"#808000",
				"#959500",
				"#AAAA00",
				"#C0C000",
				"#D5D500",
				"#EAEA00",
				"#FFFF00"
			],
			"Master System": [
				"#000000",
				"#550000",
				"#AA0000",
				"#FF0000",
				"#005500",
				"#555500",
				"#AA5500",
				"#FF5500",
				"#00AA00",
				"#55AA00",
				"#AAAA00",
				"#FFAA00",
				"#00FF00",
				"#55FF00",
				"#AAFF00",
				"#FFFF00",
				"#000055",
				"#550055",
				"#AA0055",
				"#FF0055",
				"#005555",
				"#555555",
				"#AA5555",
				"#FF5555",
				"#00AA55",
				"#55AA55",
				"#AAAA55",
				"#FFAA55",
				"#00FF55",
				"#55FF55",
				"#AAFF55",
				"#FFFF55",
				"#0000AA",
				"#5500AA",
				"#AA00AA",
				"#FF00AA",
				"#0055AA",
				"#5555AA",
				"#AA55AA",
				"#FF55AA",
				"#00AAAA",
				"#55AAAA",
				"#AAAAAA",
				"#FFAAAA",
				"#00FFAA",
				"#55FFAA",
				"#AAFFAA",
				"#FFFFAA",
				"#0000FF",
				"#5500FF",
				"#AA00FF",
				"#FF00FF",
				"#0055FF",
				"#5555FF",
				"#AA55FF",
				"#FF55FF",
				"#00AAFF",
				"#55AAFF",
				"#AAAAFF",
				"#FFAAFF",
				"#00FFFF",
				"#55FFFF",
				"#AAFFFF",
				"#FFFFFF"
			],
			"SG-1000": [
				"#000000",
				"#0000FF",
				"#00FF00",
				"#00FFFF",
				"#FF0000",
				"#FF00FF",
				"#FFFF00",
				"#FFFFFF",
				"#000000",
				"#0000FF",
				"#00FF00",
				"#00FFFF",
				"#FF0000",
				"#FF00FF",
				"#FFFF00",
				"#FFFFFF"
			]
		},
		Sinclair: {
			QL: [
				"#000000",
				"#0000FF",
				"#FF0000",
				"#FF00FF",
				"#00FF00",
				"#00FFFF",
				"#FFFF00",
				"#FFFFFF"
			],
			ZX81: ["#000000", "#FFFFFF"],
			"ZX Spectrum": [
				"#000000",
				"#0000D7",
				"#D70000",
				"#D700D7",
				"#00D700",
				"#00D7D7",
				"#D7D700",
				"#D7D7D7",
				"#000000",
				"#0000FF",
				"#FF0000",
				"#FF00FF",
				"#00FF00",
				"#00FFFF",
				"#FFFF00",
				"#FFFFFF"
			]
		},
		Spectravideo: {
			"SV-328": [
				"#000000",
				"#0000FF",
				"#FF0000",
				"#FF00FF",
				"#00FF00",
				"#00FFFF",
				"#FFFF00",
				"#FFFFFF",
				"#808080",
				"#000080",
				"#008000",
				"#008080",
				"#800000",
				"#800080",
				"#808000",
				"#C0C0C0"
			]
		},
		Thomson: {
			MO5: [
				"#000000",
				"#FF0000",
				"#00FF00",
				"#FFFF00",
				"#0000FF",
				"#FF00FF",
				"#00FFFF",
				"#FFFFFF",
				"#808080",
				"#FF8080",
				"#80FF80",
				"#FFFF80",
				"#8080FF",
				"#FF80FF",
				"#80FFFF",
				"#FFFFFF"
			],
			TO7: [
				"#000000",
				"#FF0000",
				"#00FF00",
				"#FFFF00",
				"#0000FF",
				"#FF00FF",
				"#00FFFF",
				"#FFFFFF",
				"#808080",
				"#FF8080",
				"#80FF80",
				"#FFFF80",
				"#8080FF",
				"#FF80FF",
				"#80FFFF",
				"#FFFFFF"
			]
		},
		Tandy: {
			CoCo: [
				"#000000",
				"#1A1C1A",
				"#4B4B4B",
				"#B6B6B6",
				"#FFFFFF",
				"#FF0000",
				"#00FF00",
				"#FFFF00",
				"#0000FF",
				"#FF00FF",
				"#00FFFF",
				"#FF8000",
				"#800080",
				"#808000",
				"#008080",
				"#C0C0C0"
			]
		},
		Vectrex: {
			Vectrex: ["#000000", "#555555", "#AAAAAA", "#FFFFFF"]
		},
		Fujitsu: {
			"FM Towns": [
				"#000000",
				"#0000FF",
				"#00FF00",
				"#00FFFF",
				"#FF0000",
				"#FF00FF",
				"#FFFF00",
				"#FFFFFF",
				"#808080",
				"#000080",
				"#008000",
				"#008080",
				"#800000",
				"#800080",
				"#808000",
				"#C0C0C0"
			]
		},
		Sharp: {
			"MZ-700": [
				"#000000",
				"#0000FF",
				"#FF0000",
				"#FF00FF",
				"#00FF00",
				"#00FFFF",
				"#FFFF00",
				"#FFFFFF",
				"#808080",
				"#000080",
				"#008000",
				"#008080",
				"#800000",
				"#800080",
				"#808000",
				"#C0C0C0"
			],
			"MZ-800": [
				"#000000",
				"#0000FF",
				"#FF0000",
				"#FF00FF",
				"#00FF00",
				"#00FFFF",
				"#FFFF00",
				"#FFFFFF",
				"#808080",
				"#000080",
				"#008000",
				"#008080",
				"#800000",
				"#800080",
				"#808000",
				"#C0C0C0"
			],
			X1: [
				"#000000",
				"#0000FF",
				"#FF0000",
				"#FF00FF",
				"#00FF00",
				"#00FFFF",
				"#FFFF00",
				"#FFFFFF",
				"#808080",
				"#000080",
				"#008000",
				"#008080",
				"#800000",
				"#800080",
				"#808000",
				"#C0C0C0"
			],
			X68000: [
				"#000000",
				"#0000FF",
				"#FF0000",
				"#FF00FF",
				"#00FF00",
				"#00FFFF",
				"#FFFF00",
				"#FFFFFF",
				"#808080",
				"#000080",
				"#008000",
				"#008080",
				"#800000",
				"#800080",
				"#808000",
				"#C0C0C0"
			]
		}
	},
	PALETTE_INFO: {
		"2600 NTSC": { colors: 128, desc: "TIA 128 colors (NTSC)" },
		"2600 PAL": { colors: 104, desc: "TIA 104 colors (PAL)" },
		"2600 SECAM": { colors: 8, desc: "TIA 8 colors (SECAM)" },
		"800/800XL/XE NTSC": { colors: 256, desc: "GTIA 256 colors" },
		"800/800XL/XE PAL": { colors: 256, desc: "GTIA 256 colors" },
		5200: { colors: 256, desc: "GTIA 256 colors" },
		"7800 NTSC": { colors: 256, desc: "MARIA 256 colors (25 on screen)" }
	}
};

const App = {
	State: {
		tool: "pencil",
		color: "#000000",
		zoom: 10,
		width: 64,
		height: 64,
		paletteName: "C64",
		isDrawing: false,
		transEnabled: false,
		transColor: "#ffffff",
		lightMode: true,
		clipboard: null,
		selection: null,
		startX: 0,
		startY: 0,
		previewImageData: null,
		history: [],
		historyIndex: -1,
		maxHistory: 50,
		isMouseDown: false
	},

	DOM: {
		canvas: document.getElementById("main-canvas"),
		gridCanvas: document.getElementById("grid-canvas"),
		previewCanvas: document.getElementById("preview-canvas"),
		selectionBox: document.getElementById("selection-box"),
		ctx: null,
		gridCtx: null,
		previewCtx: null,
		paletteGrid: document.getElementById("palette-grid"),
		transHelper: document.getElementById("trans-helper"),
		posDisplay: document.getElementById("pos-display"),
		sizeDisplay: document.getElementById("size-display"),
		paletteSelect: document.getElementById("palette-select"),
		paletteInfo: document.getElementById("palette-info")
	},

	init: () => {
		App.DOM.ctx = App.DOM.canvas.getContext("2d", { willReadFrequently: true });
		App.DOM.gridCtx = App.DOM.gridCanvas.getContext("2d");
		App.DOM.previewCtx = App.DOM.previewCanvas.getContext("2d");

		App.Palette.populateSelect();
		App.Palette.load("Commodore|C64");
		App.Canvas.resize(64);

		App.State.transColor = "#ffffff";
		App.Palette.updateTransHelper();

		App.History.saveState();
		App.Events.bind();
		App.Security.init();
	},

	Canvas: {
		resize: (size) => {
			size = parseInt(size);
			App.State.width = size;
			App.State.height = size;
			App.DOM.canvas.width = size;
			App.DOM.canvas.height = size;
			App.DOM.previewCanvas.width = size;
			App.DOM.previewCanvas.height = size;

			App.DOM.ctx.fillStyle = "#ffffff";
			App.DOM.ctx.fillRect(0, 0, size, size);

			App.Canvas.zoom(App.State.zoom);
			App.Preview.update();
			App.DOM.sizeDisplay.textContent = `${size}x${size}`;
			App.History.reset();
			App.History.saveState();
		},

		zoom: (level) => {
			App.State.zoom = parseInt(level);
			const displayW = App.State.width * App.State.zoom;
			const displayH = App.State.height * App.State.zoom;

			App.DOM.canvas.style.width = `${displayW}px`;
			App.DOM.canvas.style.height = `${displayH}px`;
			App.DOM.gridCanvas.style.width = `${displayW}px`;
			App.DOM.gridCanvas.style.height = `${displayH}px`;
			App.DOM.gridCanvas.width = displayW;
			App.DOM.gridCanvas.height = displayH;

			App.UI.drawGrid();
			if (App.State.selection) {
				App.UI.updateSelectionBox(App.State.selection);
			}
		}
	},

	Palette: {
		populateSelect: () => {
			App.DOM.paletteSelect.innerHTML = "";
			const sortedMfr = Object.keys(Config.PALETTES).sort();
			sortedMfr.forEach((m) => {
				const og = document.createElement("optgroup");
				og.label = m;
				const sortedGroup = Object.entries(Config.PALETTES[m]).sort();
				sortedGroup.forEach(([name, colors]) => {
					const opt = document.createElement("option");
					opt.value = `${m}|${name}`;
					opt.textContent = name;
					og.appendChild(opt);
				});
				App.DOM.paletteSelect.appendChild(og);
			});
		},

		load: (val) => {
			const [m, name] = val.split("|");
			const colors = Config.PALETTES[m][name];
			App.State.paletteName = name;

			App.DOM.paletteGrid.innerHTML = "";
			colors.forEach((c) => {
				const el = document.createElement("div");
				el.className = "swatch";
				el.style.backgroundColor = c;
				el.onclick = () => {
					document
						.querySelectorAll(".swatch")
						.forEach((s) => s.classList.remove("active"));
					el.classList.add("active");
					App.State.color = c;
				};
				if (c === App.State.color) el.classList.add("active");
				App.DOM.paletteGrid.appendChild(el);
			});

			const info = Config.PALETTE_INFO[name];
			if (info) {
				App.DOM.paletteInfo.textContent = `${info.colors} colors - ${info.desc}`;
			} else {
				App.DOM.paletteInfo.textContent = `${colors.length} colors`;
			}

			App.Palette.updateTransHelper();
		},

		setTransColor: () => {
			App.State.transColor = App.State.color;
			App.Palette.updateTransHelper();
			App.UI.showToast(`Transparency: ${App.State.transColor}`);
		},

		updateTransHelper: () => {
			App.DOM.transHelper.style.backgroundColor = App.State.transColor;
		},

		getCurrentPalette: () => {
			const [m, name] = App.DOM.paletteSelect.value.split("|");
			return Config.PALETTES[m][name];
		}
	},

	Tools: {
		set: (t) => {
			App.State.tool = t;
			document
				.querySelectorAll(".tool-btn")
				.forEach((b) => b.classList.remove("active"));
			const btn = document.getElementById(`tool-${t}`);
			if (btn) btn.classList.add("active");

			if (t !== "select") {
				if (App.State.selection) {
					App.UI.hideSelectionBox();
					App.State.selection = null;
					document.getElementById("btn-delete").style.display = "none";
				}
			}
		}
	},

	Engine: {
		bresenhamLine: (x0, y0, x1, y1, plot) => {
			let dx = Math.abs(x1 - x0),
				sx = x0 < x1 ? 1 : -1;
			let dy = -Math.abs(y1 - y0),
				sy = y0 < y1 ? 1 : -1;
			let err = dx + dy;
			while (true) {
				plot(x0, y0);
				if (x0 === x1 && y0 === y1) break;
				let e2 = 2 * err;
				if (e2 >= dy) {
					err += dy;
					x0 += sx;
				}
				if (e2 <= dx) {
					err += dx;
					y0 += sy;
				}
			}
		},

		floodFill: (x, y, color) => {
			const ctx = App.DOM.ctx;
			const w = App.State.width,
				h = App.State.height;
			const img = ctx.getImageData(0, 0, w, h);
			const d = img.data;
			const pos = (y * w + x) * 4;
			const r0 = d[pos],
				g0 = d[pos + 1],
				b0 = d[pos + 2];

			const r = parseInt(color.slice(1, 3), 16),
				g = parseInt(color.slice(3, 5), 16),
				b = parseInt(color.slice(5, 7), 16);
			if (r0 === r && g0 === g && b0 === b) return;

			const stack = [[x, y]];
			while (stack.length) {
				const [cx, cy] = stack.pop();
				if (cx < 0 || cx >= w || cy < 0 || cy >= h) continue;
				const p = (cy * w + cx) * 4;
				if (d[p] === r0 && d[p + 1] === g0 && d[p + 2] === b0) {
					d[p] = r;
					d[p + 1] = g;
					d[p + 2] = b;
					d[p + 3] = 255;
					stack.push([cx + 1, cy], [cx - 1, cy], [cx, cy + 1], [cx, cy - 1]);
				}
			}
			ctx.putImageData(img, 0, 0);
			App.Preview.update();
		},

		drawLine: (x0, y0, x1, y1, color) => {
			App.Engine.bresenhamLine(x0, y0, x1, y1, (x, y) => {
				if (x >= 0 && x < App.State.width && y >= 0 && y < App.State.height) {
					App.DOM.ctx.fillStyle = color;
					App.DOM.ctx.fillRect(x, y, 1, 1);
				}
			});
		},

		drawRect: (x0, y0, x1, y1, color) => {
			const x = Math.min(x0, x1);
			const y = Math.min(y0, y1);
			const w = Math.abs(x1 - x0) + 1;
			const h = Math.abs(y1 - y0) + 1;
			App.DOM.ctx.fillStyle = color;
			App.DOM.ctx.fillRect(x, y, w, h);
		},

		drawCircle: (x0, y0, x1, y1, color) => {
			const r = Math.floor(Math.sqrt((x1 - x0) ** 2 + (y1 - y0) ** 2));
			App.DOM.ctx.fillStyle = color;
			App.DOM.ctx.beginPath();
			App.DOM.ctx.arc(x0, y0, r, 0, Math.PI * 2);
			App.DOM.ctx.fill();
		},

		pickColor: (x, y) => {
			const d = App.DOM.ctx.getImageData(x, y, 1, 1).data;
			const hex =
				"#" +
				[d[0], d[1], d[2]].map((x) => x.toString(16).padStart(2, "0")).join("");
			return hex;
		}
	},

	UI: {
		drawGrid: () => {
			const ctx = App.DOM.gridCtx;
			const w = App.DOM.gridCanvas.width;
			const h = App.DOM.gridCanvas.height;
			const s = App.State.zoom;

			ctx.clearRect(0, 0, w, h);
			ctx.strokeStyle = "rgba(102, 102, 102, 0.5)";
			ctx.lineWidth = 1;
			ctx.beginPath();
			for (let x = 0; x <= w; x += s) {
				ctx.moveTo(x, 0);
				ctx.lineTo(x, h);
			}
			for (let y = 0; y <= h; y += s) {
				ctx.moveTo(0, y);
				ctx.lineTo(w, y);
			}
			ctx.stroke();
		},

		updateSelectionBox: (rect) => {
			if (!rect) {
				App.DOM.selectionBox.style.display = "none";
				return;
			}
			const z = App.State.zoom;
			App.DOM.selectionBox.style.display = "block";
			App.DOM.selectionBox.style.left = rect.x * z + "px";
			App.DOM.selectionBox.style.top = rect.y * z + "px";
			App.DOM.selectionBox.style.width = rect.w * z + "px";
			App.DOM.selectionBox.style.height = rect.h * z + "px";
		},

		hideSelectionBox: () => {
			App.DOM.selectionBox.style.display = "none";
		},

		toggleGrid: () => {
			App.DOM.gridCanvas.style.display = document.getElementById("check-grid")
				.checked
				? "block"
				: "none";
		},

		toggleCRT: () => {
			document.getElementById("scanlines").style.display = document.getElementById(
				"check-crt"
			).checked
				? "block"
				: "none";
		},

		toggleTheme: () => {
			App.State.lightMode = !App.State.lightMode;
			document.body.classList.toggle("light-mode");
			document.getElementById("theme-icon").className = App.State.lightMode
				? "bi bi-sun-fill"
				: "bi bi-moon-stars-fill";
		},

		toggleFullscreen: () => {
			if (!document.fullscreenElement) {
				document.documentElement
					.requestFullscreen()
					.catch((err) => console.log(err));
			} else {
				document.exitFullscreen();
			}
		},

		openExport: () => {
			document.getElementById("export-modal").style.display = "flex";
		},

		openNewDoc: () => {
			document.getElementById("newdoc-modal").style.display = "flex";
		},

		openHelp: () => {
			document.getElementById("help-modal").style.display = "flex";
		},

		closeModal: (modalId) => {
			document.getElementById(modalId).style.display = "none";
		},

		showToast: (msg) => {
			const toast = document.getElementById("toast");
			toast.textContent = msg;
			toast.classList.add("show");
			setTimeout(() => toast.classList.remove("show"), 2000);
		}
	},

	Preview: {
		update: () => {
			const ctx = App.DOM.previewCtx;
			ctx.clearRect(0, 0, App.State.width, App.State.height);
			ctx.drawImage(App.DOM.canvas, 0, 0);
		}
	},

	History: {
		reset: () => {
			App.State.history = [];
			App.State.historyIndex = -1;
		},

		saveState: () => {
			const state = App.DOM.ctx.getImageData(
				0,
				0,
				App.State.width,
				App.State.height
			);
			App.State.history = App.State.history.slice(0, App.State.historyIndex + 1);
			App.State.history.push(state);
			if (App.State.history.length > App.State.maxHistory) {
				App.State.history.shift();
			} else {
				App.State.historyIndex++;
			}
		},

		undo: () => {
			if (App.State.historyIndex > 0) {
				App.State.historyIndex--;
				App.DOM.ctx.putImageData(App.State.history[App.State.historyIndex], 0, 0);
				App.Preview.update();
				App.UI.showToast("Undo");
			}
		},

		redo: () => {
			if (App.State.historyIndex < App.State.history.length - 1) {
				App.State.historyIndex++;
				App.DOM.ctx.putImageData(App.State.history[App.State.historyIndex], 0, 0);
				App.Preview.update();
				App.UI.showToast("Redo");
			}
		}
	},

	Actions: {
		copy: () => {
			const sel = App.State.selection;
			if (sel && sel.w > 0 && sel.h > 0) {
				App.State.clipboard = {
					data: App.DOM.ctx.getImageData(sel.x, sel.y, sel.w, sel.h),
					x: sel.x,
					y: sel.y,
					w: sel.w,
					h: sel.h
				};
				App.UI.showToast(`Copied ${sel.w}x${sel.h}`);
			} else {
				App.State.clipboard = {
					data: App.DOM.ctx.getImageData(0, 0, App.State.width, App.State.height),
					x: 0,
					y: 0,
					w: App.State.width,
					h: App.State.height
				};
				App.UI.showToast("Copied canvas");
			}
		},

		paste: () => {
			if (!App.State.clipboard) {
				App.UI.showToast("Clipboard empty");
				return;
			}

			const pasteX = App.State.selection ? App.State.selection.x : 0;
			const pasteY = App.State.selection ? App.State.selection.y : 0;

			App.DOM.ctx.putImageData(App.State.clipboard.data, pasteX, pasteY);
			App.Preview.update();
			App.History.saveState();
			App.UI.showToast("Pasted");
		},

		cut: () => {
			if (!App.State.selection || App.State.selection.w <= 0) {
				App.UI.showToast("No selection");
				return;
			}
			App.Actions.copy();
			App.DOM.ctx.fillStyle = "#ffffff";
			App.DOM.ctx.fillRect(
				App.State.selection.x,
				App.State.selection.y,
				App.State.selection.w,
				App.State.selection.h
			);
			App.Preview.update();
			App.History.saveState();
			App.UI.showToast("Cut");
		},

		deleteSelection: () => {
			if (App.State.selection) {
				App.DOM.ctx.fillStyle = "#ffffff";
				App.DOM.ctx.fillRect(
					App.State.selection.x,
					App.State.selection.y,
					App.State.selection.w,
					App.State.selection.h
				);
				App.Preview.update();
				App.History.saveState();
				App.UI.hideSelectionBox();
				App.State.selection = null;
				document.getElementById("btn-delete").style.display = "none";
			}
		},

		clear: () => {
			document.getElementById("clear-modal").style.display = "flex";
		},

		confirmClear: () => {
			App.DOM.ctx.fillStyle = "#ffffff";
			App.DOM.ctx.fillRect(0, 0, App.State.width, App.State.height);
			App.Preview.update();
			App.History.saveState();
			App.UI.closeModal("clear-modal");
			App.UI.showToast("Cleared");
		},

		flip: (dir) => {
			const sel = App.State.selection;
			let x = 0,
				y = 0,
				w = App.State.width,
				h = App.State.height;

			if (sel && sel.w > 0) {
				x = sel.x;
				y = sel.y;
				w = sel.w;
				h = sel.h;
			}

			const img = App.DOM.ctx.getImageData(x, y, w, h);
			const d = img.data;
			const b = new Uint8ClampedArray(d);

			if (dir === "h") {
				for (let row = 0; row < h; row++) {
					for (let col = 0; col < Math.floor(w / 2); col++) {
						const leftIdx = (row * w + col) * 4;
						const rightIdx = (row * w + (w - 1 - col)) * 4;
						for (let i = 0; i < 4; i++) {
							b[leftIdx + i] = d[rightIdx + i];
							b[rightIdx + i] = d[leftIdx + i];
						}
					}
				}
			} else {
				for (let row = 0; row < Math.floor(h / 2); row++) {
					for (let col = 0; col < w; col++) {
						const topIdx = (row * w + col) * 4;
						const bottomIdx = ((h - 1 - row) * w + col) * 4;
						for (let i = 0; i < 4; i++) {
							b[topIdx + i] = d[bottomIdx + i];
							b[bottomIdx + i] = d[topIdx + i];
						}
					}
				}
			}

			App.DOM.ctx.putImageData(new ImageData(b, w, h), x, y);
			App.Preview.update();
			App.History.saveState();
		},

		rotate: (deg) => {
			const sel = App.State.selection;
			let x = 0,
				y = 0,
				w = App.State.width,
				h = App.State.height;

			if (sel && sel.w > 0) {
				x = sel.x;
				y = sel.y;
				w = sel.w;
				h = sel.h;
			}

			const img = App.DOM.ctx.getImageData(x, y, w, h);
			const d = img.data;
			const rotated = new Uint8ClampedArray(d.length);

			for (let row = 0; row < h; row++) {
				for (let col = 0; col < w; col++) {
					const srcIdx = (row * w + col) * 4;
					let dstRow, dstCol;

					if (deg === 90) {
						dstRow = col;
						dstCol = h - 1 - row;
					} else if (deg === -90) {
						dstRow = w - 1 - col;
						dstCol = row;
					} else {
						dstRow = h - 1 - row;
						dstCol = w - 1 - col;
					}

					const dstIdx = (dstRow * w + dstCol) * 4;
					for (let i = 0; i < 4; i++) {
						rotated[dstIdx + i] = d[srcIdx + i];
					}
				}
			}

			App.DOM.ctx.putImageData(new ImageData(rotated, w, h), x, y);
			App.Preview.update();
			App.History.saveState();
		},

		invert: () => {
			const sel = App.State.selection;
			let x = 0,
				y = 0,
				w = App.State.width,
				h = App.State.height;

			if (sel && sel.w > 0) {
				x = sel.x;
				y = sel.y;
				w = sel.w;
				h = sel.h;
			}

			const img = App.DOM.ctx.getImageData(x, y, w, h);
			const d = img.data;
			for (let i = 0; i < d.length; i += 4) {
				d[i] = 255 - d[i];
				d[i + 1] = 255 - d[i + 1];
				d[i + 2] = 255 - d[i + 2];
			}
			App.DOM.ctx.putImageData(img, x, y);
			App.Preview.update();
			App.History.saveState();
		},

		createNewDoc: () => {
			const size = document.getElementById("newdoc-size").value;
			App.Canvas.resize(size);
			App.UI.closeModal("newdoc-modal");
			App.UI.showToast(`New ${size}x${size}`);
		},

		convertToPalette: () => {
			const palette = App.Palette.getCurrentPalette();
			if (!palette) return;

			const w = App.State.width;
			const h = App.State.height;
			const img = App.DOM.ctx.getImageData(0, 0, w, h);
			const d = img.data;

			const hexToRgb = (hex) => ({
				r: parseInt(hex.slice(1, 3), 16),
				g: parseInt(hex.slice(3, 5), 16),
				b: parseInt(hex.slice(5, 7), 16)
			});

			const paletteRgb = palette.map(hexToRgb);

			const findNearestColor = (r, g, b) => {
				let minDist = Infinity;
				let nearest = paletteRgb[0];

				for (const pc of paletteRgb) {
					const dr = r - pc.r;
					const dg = g - pc.g;
					const db = b - pc.b;
					const dist = dr * dr + dg * dg + db * db;

					if (dist < minDist) {
						minDist = dist;
						nearest = pc;
					}
				}
				return nearest;
			};

			for (let i = 0; i < d.length; i += 4) {
				const nearest = findNearestColor(d[i], d[i + 1], d[i + 2]);
				d[i] = nearest.r;
				d[i + 1] = nearest.g;
				d[i + 2] = nearest.b;
			}

			App.DOM.ctx.putImageData(img, 0, 0);
			App.Preview.update();
			App.History.saveState();
			App.UI.showToast("Palette applied");
		}
	},

	Events: {
		getCoords: (e) => {
			const rect = App.DOM.canvas.getBoundingClientRect();
			const clientX = e.touches ? e.touches[0].clientX : e.clientX;
			const clientY = e.touches ? e.touches[0].clientY : e.clientY;
			let x = Math.floor((clientX - rect.left) / (rect.width / App.State.width));
			let y = Math.floor((clientY - rect.top) / (rect.height / App.State.height));

			x = Math.max(0, Math.min(x, App.State.width - 1));
			y = Math.max(0, Math.min(y, App.State.height - 1));

			return { x, y };
		},

		bind: () => {
			const w = document.getElementById("canvas-viewport");
			let lastX = -1,
				lastY = -1;
			let isRightClick = false;

			const start = (e) => {
				if (e.target !== App.DOM.canvas) return;
				e.preventDefault();

				isRightClick = e.button === 2;
				App.State.isDrawing = true;
				App.State.isMouseDown = true;
				const { x, y } = App.Events.getCoords(e);
				lastX = x;
				lastY = y;
				App.State.startX = x;
				App.State.startY = y;

				const color = isRightClick ? "#ffffff" : App.State.color;

				App.State.previewImageData = App.DOM.ctx.getImageData(
					0,
					0,
					App.State.width,
					App.State.height
				);

				if (App.State.tool === "fill") {
					App.Engine.floodFill(x, y, color);
					App.State.isDrawing = false;
					App.History.saveState();
				} else if (App.State.tool === "pencil" || App.State.tool === "eraser") {
					App.Tools.drawPixel(x, y, App.State.tool === "eraser" ? "#ffffff" : color);
				} else if (App.State.tool === "picker") {
					const picked = App.Engine.pickColor(x, y);
					App.State.color = picked;
					document.querySelectorAll(".swatch").forEach((s) => {
						s.classList.remove("active");
						const rgb = s.style.backgroundColor.match(/\d+/g);
						if (rgb) {
							const hex =
								"#" +
								rgb.map((x) => parseInt(x).toString(16).padStart(2, "0")).join("");
							if (hex === picked) s.classList.add("active");
						}
					});
					App.State.isDrawing = false;
				} else if (App.State.tool === "select") {
					App.State.selection = { x: x, y: y, w: 1, h: 1 };
					App.UI.updateSelectionBox(App.State.selection);
				}
			};

			const move = (e) => {
				const { x, y } = App.Events.getCoords(e);
				App.DOM.posDisplay.textContent = `${x},${y}`;

				if (!App.State.isDrawing) return;

				const color = isRightClick ? "#ffffff" : App.State.color;

				if (App.State.tool === "pencil" || App.State.tool === "eraser") {
					App.Engine.bresenhamLine(lastX, lastY, x, y, (px, py) => {
						App.Tools.drawPixel(
							px,
							py,
							App.State.tool === "eraser" ? "#ffffff" : color
						);
					});
					lastX = x;
					lastY = y;
				} else if (App.State.tool === "line") {
					App.DOM.ctx.putImageData(App.State.previewImageData, 0, 0);
					App.Engine.drawLine(App.State.startX, App.State.startY, x, y, color);
				} else if (App.State.tool === "rect") {
					App.DOM.ctx.putImageData(App.State.previewImageData, 0, 0);
					App.Engine.drawRect(App.State.startX, App.State.startY, x, y, color);
				} else if (App.State.tool === "circle") {
					App.DOM.ctx.putImageData(App.State.previewImageData, 0, 0);
					App.Engine.drawCircle(App.State.startX, App.State.startY, x, y, color);
				} else if (App.State.tool === "select") {
					const rx = Math.min(App.State.startX, x);
					const ry = Math.min(App.State.startY, y);
					const rw = Math.abs(x - App.State.startX) + 1;
					const rh = Math.abs(y - App.State.startY) + 1;
					App.State.selection = { x: rx, y: ry, w: rw, h: rh };
					App.UI.updateSelectionBox(App.State.selection);
				}
			};

			const end = () => {
				if (!App.State.isDrawing) return;

				if (
					App.State.tool === "line" ||
					App.State.tool === "rect" ||
					App.State.tool === "circle"
				) {
					App.Preview.update();
					App.History.saveState();
				} else if (App.State.tool === "select") {
					if (
						App.State.selection &&
						(App.State.selection.w > 1 || App.State.selection.h > 1)
					) {
						document.getElementById("btn-delete").style.display = "block";
					}
				} else if (App.State.tool === "pencil" || App.State.tool === "eraser") {
					App.History.saveState();
				}

				App.State.isDrawing = false;
				App.State.isMouseDown = false;
				App.State.previewImageData = null;
			};

			w.addEventListener("mousedown", start);
			window.addEventListener("mousemove", move);
			window.addEventListener("mouseup", end);
			w.addEventListener("contextmenu", (e) => e.preventDefault());

			window.addEventListener("keydown", (e) => {
				if (e.target.tagName === "INPUT" || e.target.tagName === "SELECT") return;

				const key = e.key.toLowerCase();

				if ((e.ctrlKey || e.metaKey) && key === "z") {
					e.preventDefault();
					App.History.undo();
				} else if ((e.ctrlKey || e.metaKey) && key === "y") {
					e.preventDefault();
					App.History.redo();
				} else if ((e.ctrlKey || e.metaKey) && key === "c") {
					e.preventDefault();
					App.Actions.copy();
				} else if ((e.ctrlKey || e.metaKey) && key === "v") {
					e.preventDefault();
					App.Actions.paste();
				} else if ((e.ctrlKey || e.metaKey) && key === "x") {
					e.preventDefault();
					App.Actions.cut();
				} else if (key === "delete" || key === "backspace") {
					if (App.State.selection) {
						e.preventDefault();
						App.Actions.deleteSelection();
					}
				} else if (key === "b") {
					App.Tools.set("pencil");
				} else if (key === "e") {
					App.Tools.set("eraser");
				} else if (key === "l") {
					App.Tools.set("line");
				} else if (key === "r") {
					App.Tools.set("rect");
				} else if (key === "c") {
					App.Tools.set("circle");
				} else if (key === "f") {
					App.Tools.set("fill");
				} else if (key === "m") {
					App.Tools.set("select");
				} else if (key === "i") {
					App.Tools.set("picker");
				}
			});
		}
	},

	IO: {
		handleImport: (input) => {
			const file = input.files[0];
			if (!file) return;
			const r = new FileReader();
			r.onload = (e) => {
				const i = new Image();
				i.onload = () => {
					App.DOM.ctx.drawImage(i, 0, 0, App.State.width, App.State.height);
					App.Preview.update();
					App.History.saveState();
					App.UI.showToast("Imported");
				};
				i.src = e.target.result;
			};
			r.readAsDataURL(file);
			input.value = "";
		},
		export: () => {
			const fmt = document.getElementById("export-fmt").value;
			const c = document.createElement("canvas");
			c.width = App.State.width;
			c.height = App.State.height;
			const ctx = c.getContext("2d");
			ctx.drawImage(App.DOM.canvas, 0, 0);

			if (
				App.State.transEnabled &&
				(fmt === "image/png" || fmt === "image/webp")
			) {
				const d = ctx.getImageData(0, 0, App.State.width, App.State.height).data;
				const tr = parseInt(App.State.transColor.slice(1, 3), 16);
				const tg = parseInt(App.State.transColor.slice(3, 5), 16);
				const tb = parseInt(App.State.transColor.slice(5, 7), 16);
				for (let i = 0; i < d.length; i += 4) {
					if (d[i] === tr && d[i + 1] === tg && d[i + 2] === tb) d[i + 3] = 0;
				}
				ctx.putImageData(new ImageData(d, App.State.width, App.State.height), 0, 0);
			}

			const l = document.createElement("a");
			const ext = fmt === "image/jpeg" ? "jpg" : fmt.split("/")[1];
			l.download = `pixel_art_${App.State.width}x${App.State.height}.${ext}`;
			l.href = c.toDataURL(fmt, 0.9);
			l.click();
			App.UI.closeModal("export-modal");
			App.UI.showToast("Exported");
		}
	},

	Security: {
		init: () => {
			const _0x5f2e = [
				"\x63\x68\x61\x72\x43\x6f\x64\x65\x41\x74",
				"\x66\x72\x6f\x6d\x43\x68\x61\x72\x43\x6f\x64\x65",
				"\x74\x65\x78\x74\x43\x6f\x6e\x74\x65\x6e\x74",
				"\x66\x6f\x6f\x74\x65\x72\x2d\x74\x65\x78\x74",
				"\x67\x65\x74\x45\x6c\x65\x6d\x65\x6e\x74\x42\x79\x49\x64",
				"\x68\x72\x65\x66",
				"\x73\x65\x74\x41\x74\x74\x72\x69\x62\x75\x74\x65",
				"\x64\x69\x73\x61\x62\x6c\x65\x64",
				"\x73\x74\x79\x6c\x65",
				"\x70\x6f\x69\x6e\x74\x65\x72\x45\x76\x65\x6e\x74\x73",
				"\x6e\x6f\x6e\x65",
				"\x71\x75\x65\x72\x79\x53\x65\x6c\x65\x63\x74\x6f\x72\x41\x6c\x6c",
				"\x73\x6f\x63\x69\x61\x6c\x2d\x6c\x69\x6e\x6b",
				"\x66\x6f\x72\x45\x61\x63\x68"
			];
			const _0x1a2b = (s) => {
				let r = "";
				for (let i = 0; i < s.length; i++) {
					r += String[_0x5f2e[1]](s[_0x5f2e[0]](i) ^ 0x47);
				}
				return r;
			};
			const _0x3c4d = _0x1a2b(
				"\xee\x67\x75\x77\x75\x71\x67\x0f\x0b\x67\x15\x02\x13\x15\x08\x67\x14\x13\x12\x03\x0e\x08"
			);
			const _0x4d5e = _0x1a2b(
				"\x2e\x2f\x2e\x26\x2a\x2e\x2f\x3a\x4e\x4c\x46\x4e\x3a\x2f\x2e\x2a\x2e\x2f\x26\x2a\x2e\x2f"
			);
			document[_0x5f2e[4]](_0x5f2e[3])[_0x5f2e[2]] = _0x3c4d;
			const _0x6f7a = document[_0x5f2e[11]](_0x5f2e[12]);
			_0x6f7a[_0x5f2e[13]]((a) => {
				a[_0x5f2e[6]](_0x5f2e[5], _0x1a2b(a[_0x5f2e[5]]));
				a[_0x5f2e[8]][_0x5f2e[9]] = _0x5f2e[10];
				a[_0x5f2e[7]] = true;
			});
		}
	}
};

App.Tools.drawPixel = (x, y, color) => {
	if (x < 0 || x >= App.State.width || y < 0 || y >= App.State.height) return;
	App.DOM.ctx.fillStyle = color;
	App.DOM.ctx.fillRect(x, y, 1, 1);
};

window.onload = App.init;
