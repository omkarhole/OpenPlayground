<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>World Facts Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --science: #1abc9c;
            --history: #e74c3c;
            --space: #9b59b6;
            --geography: #f39c12;
            --nature: #27ae60;
            --culture: #8e44ad;
            --light: #ecf0f1;
            --dark: #2c3e50;
            --gray: #95a5a6;
            --background: #f9f9f9;
            --card-bg: #ffffff;
            --shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
        }
        
        body {
            background-color: var(--background);
            color: var(--dark);
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(44, 62, 80, 0.1);
        }
        
        h1 {
            color: var(--primary);
            margin-bottom: 10px;
            font-size: 3rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        .subtitle {
            color: var(--gray);
            font-size: 1.2rem;
            max-width: 800px;
            margin: 0 auto 20px;
        }
        
        .dashboard-container {
            display: grid;
            grid-template-columns: 1fr 3fr;
            gap: 30px;
        }
        
        @media (max-width: 1100px) {
            .dashboard-container {
                grid-template-columns: 1fr;
            }
        }
        
        .sidebar {
            background-color: var(--card-bg);
            border-radius: 15px;
            padding: 25px;
            box-shadow: var(--shadow);
            height: fit-content;
            position: sticky;
            top: 20px;
        }
        
        .main-content {
            background-color: var(--card-bg);
            border-radius: 15px;
            padding: 30px;
            box-shadow: var(--shadow);
        }
        
        .category-list {
            list-style: none;
            margin-top: 20px;
        }
        
        .category-item {
            padding: 16px 20px;
            margin-bottom: 12px;
            background-color: #f8f9fa;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 5px solid transparent;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .category-item:hover {
            transform: translateX(5px);
            background-color: #f0f7ff;
        }
        
        .category-item.active {
            background-color: #e8f4ff;
            border-left: 5px solid var(--secondary);
            font-weight: 600;
        }
        
        .category-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
        }
        
        .science-bg {
            background-color: var(--science);
        }
        
        .history-bg {
            background-color: var(--history);
        }
        
        .space-bg {
            background-color: var(--space);
        }
        
        .geography-bg {
            background-color: var(--geography);
        }
        
        .nature-bg {
            background-color: var(--nature);
        }
        
        .culture-bg {
            background-color: var(--culture);
        }
        
        .category-name {
            flex-grow: 1;
            margin-left: 15px;
            font-size: 1.1rem;
        }
        
        .fact-count {
            background-color: var(--light);
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--dark);
        }
        
        .stats-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 40px;
        }
        
        @media (max-width: 768px) {
            .stats-container {
                grid-template-columns: 1fr;
            }
        }
        
        .stat-box {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 25px;
            text-align: center;
            box-shadow: var(--shadow);
            border-top: 5px solid var(--secondary);
            transition: transform 0.3s ease;
        }
        
        .stat-box:hover {
            transform: translateY(-5px);
        }
        
        .stat-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--secondary);
            margin-bottom: 10px;
        }
        
        .stat-label {
            color: var(--gray);
            font-size: 1rem;
        }
        
        .fact-display-area {
            text-align: center;
            padding: 20px 0;
        }
        
        .fact-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }
        
        .current-category {
            font-size: 1.8rem;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .fact-card {
            background-color: #f8f9fa;
            border-radius: 15px;
            padding: 40px;
            margin-bottom: 30px;
            position: relative;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            border-left: 8px solid var(--secondary);
            min-height: 300px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .fact-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        
        .fact-content {
            font-size: 1.8rem;
            line-height: 1.8;
            color: var(--dark);
            margin-bottom: 20px;
            font-weight: 500;
        }
        
        .fact-category-tag {
            display: inline-block;
            padding: 8px 20px;
            border-radius: 30px;
            color: white;
            font-weight: 600;
            font-size: 0.9rem;
            margin-top: 15px;
        }
        
        .fact-source {
            color: var(--gray);
            font-size: 0.9rem;
            margin-top: 20px;
            font-style: italic;
        }
        
        .control-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
        }
        
        .btn {
            padding: 16px 32px;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
        }
        
        .btn-primary {
            background-color: var(--secondary);
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #2980b9;
            transform: translateY(-3px);
            box-shadow: 0 7px 14px rgba(52, 152, 219, 0.3);
        }
        
        .btn-outline {
            background-color: transparent;
            color: var(--secondary);
            border: 2px solid var(--secondary);
        }
        
        .btn-outline:hover {
            background-color: rgba(52, 152, 219, 0.1);
            transform: translateY(-3px);
        }
        
        .btn-favorite {
            background-color: transparent;
            color: var(--gray);
            border: 2px solid var(--gray);
        }
        
        .btn-favorite:hover {
            background-color: rgba(231, 76, 60, 0.1);
            color: var(--history);
            border-color: var(--history);
        }
        
        .btn-favorite.active {
            background-color: rgba(231, 76, 60, 0.1);
            color: var(--history);
            border-color: var(--history);
        }
        
        .facts-history {
            margin-top: 50px;
        }
        
        .facts-history h3 {
            color: var(--primary);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(44, 62, 80, 0.1);
        }
        
        .history-list {
            list-style: none;
            max-height: 300px;
            overflow-y: auto;
            padding-right: 10px;
        }
        
        .history-item {
            padding: 15px;
            margin-bottom: 12px;
            background-color: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid var(--secondary);
            transition: all 0.3s ease;
        }
        
        .history-item:hover {
            background-color: #f0f7ff;
            transform: translateX(5px);
        }
        
        .history-fact {
            margin-bottom: 8px;
            font-size: 1rem;
        }
        
        .history-category {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            color: white;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--gray);
        }
        
        .empty-state i {
            font-size: 4rem;
            margin-bottom: 20px;
            color: var(--light);
        }
        
        .category-color {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 8px;
        }
        
        .favorites-count {
            color: var(--history);
            font-weight: 600;
        }
        
        .search-container {
            margin-bottom: 30px;
        }
        
        .search-box {
            width: 100%;
            padding: 16px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        .search-box:focus {
            outline: none;
            border-color: var(--secondary);
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
        }
        
        .loading {
            display: inline-block;
            width: 50px;
            height: 50px;
            border: 5px solid rgba(52, 152, 219, 0.3);
            border-radius: 50%;
            border-top-color: var(--secondary);
            animation: spin 1s ease-in-out infinite;
            margin: 50px auto;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .fact-id {
            position: absolute;
            top: 15px;
            right: 20px;
            color: var(--gray);
            font-size: 0.9rem;
            font-weight: 600;
        }
        
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--secondary);
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #2980b9;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-globe-americas"></i> World Facts Dashboard</h1>
            <p class="subtitle">Discover fascinating facts about science, history, space, geography, nature, and culture from around the world. Expand your knowledge one fact at a time!</p>
        </header>
        
        <div class="dashboard-container">
            <div class="sidebar">
                <h3>Fact Categories</h3>
                <div class="search-container">
                    <input type="text" class="search-box" id="search-box" placeholder="Search facts...">
                </div>
                <ul class="category-list">
                    <li class="category-item active" data-category="all">
                        <div class="category-icon" style="background-color: var(--secondary);">
                            <i class="fas fa-star"></i>
                        </div>
                        <div class="category-name">All Facts</div>
                        <div class="fact-count" id="all-count">150</div>
                    </li>
                    <li class="category-item" data-category="science">
                        <div class="category-icon science-bg">
                            <i class="fas fa-flask"></i>
                        </div>
                        <div class="category-name">Science</div>
                        <div class="fact-count" id="science-count">25</div>
                    </li>
                    <li class="category-item" data-category="history">
                        <div class="category-icon history-bg">
                            <i class="fas fa-landmark"></i>
                        </div>
                        <div class="category-name">History</div>
                        <div class="fact-count" id="history-count">28</div>
                    </li>
                    <li class="category-item" data-category="space">
                        <div class="category-icon space-bg">
                            <i class="fas fa-rocket"></i>
                        </div>
                        <div class="category-name">Space</div>
                        <div class="fact-count" id="space-count">22</div>
                    </li>
                    <li class="category-item" data-category="geography">
                        <div class="category-icon geography-bg">
                            <i class="fas fa-globe-asia"></i>
                        </div>
                        <div class="category-name">Geography</div>
                        <div class="fact-count" id="geography-count">30</div>
                    </li>
                    <li class="category-item" data-category="nature">
                        <div class="category-icon nature-bg">
                            <i class="fas fa-leaf"></i>
                        </div>
                        <div class="category-name">Nature</div>
                        <div class="fact-count" id="nature-count">25</div>
                    </li>
                    <li class="category-item" data-category="culture">
                        <div class="category-icon culture-bg">
                            <i class="fas fa-theater-masks"></i>
                        </div>
                        <div class="category-name">Culture</div>
                        <div class="fact-count" id="culture-count">20</div>
                    </li>
                </ul>
                
                <div style="margin-top: 40px;">
                    <h3>Category Colors</h3>
                    <div style="margin-top: 15px; font-size: 0.9rem;">
                        <div style="display: flex; align-items: center; margin-bottom: 10px;">
                            <span class="category-color" style="background-color: var(--science);"></span>
                            <span>Science</span>
                        </div>
                        <div style="display: flex; align-items: center; margin-bottom: 10px;">
                            <span class="category-color" style="background-color: var(--history);"></span>
                            <span>History</span>
                        </div>
                        <div style="display: flex; align-items: center; margin-bottom: 10px;">
                            <span class="category-color" style="background-color: var(--space);"></span>
                            <span>Space</span>
                        </div>
                        <div style="display: flex; align-items: center; margin-bottom: 10px;">
                            <span class="category-color" style="background-color: var(--geography);"></span>
                            <span>Geography</span>
                        </div>
                        <div style="display: flex; align-items: center; margin-bottom: 10px;">
                            <span class="category-color" style="background-color: var(--nature);"></span>
                            <span>Nature</span>
                        </div>
                        <div style="display: flex; align-items: center;">
                            <span class="category-color" style="background-color: var(--culture);"></span>
                            <span>Culture</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="main-content">
                <div class="stats-container">
                    <div class="stat-box">
                        <div class="stat-value" id="total-facts">150</div>
                        <div class="stat-label">Total Facts in Database</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value" id="facts-viewed">0</div>
                        <div class="stat-label">Facts Viewed</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value favorites-count" id="favorites-count">0</div>
                        <div class="stat-label">Favorite Facts</div>
                    </div>
                </div>
                
                <div class="fact-display-area">
                    <div class="fact-header">
                        <div class="current-category">
                            <i class="fas fa-star"></i>
                            <span id="current-category-name">All Facts</span>
                        </div>
                        <div style="color: var(--gray); font-size: 0.9rem;">
                            Fact <span id="current-fact-index">1</span> of <span id="total-category-facts">150</span>
                        </div>
                    </div>
                    
                    <div class="fact-card" id="fact-card">
                        <div class="fact-id">#<span id="fact-id">001</span></div>
                        <div class="fact-content" id="fact-content">
                            The world's oldest known living tree is a bristlecone pine named Methuselah, located in California's White Mountains. It's estimated to be over 4,800 years old.
                        </div>
                        <div>
                            <span class="fact-category-tag" id="fact-category-tag" style="background-color: var(--nature);">Nature</span>
                        </div>
                        <div class="fact-source" id="fact-source">
                            Source: National Geographic
                        </div>
                    </div>
                    
                    <div class="control-buttons">
                        <button class="btn btn-outline" id="prev-fact">
                            <i class="fas fa-arrow-left"></i> Previous Fact
                        </button>
                        <button class="btn btn-primary" id="random-fact">
                            <i class="fas fa-random"></i> Random Fact
                        </button>
                        <button class="btn btn-favorite" id="favorite-btn">
                            <i class="far fa-heart"></i> Add to Favorites
                        </button>
                        <button class="btn btn-outline" id="next-fact">
                            Next Fact <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>
                
                <div class="facts-history">
                    <h3>Recently Viewed Facts</h3>
                    <ul class="history-list" id="history-list">
                        <!-- History items will be added here by JavaScript -->
                        <li class="empty-state">
                            <i class="fas fa-history"></i>
                            <p>Your fact history will appear here</p>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        // World Facts Database
        const worldFacts = {
            science: [
                { id: 101, fact: "A single bolt of lightning contains enough energy to toast 100,000 slices of bread.", source: "NASA" },
                { id: 102, fact: "The human nose can detect over 1 trillion different scents.", source: "Science Magazine" },
                { id: 103, fact: "Bananas are naturally radioactive due to their potassium content, but you'd need to eat 10 million bananas at once to die of radiation poisoning.", source: "University of Cambridge" },
                { id: 104, fact: "A day on Venus is longer than a year on Venus. It takes 243 Earth days to rotate once on its axis, but only 225 Earth days to orbit the Sun.", source: "NASA" },
                { id: 105, fact: "Octopuses have three hearts, nine brains, and blue blood. Two hearts pump blood to the gills, while the third pumps it to the rest of the body.", source: "National Geographic" },
                { id: 106, fact: "Water can boil and freeze at the same time under the right conditions, a phenomenon known as the 'triple point'.", source: "Scientific American" },
                { id: 107, fact: "Honey never spoils. Archaeologists have found pots of honey in ancient Egyptian tombs that are over 3,000 years old and still perfectly edible.", source: "Smithsonian Magazine" },
                { id: 108, fact: "The Eiffel Tower can be 15 cm taller during the summer due to thermal expansion of the iron on hot days.", source: "Official Eiffel Tower Website" },
                { id: 109, fact: "There are more atoms in a single glass of water than there are glasses of water in all the oceans on Earth.", source: "University of California" },
                { id: 110, fact: "A neutron star is so dense that a teaspoon of its material would weigh about 10 million tons on Earth.", source: "NASA" }
            ],
            history: [
                { id: 201, fact: "Cleopatra lived closer in time to the Moon landing than to the construction of the Great Pyramid of Giza.", source: "Historical Records" },
                { id: 202, fact: "The shortest war in history was between Britain and Zanzibar on August 27, 1896. Zanzibar surrendered after 38 minutes.", source: "Guinness World Records" },
                { id: 203, fact: "In Ancient Rome, people used urine as a mouthwash. The ammonia in urine acted as a cleansing agent.", source: "Roman History Texts" },
                { id: 204, fact: "The Great Wall of China is not visible from space with the naked eye, contrary to popular belief.", source: "NASA" },
                { id: 205, fact: "Vikings navigated using sunstones (calcite crystals) that could locate the sun even on cloudy days.", source: "Archaeological Studies" },
                { id: 206, fact: "The Titanic's chief baker survived the sinking by drinking copious amounts of alcohol, which insulated him from the freezing water.", source: "Titanic Survivor Accounts" },
                { id: 207, fact: "In 1923, jockey Frank Hayes won a horse race at Belmont Park in New York despite having died of a heart attack mid-race.", source: "New York Times Archives" },
                { id: 208, fact: "Albert Einstein was offered the presidency of Israel in 1952 but declined, saying he lacked the necessary people skills.", source: "Einstein Archives" },
                { id: 209, fact: "The Library of Alexandria wasn't destroyed in a single fire but gradually declined over several centuries.", source: "Historical Research" },
                { id: 210, fact: "Napoleon was once attacked by a horde of rabbits while hunting. His servants had released tame rabbits, which swarmed him thinking he had food.", source: "French Historical Accounts" }
            ],
            space: [
                { id: 301, fact: "There is a planet made of diamonds called 55 Cancri e that's twice the size of Earth and about 40 light-years away.", source: "Yale University Research" },
                { id: 302, fact: "One day on Mercury is equivalent to 59 Earth days, while one year is only 88 Earth days.", source: "NASA" },
                { id: 303, fact: "If two pieces of the same type of metal touch in space, they will permanently bond together in a process called cold welding.", source: "European Space Agency" },
                { id: 304, fact: "The footprints on the Moon will stay there for at least 100 million years since there's no wind or water to erode them.", source: "NASA" },
                { id: 305, fact: "The largest known star, UY Scuti, is so big that if it replaced our Sun, it would extend beyond the orbit of Jupiter.", source: "Astronomy & Astrophysics Journal" },
                { id: 306, fact: "Space is completely silent because there's no air to carry sound waves.", source: "NASA" },
                { id: 307, fact: "A teaspoon of a neutron star would weigh about 10 million tons, roughly the same as Mount Everest.", source: "Harvard-Smithsonian Center for Astrophysics" },
                { id: 308, fact: "The Sun makes up 99.86% of the mass of our entire solar system.", source: "NASA Solar System Fact Sheet" },
                { id: 309, fact: "Venus is the only planet in our solar system that rotates clockwise. All others rotate counter-clockwise.", source: "NASA Venus Fact Sheet" },
                { id: 310, fact: "There are more stars in the universe than grains of sand on all the beaches on Earth.", source: "Hubble Space Telescope Institute" }
            ],
            geography: [
                { id: 401, fact: "Canada has more lakes than the rest of the world's lakes combined.", source: "World Resources Institute" },
                { id: 402, fact: "The driest place on Earth is the Atacama Desert in Chile, where some areas haven't seen rain in over 400 years.", source: "NASA Earth Observatory" },
                { id: 403, fact: "Russia spans 11 time zones, the most of any country in the world.", source: "Russian Geographical Society" },
                { id: 404, fact: "Istanbul is the only city in the world located on two continents: Europe and Asia.", source: "National Geographic" },
                { id: 405, fact: "The African country of Lesotho is the only independent state in the world that lies entirely above 1,000 meters (3,281 ft) in elevation.", source: "UNESCO" },
                { id: 406, fact: "The Pacific Ocean is so large that it could fit all of Earth's landmasses inside it and still have room for another Africa.", source: "NOAA" },
                { id: 407, fact: "Mount Everest grows about 4 mm higher every year due to tectonic plate movement.", source: "National Geographic Society" },
                { id: 408, fact: "The Amazon Rainforest produces 20% of the world's oxygen.", source: "World Wildlife Fund" },
                { id: 409, fact: "There are no deserts in Europe. It's the only continent without one.", source: "European Environment Agency" },
                { id: 410, fact: "Alaska is the westernmost, easternmost, and northernmost state in the U.S. due to the Aleutian Islands crossing the 180th meridian.", source: "U.S. Geological Survey" }
            ],
            nature: [
                { id: 501, fact: "A blue whale's heart is so large that a human could swim through its arteries.", source: "National Geographic" },
                { id: 502, fact: "Octopuses have blue blood, three hearts, and can change color and texture to blend into their surroundings in milliseconds.", source: "Marine Biological Laboratory" },
                { id: 503, fact: "The world's oldest known living tree is a bristlecone pine named Methuselah, located in California's White Mountains. It's estimated to be over 4,800 years old.", source: "National Geographic" },
                { id: 504, fact: "A single strand of spider silk is stronger than a steel wire of the same thickness.", source: "University of Oxford" },
                { id: 505, fact: "Crows are so intelligent that they can recognize human faces and hold grudges against people who have treated them poorly.", source: "University of Washington" },
                { id: 506, fact: "The immortal jellyfish (Turritopsis dohrnii) can revert back to its juvenile polyp stage after reaching maturity, essentially making it biologically immortal.", source: "Marine Biology Journal" },
                { id: 507, fact: "Some species of bamboo can grow up to 91 cm (36 inches) in just 24 hours.", source: "Kew Royal Botanic Gardens" },
                { id: 508, fact: "A group of flamingos is called a 'flamboyance'.", source: "Oxford English Dictionary" },
                { id: 509, fact: "The smell of freshly cut grass is actually a plant distress call, releasing chemicals to warn nearby plants and attract beneficial insects.", source: "Scientific Reports Journal" },
                { id: 510, fact: "The pistol shrimp can create a bubble that reaches temperatures of 4,400°C (7,952°F) - hotter than the surface of the Sun - when it snaps its claw.", source: "Nature Journal" }
            ],
            culture: [
                { id: 601, fact: "In Japan, there are more than 20 different ways to say 'sorry', each with a different level of formality and context.", source: "Japanese Language Institute" },
                { id: 602, fact: "The national anthem of Greece has 158 verses, but only the first two are commonly sung.", source: "Greek Ministry of Culture" },
                { id: 603, fact: "In Denmark, it's traditional to throw cinnamon on people who are still single when they turn 25.", source: "Danish Cultural Institute" },
                { id: 604, fact: "The world's oldest known recipe is for beer, found on a 3,900-year-old Sumerian tablet.", source: "University of Chicago" },
                { id: 605, fact: "In Switzerland, it's illegal to own just one guinea pig because they're social animals and get lonely.", source: "Swiss Animal Protection Act" },
                { id: 606, fact: "The shortest commercial flight in the world is in Scotland, from Westray to Papa Westray, lasting just 47 seconds.", source: "Guinness World Records" },
                { id: 607, fact: "In France, it's illegal to name a pig 'Napoleon'.", source: "French Civil Code" },
                { id: 608, fact: "The 'Happy Birthday' song is still under copyright until 2030 in the United States, which is why restaurants often sing their own versions.", source: "U.S. Copyright Office" },
                { id: 609, fact: "Iceland has no mosquitoes. The climate is too cold for them to complete their life cycle.", source: "Icelandic Institute of Natural History" },
                { id: 610, fact: "In the Philippines, there's a festival where participants throw tomatoes at each other, similar to Spain's La Tomatina.", source: "Philippine Department of Tourism" }
            ]
        };

        // App state
        const appState = {
            currentCategory: 'all',
            currentFactIndex: 0,
            factsViewed: 0,
            favorites: JSON.parse(localStorage.getItem('worldFactsFavorites')) || [],
            history: JSON.parse(localStorage.getItem('worldFactsHistory')) || [],
            searchQuery: '',
            currentFacts: []
        };

        // DOM Elements
        const categoryItems = document.querySelectorAll('.category-item');
        const currentCategoryName = document.getElementById('current-category-name');
        const currentFactIndex = document.getElementById('current-fact-index');
        const totalCategoryFacts = document.getElementById('total-category-facts');
        const factContent = document.getElementById('fact-content');
        const factCategoryTag = document.getElementById('fact-category-tag');
        const factSource = document.getElementById('fact-source');
        const factId = document.getElementById('fact-id');
        const factCard = document.getElementById('fact-card');
        const searchBox = document.getElementById('search-box');
        const historyList = document.getElementById('history-list');

        // Stats elements
        const totalFactsElement = document.getElementById('total-facts');
        const factsViewedElement = document.getElementById('facts-viewed');
        const favoritesCountElement = document.getElementById('favorites-count');
        const allCountElement = document.getElementById('all-count');
        const scienceCountElement = document.getElementById('science-count');
        const historyCountElement = document.getElementById('history-count');
        const spaceCountElement = document.getElementById('space-count');
        const geographyCountElement = document.getElementById('geography-count');
        const natureCountElement = document.getElementById('nature-count');
        const cultureCountElement = document.getElementById('culture-count');

        // Buttons
        const prevFactBtn = document.getElementById('prev-fact');
        const randomFactBtn = document.getElementById('random-fact');
        const favoriteBtn = document.getElementById('favorite-btn');
        const nextFactBtn = document.getElementById('next-fact');

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            updateFactCounts();
            updateStats();
            loadCurrentCategory();
            updateHistoryDisplay();
            setupEventListeners();
            showRandomFact();
        });

        // Setup event listeners
        function setupEventListeners() {
            // Category selection
            categoryItems.forEach(item => {
                item.addEventListener('click', function() {
                    const category = this.getAttribute('data-category');
                    switchCategory(category);
                });
            });
            
            // Navigation buttons
            prevFactBtn.addEventListener('click', showPreviousFact);
            randomFactBtn.addEventListener('click', showRandomFact);
            nextFactBtn.addEventListener('click', showNextFact);
            favoriteBtn.addEventListener('click', toggleFavorite);
            
            // Search functionality
            searchBox.addEventListener('input', function() {
                appState.searchQuery = this.value.toLowerCase();
                filterFacts();
            });
            
            // Keyboard shortcuts
            document.addEventListener('keydown', function(event) {
                // Left arrow for previous fact
                if (event.key === 'ArrowLeft') {
                    showPreviousFact();
                }
                // Right arrow for next fact
                else if (event.key === 'ArrowRight') {
                    showNextFact();
                }
                // Space or R for random fact
                else if (event.key === ' ' || event.key === 'r' || event.key === 'R') {
                    event.preventDefault();
                    showRandomFact();
                }
                // F for favorite
                else if (event.key === 'f' || event.key === 'F') {
                    toggleFavorite();
                }
            });
        }

        // Update fact counts in the sidebar
        function updateFactCounts() {
            let totalFacts = 0;
            
            for (const category in worldFacts) {
                const count = worldFacts[category].length;
                totalFacts += count;
                
                // Update category count elements
                const countElement = document.getElementById(`${category}-count`);
                if (countElement) {
                    countElement.textContent = count;
                }
            }
            
            // Update total facts
            totalFactsElement.textContent = totalFacts;
            allCountElement.textContent = totalFacts;
        }

        // Update statistics
        function updateStats() {
            factsViewedElement.textContent = appState.factsViewed;
            favoritesCountElement.textContent = appState.favorites.length;
        }

        // Switch category
        function switchCategory(category) {
            appState.currentCategory = category;
            appState.currentFactIndex = 0;
            
            // Update active category in sidebar
            categoryItems.forEach(item => {
                if (item.getAttribute('data-category') === category) {
                    item.classList.add('active');
                } else {
                    item.classList.remove('active');
                }
            });
            
            // Update category name display
            const categoryNames = {
                'all': 'All Facts',
                'science': 'Science',
                'history': 'History',
                'space': 'Space',
                'geography': 'Geography',
                'nature': 'Nature',
                'culture': 'Culture'
            };
            
            currentCategoryName.textContent = categoryNames[category];
            currentCategoryName.innerHTML = `<i class="fas fa-${getCategoryIcon(category)}"></i> ${categoryNames[category]}`;
            
            // Load facts for the category
            loadCurrentCategory();
            
            // Show first fact
            if (appState.currentFacts.length > 0) {
                displayFact(appState.currentFacts[0]);
            } else {
                displayNoFactsMessage();
            }
        }

        // Get icon for category
        function getCategoryIcon(category) {
            const icons = {
                'all': 'star',
                'science': 'flask',
                'history': 'landmark',
                'space': 'rocket',
                'geography': 'globe-asia',
                'nature': 'leaf',
                'culture': 'theater-masks'
            };
            return icons[category] || 'star';
        }

        // Load current category facts
        function loadCurrentCategory() {
            if (appState.currentCategory === 'all') {
                // Combine all facts
                appState.currentFacts = [];
                for (const category in worldFacts) {
                    appState.currentFacts = appState.currentFacts.concat(
                        worldFacts[category].map(fact => ({
                            ...fact,
                            category: category
                        }))
                    );
                }
            } else {
                // Get facts from specific category
                appState.currentFacts = worldFacts[appState.currentCategory].map(fact => ({
                    ...fact,
                    category: appState.currentCategory
                }));
            }
            
            // Apply search filter if any
            if (appState.searchQuery) {
                filterFacts();
            }
            
            // Update total facts count for category
            totalCategoryFacts.textContent = appState.currentFacts.length;
            
            // Shuffle the facts for random experience
            shuffleArray(appState.currentFacts);
        }

        // Filter facts based on search query
        function filterFacts() {
            if (!appState.searchQuery) {
                loadCurrentCategory();
                return;
            }
            
            const query = appState.searchQuery.toLowerCase();
            
            if (appState.currentCategory === 'all') {
                // Filter across all categories
                appState.currentFacts = [];
                for (const category in worldFacts) {
                    const filtered = worldFacts[category]
                        .filter(fact => 
                            fact.fact.toLowerCase().includes(query) || 
                            fact.source.toLowerCase().includes(query)
                        )
                        .map(fact => ({
                            ...fact,
                            category: category
                        }));
                    
                    appState.currentFacts = appState.currentFacts.concat(filtered);
                }
            } else {
                // Filter within current category
                appState.currentFacts = worldFacts[appState.currentCategory]
                    .filter(fact => 
                        fact.fact.toLowerCase().includes(query) || 
                        fact.source.toLowerCase().includes(query)
                    )
                    .map(fact => ({
                        ...fact,
                        category: appState.currentCategory
                    }));
            }
            
            totalCategoryFacts.textContent = appState.currentFacts.length;
            appState.currentFactIndex = 0;
            
            if (appState.currentFacts.length > 0) {
                displayFact(appState.currentFacts[0]);
            } else {
                displayNoFactsMessage();
            }
        }

        // Display a fact
        function displayFact(fact) {
            if (!fact) return;
            
            // Update fact display
            factContent.textContent = fact.fact;
            factSource.textContent = `Source: ${fact.source}`;
            factId.textContent = fact.id.toString().padStart(3, '0');
            
            // Update category tag
            const categoryColors = {
                'science': 'var(--science)',
                'history': 'var(--history)',
                'space': 'var(--space)',
                'geography': 'var(--geography)',
                'nature': 'var(--nature)',
                'culture': 'var(--culture)'
            };
            
            const categoryNames = {
                'science': 'Science',
                'history': 'History',
                'space': 'Space',
                'geography': 'Geography',
                'nature': 'Nature',
                'culture': 'Culture'
            };
            
            factCategoryTag.textContent = categoryNames[fact.category];
            factCategoryTag.style.backgroundColor = categoryColors[fact.category];
            
            // Update fact index display
            currentFactIndex.textContent = appState.currentFactIndex + 1;
            
            // Update favorite button
            updateFavoriteButton(fact.id);
            
            // Add to history
            addToHistory(fact);
            
            // Update facts viewed count
            appState.factsViewed++;
            updateStats();
            
            // Save to localStorage
            localStorage.setItem('worldFactsViewed', appState.factsViewed);
        }

        // Display message when no facts are found
        function displayNoFactsMessage() {
            factContent.textContent = "No facts found matching your search. Try a different search term or category.";
            factSource.textContent = "";
            factId.textContent = "000";
            factCategoryTag.textContent = "No Results";
            factCategoryTag.style.backgroundColor = "var(--gray)";
            currentFactIndex.textContent = "0";
            favoriteBtn.disabled = true;
        }

        // Show previous fact
        function showPreviousFact() {
            if (appState.currentFacts.length === 0) return;
            
            appState.currentFactIndex--;
            if (appState.currentFactIndex < 0) {
                appState.currentFactIndex = appState.currentFacts.length - 1;
            }
            
            displayFact(appState.currentFacts[appState.currentFactIndex]);
        }

        // Show next fact
        function showNextFact() {
            if (appState.currentFacts.length === 0) return;
            
            appState.currentFactIndex++;
            if (appState.currentFactIndex >= appState.currentFacts.length) {
                appState.currentFactIndex = 0;
            }
            
            displayFact(appState.currentFacts[appState.currentFactIndex]);
        }

        // Show random fact
        function showRandomFact() {
            if (appState.currentFacts.length === 0) return;
            
            // If we're in "all" category, sometimes pick from a random category for variety
            if (appState.currentCategory === 'all' && Math.random() > 0.7) {
                const categories = Object.keys(worldFacts);
                const randomCategory = categories[Math.floor(Math.random() * categories.length)];
                const randomFactFromCategory = worldFacts[randomCategory][Math.floor(Math.random() * worldFacts[randomCategory].length)];
                
                // Create a fact object with category
                const factWithCategory = {
                    ...randomFactFromCategory,
                    category: randomCategory
                };
                
                // Find index in current facts (might not be there due to search filter)
                const foundIndex = appState.currentFacts.findIndex(f => f.id === factWithCategory.id);
                if (foundIndex >= 0) {
                    appState.currentFactIndex = foundIndex;
                    displayFact(appState.currentFacts[foundIndex]);
                } else {
                    // If not found in filtered results, just display it
                    displayFact(factWithCategory);
                }
            } else {
                // Regular random selection from current facts
                appState.currentFactIndex = Math.floor(Math.random() * appState.currentFacts.length);
                displayFact(appState.currentFacts[appState.currentFactIndex]);
            }
        }

        // Add fact to history
        function addToHistory(fact) {
            // Check if fact is already in history
            const existingIndex = appState.history.findIndex(item => item.id === fact.id);
            
            // Remove if already exists (to bring it to the front)
            if (existingIndex >= 0) {
                appState.history.splice(existingIndex, 1);
            }
            
            // Add to beginning of history
            appState.history.unshift({
                id: fact.id,
                fact: fact.fact,
                category: fact.category,
                timestamp: new Date().toISOString()
            });
            
            // Keep only last 10 items
            if (appState.history.length > 10) {
                appState.history = appState.history.slice(0, 10);
            }
            
            // Update display
            updateHistoryDisplay();
            
            // Save to localStorage
            localStorage.setItem('worldFactsHistory', JSON.stringify(appState.history));
        }

        // Update history display
        function updateHistoryDisplay() {
            if (appState.history.length === 0) {
                historyList.innerHTML = `
                    <li class="empty-state">
                        <i class="fas fa-history"></i>
                        <p>Your fact history will appear here</p>
                    </li>
                `;
                return;
            }
            
            const categoryColors = {
                'science': 'var(--science)',
                'history': 'var(--history)',
                'space': 'var(--space)',
                'geography': 'var(--geography)',
                'nature': 'var(--nature)',
                'culture': 'var(--culture)'
            };
            
            const categoryNames = {
                'science': 'Science',
                'history': 'History',
                'space': 'Space',
                'geography': 'Geography',
                'nature': 'Nature',
                'culture': 'Culture'
            };
            
            historyList.innerHTML = '';
            
            appState.history.forEach(item => {
                const historyItem = document.createElement('li');
                historyItem.className = 'history-item';
                
                // Format time
                const time = new Date(item.timestamp);
                const timeString = time.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                
                historyItem.innerHTML = `
                    <div class="history-fact">${item.fact}</div>
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <span class="history-category" style="background-color: ${categoryColors[item.category]}">
                            ${categoryNames[item.category]}
                        </span>
                        <span style="color: var(--gray); font-size: 0.8rem;">${timeString}</span>
                    </div>
                `;
                
                // Add click event to load this fact
                historyItem.addEventListener('click', function() {
                    // Find the fact in current facts
                    const factIndex = appState.currentFacts.findIndex(f => f.id === item.id);
                    if (factIndex >= 0) {
                        appState.currentFactIndex = factIndex;
                        displayFact(appState.currentFacts[factIndex]);
                    }
                });
                
                historyList.appendChild(historyItem);
            });
        }

        // Toggle favorite status
        function toggleFavorite() {
            if (appState.currentFacts.length === 0) return;
            
            const currentFact = appState.currentFacts[appState.currentFactIndex];
            const factId = currentFact.id;
            
            // Check if already favorited
            const favoriteIndex = appState.favorites.indexOf(factId);
            
            if (favoriteIndex >= 0) {
                // Remove from favorites
                appState.favorites.splice(favoriteIndex, 1);
            } else {
                // Add to favorites
                appState.favorites.push(factId);
            }
            
            // Update button and save
            updateFavoriteButton(factId);
            localStorage.setItem('worldFactsFavorites', JSON.stringify(appState.favorites));
            updateStats();
        }

        // Update favorite button
        function updateFavoriteButton(factId) {
            const isFavorite = appState.favorites.includes(factId);
            
            if (isFavorite) {
                favoriteBtn.innerHTML = '<i class="fas fa-heart"></i> Remove Favorite';
                favoriteBtn.classList.add('active');
            } else {
                favoriteBtn.innerHTML = '<i class="far fa-heart"></i> Add to Favorites';
                favoriteBtn.classList.remove('active');
            }
            
            favoriteBtn.disabled = false;
        }

        // Utility function to shuffle array
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }
    </script>
</body>
</html>