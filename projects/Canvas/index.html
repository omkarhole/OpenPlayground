<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Advanced Canvas Drawing App</title>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: "#22c55e",
            secondary: "#16a34a",
            accent: "#3b82f6",
            warning: "#f59e0b",
            danger: "#ef4444",
            darkbg: "#0f172a",
            panel: "#1e293b",
            paneldark: "#0f172a"
          },
          animation: {
            'fade-in': 'fadeIn 0.3s ease-in-out',
            'slide-in': 'slideIn 0.3s ease-out',
            'pulse-slow': 'pulse 2s infinite',
          },
          keyframes: {
            fadeIn: {
              '0%': { opacity: '0' },
              '100%': { opacity: '1' },
            },
            slideIn: {
              '0%': { transform: 'translateY(-10px)', opacity: '0' },
              '100%': { transform: 'translateY(0)', opacity: '1' },
            }
          }
        }
      }
    }
  </script>
 <link href="style.css" rel="stylesheet>
</head>
<body class="bg-darkbg text-gray-200 min-h-screen flex flex-col overflow-hidden">
  <!-- HEADER -->
  <header class="bg-slate-900 border-b border-gray-700 p-4 flex justify-between items-center">
    <div class="flex items-center space-x-4">
      <h1 class="text-2xl font-bold text-primary">Canvas Drawing App</h1>
      <div class="text-sm bg-slate-800 px-3 py-1 rounded-full flex items-center">
        <div class="w-2 h-2 rounded-full bg-primary mr-2 animate-pulse"></div>
        <span id="statusIndicator">Ready</span>
      </div>
    </div>
    
    <div class="flex items-center space-x-3">
      <div class="flex items-center space-x-2 bg-slate-800 px-3 py-1 rounded-full">
        <span id="undoCount" class="text-xs">0</span>
        <span class="text-gray-400">|</span>
        <span id="redoCount" class="text-xs">0</span>
      </div>
      <button id="undoBtn" class="bg-slate-800 text-gray-300 px-4 py-2 rounded hover:bg-slate-700 transition flex items-center">
        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"></path>
        </svg>
        Undo
      </button>
      <button id="redoBtn" class="bg-slate-800 text-gray-300 px-4 py-2 rounded hover:bg-slate-700 transition flex items-center">
        Redo
        <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 10h-10a8 8 0 00-8 8v2M21 10l-6 6m6-6l-6-6"></path>
        </svg>
      </button>
      <button id="saveBtn" class="bg-primary text-darkbg font-medium px-5 py-2 rounded hover:bg-secondary transition flex items-center">
        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"></path>
        </svg>
        Save
      </button>
    </div>
  </header>

  <!-- MAIN APP CONTAINER -->
  <div class="flex flex-1 overflow-hidden">
    <!-- LEFT TOOLBAR -->
    <aside class="w-16 bg-paneldark border-r border-gray-800 flex flex-col items-center py-4 space-y-6">
      <!-- Brush Tool -->
      <button id="brushToolBtn" class="tool-btn active w-12 h-12 flex items-center justify-center rounded-lg bg-panel hover:bg-slate-700 transition" data-tooltip="Brush">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"></path>
        </svg>
      </button>
      
      <!-- Eraser Tool -->
      <button id="eraserToolBtn" class="tool-btn w-12 h-12 flex items-center justify-center rounded-lg bg-panel hover:bg-slate-700 transition" data-tooltip="Eraser">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
        </svg>
      </button>
      
      <!-- Line Tool -->
      <button id="lineToolBtn" class="tool-btn w-12 h-12 flex items-center justify-center rounded-lg bg-panel hover:bg-slate-700 transition" data-tooltip="Line">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14"></path>
        </svg>
      </button>
      
      <!-- Rectangle Tool -->
      <button id="rectangleToolBtn" class="tool-btn w-12 h-12 flex items-center justify-center rounded-lg bg-panel hover:bg-slate-700 transition" data-tooltip="Rectangle">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <rect x="3" y="3" width="18" height="18" rx="2" ry="2" stroke-width="2" stroke="currentColor" fill="none"></rect>
        </svg>
      </button>
      
      <!-- Circle Tool -->
      <button id="circleToolBtn" class="tool-btn w-12 h-12 flex items-center justify-center rounded-lg bg-panel hover:bg-slate-700 transition" data-tooltip="Circle">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <circle cx="12" cy="12" r="9" stroke-width="2" stroke="currentColor" fill="none"></circle>
        </svg>
      </button>
      
      <!-- Fill Tool -->
      <button id="fillToolBtn" class="tool-btn w-12 h-12 flex items-center justify-center rounded-lg bg-panel hover:bg-slate-700 transition" data-tooltip="Fill">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4 4 0 003 15z"></path>
        </svg>
      </button>
      
      <!-- Text Tool -->
      <button id="textToolBtn" class="tool-btn w-12 h-12 flex items-center justify-center rounded-lg bg-panel hover:bg-slate-700 transition" data-tooltip="Text">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"></path>
        </svg>
      </button>
      
      <!-- Selection Tool -->
      <button id="selectionToolBtn" class="tool-btn w-12 h-12 flex items-center justify-center rounded-lg bg-panel hover:bg-slate-700 transition" data-tooltip="Selection">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16l2.879-2.879m0 0a3 3 0 104.243-4.242 3 3 0 00-4.243 4.242zM21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
      </button>
      
      <div class="flex-1"></div>
      
      <!-- Settings -->
      <button id="settingsBtn" class="tool-btn w-12 h-12 flex items-center justify-center rounded-lg bg-panel hover:bg-slate-700 transition" data-tooltip="Settings">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
        </svg>
      </button>
    </aside>

    <!-- MAIN CONTENT -->
    <main class="flex-1 flex flex-col overflow-hidden">
      <!-- TOP TOOLBAR -->
      <div class="bg-slate-800 border-b border-gray-700 p-4 flex flex-wrap gap-4 items-center justify-between">
        <div class="flex flex-wrap gap-4 items-center">
          <!-- Color Picker -->
          <div class="flex items-center space-x-3">
            <div class="flex flex-col">
              <label class="text-xs text-gray-400 mb-1">Brush Color</label>
              <input type="color" id="colorPicker" value="#22c55e" class="color-picker-custom">
            </div>
            
            <div class="flex flex-col">
              <label class="text-xs text-gray-400 mb-1">Fill Color</label>
              <input type="color" id="fillColorPicker" value="#3b82f6" class="color-picker-custom">
            </div>
            
            <div class="flex flex-col">
              <label class="text-xs text-gray-400 mb-1">Background</label>
              <input type="color" id="bgColorPicker" value="#0f172a" class="color-picker-custom">
            </div>
          </div>
          
          <!-- Brush Size -->
          <div class="flex flex-col">
            <label class="text-xs text-gray-400 mb-1">Brush Size: <span id="brushSizeValue">5</span>px</label>
            <input type="range" id="brushSize" min="1" max="100" value="5" class="w-40">
          </div>
          
          <!-- Brush Opacity -->
          <div class="flex flex-col">
            <label class="text-xs text-gray-400 mb-1">Opacity: <span id="opacityValue">100</span>%</label>
            <input type="range" id="opacitySlider" min="1" max="100" value="100" class="w-40">
          </div>
          
          <!-- Brush Shape -->
          <div class="flex flex-col">
            <label class="text-xs text-gray-400 mb-1">Brush Shape</label>
            <div class="flex space-x-2">
              <button id="brushShapeRound" class="brush-shape-btn active">
                <div class="w-4 h-4 rounded-full bg-current"></div>
              </button>
              <button id="brushShapeSquare" class="brush-shape-btn">
                <div class="w-4 h-4 bg-current"></div>
              </button>
              <button id="brushShapeVertical" class="brush-shape-btn">
                <div class="w-2 h-4 bg-current"></div>
              </button>
              <button id="brushShapeHorizontal" class="brush-shape-btn">
                <div class="w-4 h-2 bg-current"></div>
              </button>
            </div>
          </div>
          
          <!-- Brush Type -->
          <div class="flex flex-col">
            <label class="text-xs text-gray-400 mb-1">Brush Type</label>
            <select id="brushType" class="bg-panel border border-gray-700 rounded px-3 py-1 text-sm">
              <option value="solid">Solid</option>
              <option value="dashed">Dashed</option>
              <option value="dotted">Dotted</option>
              <option value="textured">Textured</option>
              <option value="gradient">Gradient</option>
            </select>
          </div>
        </div>
        
        <!-- Action Buttons -->
        <div class="flex space-x-2">
          <button id="clearBtn" class="bg-danger text-white px-4 py-2 rounded hover:bg-red-700 transition flex items-center">
            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
            </svg>
            Clear Canvas
          </button>
          
          <button id="exportBtn" class="bg-accent text-white px-4 py-2 rounded hover:bg-blue-600 transition flex items-center">
            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path>
            </svg>
            Export
          </button>
        </div>
      </div>
      
      <!-- CANVAS AREA -->
      <div class="flex-1 p-4 overflow-hidden">
        <div class="relative w-full h-full bg-paneldark rounded-lg overflow-hidden border border-gray-800">
          <!-- Canvas Container -->
          <div id="canvasContainer" class="absolute inset-0 overflow-auto">
            <canvas id="drawingCanvas" class="block"></canvas>
          </div>
          
          <!-- Canvas Grid Overlay (Toggleable) -->
          <canvas id="gridCanvas" class="absolute inset-0 pointer-events-none opacity-30" style="display: none;"></canvas>
          
          <!-- Selection Overlay -->
          <canvas id="selectionCanvas" class="absolute inset-0 pointer-events-none"></canvas>
          
          <!-- Canvas Controls -->
          <div class="absolute bottom-4 right-4 flex flex-col space-y-2">
            <button id="zoomInBtn" class="bg-panel w-10 h-10 flex items-center justify-center rounded-full hover:bg-slate-700 transition shadow-lg">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
              </svg>
            </button>
            <button id="zoomOutBtn" class="bg-panel w-10 h-10 flex items-center justify-center rounded-full hover:bg-slate-700 transition shadow-lg">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"></path>
              </svg>
            </button>
            <button id="resetZoomBtn" class="bg-panel w-10 h-10 flex items-center justify-center rounded-full hover:bg-slate-700 transition shadow-lg">
              <span class="text-sm font-medium">100%</span>
            </button>
            <button id="gridToggleBtn" class="bg-panel w-10 h-10 flex items-center justify-center rounded-full hover:bg-slate-700 transition shadow-lg">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"></path>
              </svg>
            </button>
          </div>
          
          <!-- Zoom Display -->
          <div class="absolute bottom-4 left-4 bg-panel px-3 py-2 rounded-lg shadow-lg">
            <span class="text-sm">Zoom: <span id="zoomLevel">100</span>%</span>
          </div>
          
          <!-- Cursor Coordinates -->
          <div class="absolute top-4 left-4 bg-panel px-3 py-2 rounded-lg shadow-lg">
            <span class="text-sm">X: <span id="cursorX">0</span>, Y: <span id="cursorY">0</span></span>
          </div>
        </div>
      </div>
    </main>

    <!-- RIGHT PANEL -->
    <aside class="w-80 bg-paneldark border-l border-gray-800 flex flex-col overflow-hidden">
      <!-- Panel Tabs -->
      <div class="flex border-b border-gray-800">
        <button id="layersTabBtn" class="tab-btn flex-1 py-3 text-center active">Layers</button>
        <button id="colorsTabBtn" class="tab-btn flex-1 py-3 text-center">Colors</button>
        <button id="brushesTabBtn" class="tab-btn flex-1 py-3 text-center">Brushes</button>
        <button id="historyTabBtn" class="tab-btn flex-1 py-3 text-center">History</button>
      </div>
      
      <!-- Layers Panel -->
      <div id="layersPanel" class="flex-1 p-4 overflow-y-auto custom-scrollbar">
        <div class="flex justify-between items-center mb-4">
          <h3 class="font-medium">Layers</h3>
          <div class="flex space-x-2">
            <button id="addLayerBtn" class="bg-primary text-white p-1.5 rounded hover:bg-secondary transition" title="Add Layer">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
              </svg>
            </button>
            <button id="removeLayerBtn" class="bg-danger text-white p-1.5 rounded hover:bg-red-700 transition" title="Remove Layer">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"></path>
              </svg>
            </button>
          </div>
        </div>
        
        <div id="layersList" class="space-y-2">
          <!-- Layers will be dynamically added here -->
          <div class="layer-item bg-panel p-3 rounded border border-gray-700 flex items-center">
            <div class="w-6 h-6 rounded-full bg-primary mr-3 flex items-center justify-center">
              <svg class="w-4 h-4 text-white" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
              </svg>
            </div>
            <div class="flex-1">
              <div class="font-medium">Layer 1</div>
              <div class="text-xs text-gray-400">Visible</div>
            </div>
            <div class="flex items-center">
              <input type="checkbox" class="mr-3" checked>
              <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"></path>
              </svg>
            </div>
          </div>
        </div>
        
        <div class="mt-6">
          <h3 class="font-medium mb-3">Layer Properties</h3>
          <div class="space-y-4">
            <div>
              <label class="text-xs text-gray-400 mb-1 block">Opacity</label>
              <input type="range" id="layerOpacity" min="0" max="100" value="100" class="w-full">
            </div>
            <div>
              <label class="text-xs text-gray-400 mb-1 block">Blend Mode</label>
              <select id="blendMode" class="w-full bg-panel border border-gray-700 rounded px-3 py-2">
                <option value="source-over">Normal</option>
                <option value="multiply">Multiply</option>
                <option value="screen">Screen</option>
                <option value="overlay">Overlay</option>
                <option value="darken">Darken</option>
                <option value="lighten">Lighten</option>
              </select>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Colors Panel -->
      <div id="colorsPanel" class="flex-1 p-4 overflow-y-auto custom-scrollbar" style="display: none;">
        <h3 class="font-medium mb-4">Color Palettes</h3>
        
        <div class="mb-6">
          <div class="flex justify-between items-center mb-3">
            <h4 class="text-sm font-medium">Recent Colors</h4>
            <button id="clearRecentColors" class="text-xs text-gray-400 hover:text-white">Clear</button>
          </div>
          <div id="recentColors" class="flex flex-wrap gap-2">
            <!-- Recent colors will be added here -->
          </div>
        </div>
        
        <div class="mb-6">
          <h4 class="text-sm font-medium mb-3">Preset Palettes</h4>
          <div class="space-y-4">
            <div>
              <div class="text-xs text-gray-400 mb-2">Primary Palette</div>
              <div class="flex gap-1">
                <div class="color-swatch bg-primary" data-color="#22c55e"></div>
                <div class="color-swatch bg-secondary" data-color="#16a34a"></div>
                <div class="color-swatch bg-accent" data-color="#3b82f6"></div>
                <div class="color-swatch bg-warning" data-color="#f59e0b"></div>
                <div class="color-swatch bg-danger" data-color="#ef4444"></div>
              </div>
            </div>
            
            <div>
              <div class="text-xs text-gray-400 mb-2">Pastel Palette</div>
              <div class="flex gap-1">
                <div class="color-swatch" style="background-color: #fecaca" data-color="#fecaca"></div>
                <div class="color-swatch" style="background-color: #bbf7d0" data-color="#bbf7d0"></div>
                <div class="color-swatch" style="background-color: #bfdbfe" data-color="#bfdbfe"></div>
                <div class="color-swatch" style="background-color: #fde68a" data-color="#fde68a"></div>
                <div class="color-swatch" style="background-color: #ddd6fe" data-color="#ddd6fe"></div>
              </div>
            </div>
            
            <div>
              <div class="text-xs text-gray-400 mb-2">Dark Palette</div>
              <div class="flex gap-1">
                <div class="color-swatch" style="background-color: #1e293b" data-color="#1e293b"></div>
                <div class="color-swatch" style="background-color: #334155" data-color="#334155"></div>
                <div class="color-swatch" style="background-color: #475569" data-color="#475569"></div>
                <div class="color-swatch" style="background-color: #64748b" data-color="#64748b"></div>
                <div class="color-swatch" style="background-color: #94a3b8" data-color="#94a3b8"></div>
              </div>
            </div>
          </div>
        </div>
        
        <div>
          <h4 class="text-sm font-medium mb-3">Custom Color</h4>
          <div class="flex items-center space-x-3">
            <input type="color" id="customColorPicker" value="#22c55e" class="color-picker-custom w-12 h-12">
            <div class="flex-1">
              <div class="text-xs text-gray-400 mb-1">Hex Code</div>
              <input type="text" id="hexInput" value="#22c55e" class="w-full bg-panel border border-gray-700 rounded px-3 py-1.5">
            </div>
          </div>
        </div>
      </div>
      
      <!-- Brushes Panel -->
      <div id="brushesPanel" class="flex-1 p-4 overflow-y-auto custom-scrollbar" style="display: none;">
        <h3 class="font-medium mb-4">Brush Presets</h3>
        
        <div class="space-y-4">
          <div>
            <h4 class="text-sm font-medium mb-2">Basic Brushes</h4>
            <div class="grid grid-cols-3 gap-2">
              <button class="brush-preset-btn p-3 rounded-lg bg-panel hover:bg-slate-700 transition flex flex-col items-center" data-brush="round">
                <div class="w-8 h-8 rounded-full bg-primary mb-2"></div>
                <span class="text-xs">Round</span>
              </button>
              <button class="brush-preset-btn p-3 rounded-lg bg-panel hover:bg-slate-700 transition flex flex-col items-center" data-brush="square">
                <div class="w-8 h-8 bg-primary mb-2"></div>
                <span class="text-xs">Square</span>
              </button>
              <button class="brush-preset-btn p-3 rounded-lg bg-panel hover:bg-slate-700 transition flex flex-col items-center" data-brush="soft">
                <div class="w-8 h-8 rounded-full bg-primary opacity-70 mb-2"></div>
                <span class="text-xs">Soft</span>
              </button>
            </div>
          </div>
          
          <div>
            <h4 class="text-sm font-medium mb-2">Special Brushes</h4>
            <div class="grid grid-cols-3 gap-2">
              <button class="brush-preset-btn p-3 rounded-lg bg-panel hover:bg-slate-700 transition flex flex-col items-center" data-brush="spray">
                <div class="w-8 h-8 rounded-full bg-gradient-to-r from-primary to-accent mb-2"></div>
                <span class="text-xs">Spray</span>
              </button>
              <button class="brush-preset-btn p-3 rounded-lg bg-panel hover:bg-slate-700 transition flex flex-col items-center" data-brush="textured">
                <div class="w-8 h-8 bg-gradient-to-br from-primary to-warning mb-2"></div>
                <span class="text-xs">Textured</span>
              </button>
              <button class="brush-preset-btn p-3 rounded-lg bg-panel hover:bg-slate-700 transition flex flex-col items-center" data-brush="calligraphy">
                <div class="w-8 h-8 bg-gradient-to-t from-primary to-transparent mb-2"></div>
                <span class="text-xs">Calligraphy</span>
              </button>
            </div>
          </div>
          
          <div>
            <h4 class="text-sm font-medium mb-2">Brush Settings</h4>
            <div class="space-y-4">
              <div>
                <label class="text-xs text-gray-400 mb-1 block">Spacing</label>
                <input type="range" id="brushSpacing" min="1" max="50" value="10" class="w-full">
              </div>
              <div>
                <label class="text-xs text-gray-400 mb-1 block">Scatter</label>
                <input type="range" id="brushScatter" min="0" max="100" value="0" class="w-full">
              </div>
              <div>
                <label class="text-xs text-gray-400 mb-1 block">Rotation</label>
                <input type="range" id="brushRotation" min="0" max="360" value="0" class="w-full">
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- History Panel -->
      <div id="historyPanel" class="flex-1 p-4 overflow-y-auto custom-scrollbar" style="display: none;">
        <div class="flex justify-between items-center mb-4">
          <h3 class="font-medium">History</h3>
          <button id="clearHistoryBtn" class="text-xs text-gray-400 hover:text-white">Clear All</button>
        </div>
        
        <div id="historyList" class="space-y-2">
          <!-- History items will be added here -->
          <div class="bg-panel p-3 rounded text-sm">
            <div class="font-medium">Initial State</div>
            <div class="text-xs text-gray-400">Canvas created</div>
          </div>
        </div>
      </div>
    </aside>
  </div>

  <!-- MODALS -->
  
  <!-- Save Modal -->
  <div id="saveModal" class="modal-overlay" style="display: none;">
    <div class="modal-content">
      <div class="flex justify-between items-center mb-6">
        <h2 class="text-xl font-bold">Save Drawing</h2>
        <button id="closeSaveModal" class="text-gray-400 hover:text-white">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
      </div>
      
      <div class="space-y-6">
        <div>
          <label class="block text-sm font-medium mb-2">File Name</label>
          <input type="text" id="fileName" value="drawing" class="w-full bg-panel border border-gray-700 rounded px-3 py-2">
        </div>
        
        <div>
          <label class="block text-sm font-medium mb-2">File Format</label>
          <div class="grid grid-cols-2 gap-3">
            <button class="format-option active bg-primary text-white py-3 rounded" data-format="png">PNG</button>
            <button class="format-option bg-panel py-3 rounded hover:bg-slate-700" data-format="jpg">JPG</button>
          </div>
        </div>
        
        <div>
          <label class="block text-sm font-medium mb-2">Image Size</label>
          <div class="grid grid-cols-2 gap-4">
            <div>
              <label class="text-xs text-gray-400 mb-1 block">Width</label>
              <input type="number" id="exportWidth" value="1920" class="w-full bg-panel border border-gray-700 rounded px-3 py-2">
            </div>
            <div>
              <label class="text-xs text-gray-400 mb-1 block">Height</label>
              <input type="number" id="exportHeight" value="1080" class="w-full bg-panel border border-gray-700 rounded px-3 py-2">
            </div>
          </div>
        </div>
        
        <div class="flex justify-end space-x-3 pt-4">
          <button id="cancelSave" class="px-4 py-2 rounded border border-gray-700 hover:bg-slate-800 transition">Cancel</button>
          <button id="confirmSave" class="bg-primary text-white px-6 py-2 rounded hover:bg-secondary transition">Save</button>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Settings Modal -->
  <div id="settingsModal" class="modal-overlay" style="display: none;">
    <div class="modal-content">
      <div class="flex justify-between items-center mb-6">
        <h2 class="text-xl font-bold">Settings</h2>
        <button id="closeSettingsModal" class="text-gray-400 hover:text-white">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
      </div>
      
      <div class="space-y-6">
        <div>
          <h3 class="font-medium mb-3">Canvas Settings</h3>
          <div class="space-y-4">
            <div class="flex items-center justify-between">
              <span>Grid Size</span>
              <input type="range" id="gridSizeSlider" min="10" max="100" value="20" class="w-40">
            </div>
            <div class="flex items-center justify-between">
              <span>Grid Color</span>
              <input type="color" id="gridColorPicker" value="#334155" class="w-10 h-10 rounded">
            </div>
            <div class="flex items-center justify-between">
              <span>Snap to Grid</span>
              <input type="checkbox" id="snapToGrid" class="w-5 h-5">
            </div>
          </div>
        </div>
        
        <div>
          <h3 class="font-medium mb-3">Performance</h3>
          <div class="space-y-4">
            <div class="flex items-center justify-between">
              <span>History States</span>
              <input type="number" id="historyStates" value="50" class="w-20 bg-panel border border-gray-700 rounded px-3 py-1">
            </div>
            <div class="flex items-center justify-between">
              <span>Canvas Quality</span>
              <select id="canvasQuality" class="bg-panel border border-gray-700 rounded px-3 py-1">
                <option value="high">High</option>
                <option value="medium">Medium</option>
                <option value="low">Low</option>
              </select>
            </div>
          </div>
        </div>
        
        <div>
          <h3 class="font-medium mb-3">Keyboard Shortcuts</h3>
          <div class="space-y-2 text-sm">
            <div class="flex justify-between">
              <span>Undo</span>
              <span class="text-gray-400">Ctrl+Z</span>
            </div>
            <div class="flex justify-between">
              <span>Redo</span>
              <span class="text-gray-400">Ctrl+Shift+Z</span>
            </div>
            <div class="flex justify-between">
              <span>Save</span>
              <span class="text-gray-400">Ctrl+S</span>
            </div>
            <div class="flex justify-between">
              <span>Clear Canvas</span>
              <span class="text-gray-400">Ctrl+Delete</span>
            </div>
          </div>
        </div>
        
        <div class="flex justify-end pt-4">
          <button id="confirmSettings" class="bg-primary text-white px-6 py-2 rounded hover:bg-secondary transition">Apply</button>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Export Modal -->
  <div id="exportModal" class="modal-overlay" style="display: none;">
    <div class="modal-content">
      <div class="flex justify-between items-center mb-6">
        <h2 class="text-xl font-bold">Export Options</h2>
        <button id="closeExportModal" class="text-gray-400 hover:text-white">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
      </div>
      
      <div class="space-y-6">
        <div>
          <label class="block text-sm font-medium mb-2">Export Format</label>
          <div class="grid grid-cols-3 gap-3">
            <button class="export-format active bg-primary text-white py-3 rounded" data-format="png">PNG</button>
            <button class="export-format bg-panel py-3 rounded hover:bg-slate-700" data-format="jpg">JPG</button>
            <button class="export-format bg-panel py-3 rounded hover:bg-slate-700" data-format="webp">WebP</button>
          </div>
        </div>
        
        <div>
          <label class="block text-sm font-medium mb-2">Export Quality</label>
          <input type="range" id="exportQuality" min="1" max="100" value="90" class="w-full">
        </div>
        
        <div>
          <label class="block text-sm font-medium mb-2">Export Size</label>
          <div class="grid grid-cols-2 gap-4">
            <div>
              <select id="exportSizePreset" class="w-full bg-panel border border-gray-700 rounded px-3 py-2">
                <option value="custom">Custom</option>
                <option value="1080p">1920x1080 (Full HD)</option>
                <option value="720p">1280x720 (HD)</option>
                <option value="4k">3840x2160 (4K)</option>
                <option value="instagram">1080x1080 (Instagram)</option>
              </select>
            </div>
            <div class="grid grid-cols-2 gap-2">
              <div>
                <label class="text-xs text-gray-400 mb-1 block">Width</label>
                <input type="number" id="exportWidthCustom" value="1920" class="w-full bg-panel border border-gray-700 rounded px-3 py-1">
              </div>
              <div>
                <label class="text-xs text-gray-400 mb-1 block">Height</label>
                <input type="number" id="exportHeightCustom" value="1080" class="w-full bg-panel border border-gray-700 rounded px-3 py-1">
              </div>
            </div>
          </div>
        </div>
        
        <div class="flex justify-end space-x-3 pt-4">
          <button id="cancelExport" class="px-4 py-2 rounded border border-gray-700 hover:bg-slate-800 transition">Cancel</button>
          <button id="confirmExport" class="bg-primary text-white px-6 py-2 rounded hover:bg-secondary transition">Export</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Drawing App JavaScript -->
 <script src="script.js"></script>
</body>
</html>