<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üíº business tycoon ¬∑ build your empire</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Roboto', system-ui, sans-serif;
        }

        body {
            background: #1f3b3c;
            background: linear-gradient(145deg, #1e4845, #123235);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            color: #eef3e3;
        }

        .game-panel {
            max-width: 1200px;
            width: 100%;
            background: rgba(22, 42, 45, 0.9);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-radius: 4rem;
            padding: 2.2rem 2.5rem 2.5rem;
            box-shadow: 0 35px 70px -15px #0c2529, 0 0 0 1px #4e887a inset, 0 0 0 2px rgba(220, 210, 130, 0.15);
            border: 1px solid #dbb679;
        }

        /* header with stats */
        .tycoon-header {
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 2rem;
            border-bottom: 2px solid #5f8b79;
            padding-bottom: 1.2rem;
        }

        .logo h1 {
            font-size: 2.6rem;
            font-weight: 600;
            background: linear-gradient(145deg, #f5eac1, #d4cf9f);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .cash-display {
            background: #1c524a;
            border: 4px solid #edd59e;
            border-radius: 60px;
            padding: 0.6rem 2.5rem;
            font-size: 2.2rem;
            font-weight: 700;
            color: #fff2bc;
            box-shadow: 0 8px 0 #0d3530;
        }

        /* main columns */
        .game-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        /* left column: assets / store */
        .store-section {
            background: #1e4647b3;
            border-radius: 3rem;
            padding: 1.8rem;
            border: 1px solid #95af8f;
        }

        .section-title {
            font-size: 2rem;
            margin-bottom: 1.2rem;
            color: #ffeabf;
            border-left: 10px solid #c5a86a;
            padding-left: 1rem;
        }

        .assets-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .asset-row {
            background: #143c40;
            border-radius: 3rem;
            padding: 1rem 1.8rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border: 1px solid #aabf8f;
            flex-wrap: wrap;
        }

        .asset-info {
            display: flex;
            gap: 1.5rem;
            align-items: baseline;
        }

        .asset-name {
            font-size: 1.6rem;
            font-weight: 600;
            color: #ffefcf;
        }

        .asset-detail {
            background: #0f3c3a;
            padding: 0.3rem 1.2rem;
            border-radius: 30px;
            color: #cde2bf;
            border: 1px solid #878f6b;
        }

        .asset-actions {
            display: flex;
            gap: 1rem;
        }

        .buy-btn, .sell-btn {
            background: #39856b;
            border: none;
            color: white;
            font-weight: 700;
            font-size: 1.3rem;
            padding: 0.5rem 1.8rem;
            border-radius: 40px;
            cursor: pointer;
            border: 2px solid #fad68f;
            transition: 0.1s;
        }

        .sell-btn {
            background: #aa7942;
        }

        .buy-btn:hover:not(:disabled) { background: #4cb392; }
        .sell-btn:hover:not(:disabled) { background: #c79858; }
        .buy-btn:disabled, .sell-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        .store-items {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .store-card {
            background: #124d4a;
            border-radius: 2rem;
            padding: 1.2rem;
            border: 1px solid #dfb775;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .store-card h3 {
            font-size: 1.7rem;
            margin-bottom: 0.4rem;
        }

        .store-card button {
            background: #4c8b6e;
            border: none;
            color: white;
            font-size: 1.2rem;
            padding: 0.5rem 2rem;
            border-radius: 40px;
            margin: 0.7rem 0 0.5rem;
            font-weight: 600;
            cursor: pointer;
            border: 2px solid #f2cd8b;
        }

        .store-card button:hover:not(:disabled) { background: #69b38f; }
        .store-card button:disabled { opacity: 0.4; cursor: not-allowed; }

        /* right column: portfolio & events */
        .portfolio-section {
            background: #1e4647b3;
            border-radius: 3rem;
            padding: 1.8rem;
            border: 1px solid #95af8f;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .stat-box {
            background: #0f3b3b;
            border-radius: 2rem;
            padding: 1.5rem;
            border: 1px solid #a5af7a;
        }

        .stat-row {
            display: flex;
            justify-content: space-between;
            font-size: 1.5rem;
            margin: 0.7rem 0;
            border-bottom: 1px dashed #6a8f77;
        }

        .news-ticker {
            background: #163f3b;
            border-radius: 2rem;
            padding: 1.2rem;
            border-left: 12px solid #e9c680;
        }

        .news-title {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            color: #fbe4aa;
        }

        .market-event {
            font-size: 1.3rem;
            background: #215751;
            padding: 1rem;
            border-radius: 1.5rem;
            margin: 0.5rem 0;
        }

        .action-buttons {
            display: flex;
            gap: 1rem;
            justify-content: space-around;
            margin-top: 1rem;
        }

        .end-turn-btn, .reset-game {
            background: #577a62;
            border: none;
            color: #fffbee;
            font-size: 1.6rem;
            padding: 0.8rem 2rem;
            border-radius: 60px;
            font-weight: 700;
            cursor: pointer;
            border: 2px solid #edc16a;
            flex: 1;
        }

        .reset-game {
            background: #6b5b44;
        }

        .footer {
            display: flex;
            justify-content: space-between;
            color: #b7cfaa;
            margin-top: 1.5rem;
            font-size: 1.2rem;
        }
    </style>
</head>
<body>
    <div class="game-panel">
        <div class="tycoon-header">
            <div class="logo">
                <h1>
                    <span>üí∞</span> business tycoon
                </h1>
            </div>
            <div class="cash-display" id="cashDisplay">$10,000</div>
        </div>

        <div class="game-grid">
            <!-- left: assets & market -->
            <div class="store-section">
                <div class="section-title">üì¶ your portfolio</div>
                <div class="assets-list" id="assetsContainer">
                    <!-- dynamic assets (lemonade stands, etc) -->
                </div>

                <div class="section-title" style="margin-top: 1.5rem;">üè™ investment opportunities</div>
                <div class="store-items" id="storeContainer">
                    <!-- dynamic shop items -->
                </div>
            </div>

            <!-- right: stats & events -->
            <div class="portfolio-section">
                <div class="stat-box">
                    <div class="stat-row"><span>üè¶ total assets</span> <span id="assetCount">0</span></div>
                    <div class="stat-row"><span>üìà income / turn</span> <span id="incomePerTurn">$0</span></div>
                    <div class="stat-row"><span>üíµ cash reserve</span> <span id="cashReserve">$10,000</span></div>
                </div>

                <div class="news-ticker">
                    <div class="news-title">üì∞ market news</div>
                    <div class="market-event" id="eventMessage">Welcome, entrepreneur! Start building.</div>
                </div>

                <div class="action-buttons">
                    <button class="end-turn-btn" id="endTurnBtn">‚è≠Ô∏è end turn</button>
                    <button class="reset-game" id="resetBtn">‚ü≤ restart</button>
                </div>
            </div>
        </div>

        <div class="footer">
            <span id="turnDisplay">turn 1</span>
            <span>üí° buy low, sell high ‚Äì watch for random events</span>
        </div>
    </div>

    <script>
        (function() {
            // ---------- BUSINESS TYCOON CORE ----------
            // assets owned by player
            let cash = 10000;
            let turn = 1;

            // asset types
            const assetCatalog = [
                { id: 'lemonade', name: 'üçã lemonade stand', basePrice: 1200, income: 280, emoji: 'üçã' },
                { id: 'coffee', name: '‚òï coffee cart', basePrice: 2500, income: 550, emoji: '‚òï' },
                { id: 'foodtruck', name: 'üåÆ food truck', basePrice: 5000, income: 1100, emoji: 'üåÆ' },
                { id: 'bakery', name: 'ü•ê bakery', basePrice: 8000, income: 1700, emoji: 'ü•ê' },
                { id: 'gym', name: 'üèãÔ∏è gym', basePrice: 15000, income: 3000, emoji: 'üèãÔ∏è' }
            ];

            // player's assets: array of objects with typeId and purchase price (for resale value)
            let ownedAssets = [];

            // market multipliers (random events affect prices/income)
            let priceMultiplier = 1.0;      // affects buy/sell prices
            let incomeMultiplier = 1.0;      // affects income per turn

            let currentEvent = "Market is stable. Start investing!";

            // ----- helper: update UI -----
            function refreshUI() {
                // cash display
                document.getElementById('cashDisplay').textContent = `$${cash.toLocaleString()}`;
                document.getElementById('cashReserve').textContent = `$${cash.toLocaleString()}`;
                document.getElementById('turnDisplay').textContent = `turn ${turn}`;

                // assets list
                const assetsContainer = document.getElementById('assetsContainer');
                if (ownedAssets.length === 0) {
                    assetsContainer.innerHTML = `<div class="asset-row" style="justify-content:center;">‚ú® you don't own any businesses yet. buy from the store!</div>`;
                } else {
                    let html = '';
                    // group by type for simplicity
                    const grouped = {};
                    ownedAssets.forEach(asset => {
                        if (!grouped[asset.typeId]) grouped[asset.typeId] = [];
                        grouped[asset.typeId].push(asset);
                    });

                    for (let typeId in grouped) {
                        const assetType = assetCatalog.find(a => a.id === typeId);
                        const count = grouped[typeId].length;
                        const avgPrice = grouped[typeId].reduce((sum, a) => sum + a.purchasePrice, 0) / count;
                        const incomeEst = assetType.income * count * incomeMultiplier;
                        html += `
                            <div class="asset-row">
                                <div class="asset-info">
                                    <span class="asset-name">${assetType.emoji} ${assetType.name}</span>
                                    <span class="asset-detail">x${count}</span>
                                    <span class="asset-detail">üí∞ ~$${Math.round(incomeEst)}/turn</span>
                                </div>
                                <div class="asset-actions">
                                    <button class="sell-btn" data-type="${typeId}">sell 1</button>
                                </div>
                            </div>
                        `;
                    }
                    assetsContainer.innerHTML = html;

                    // attach sell events
                    document.querySelectorAll('.sell-btn').forEach(btn => {
                        btn.addEventListener('click', (e) => {
                            const typeId = btn.dataset.type;
                            sellAsset(typeId);
                        });
                    });
                }

                // update store items with current price multiplier
                const storeContainer = document.getElementById('storeContainer');
                let storeHtml = '';
                assetCatalog.forEach(asset => {
                    let currentPrice = Math.round(asset.basePrice * priceMultiplier);
                    storeHtml += `
                        <div class="store-card">
                            <h3>${asset.emoji} ${asset.name}</h3>
                            <div style="font-size:1.4rem;">$${currentPrice}</div>
                            <div style="margin:0.2rem 0;">üíµ income $${Math.round(asset.income * incomeMultiplier)}/turn</div>
                            <button class="buy-store-btn" data-type="${asset.id}" data-price="${currentPrice}">buy</button>
                        </div>
                    `;
                });
                storeContainer.innerHTML = storeHtml;

                document.querySelectorAll('.buy-store-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const typeId = btn.dataset.type;
                        const price = parseInt(btn.dataset.price, 10);
                        buyAsset(typeId, price);
                    });
                });

                // update totals
                const totalAssets = ownedAssets.length;
                document.getElementById('assetCount').textContent = totalAssets;

                const totalIncome = ownedAssets.reduce((sum, asset) => {
                    const type = assetCatalog.find(a => a.id === asset.typeId);
                    return sum + (type ? type.income : 0);
                }, 0);
                const modifiedIncome = Math.round(totalIncome * incomeMultiplier);
                document.getElementById('incomePerTurn').textContent = `$${modifiedIncome}`;

                // event message
                document.getElementById('eventMessage').textContent = currentEvent;
            }

            // ----- buy asset -----
            function buyAsset(typeId, price) {
                if (cash < price) {
                    currentEvent = "‚ùå not enough cash!";
                    refreshUI();
                    return;
                }
                const assetType = assetCatalog.find(a => a.id === typeId);
                if (!assetType) return;

                cash -= price;
                ownedAssets.push({ typeId: typeId, purchasePrice: price });
                currentEvent = `‚úÖ bought one ${assetType.name} for $${price}.`;
                refreshUI();
            }

            // ----- sell asset (sell one of type) -----
            function sellAsset(typeId) {
                const index = ownedAssets.findIndex(a => a.typeId === typeId);
                if (index === -1) {
                    currentEvent = "‚ö†Ô∏è no asset of that type to sell.";
                    refreshUI();
                    return;
                }
                // sell at current market price (based on priceMultiplier) ‚Äì you get base * multiplier
                const assetType = assetCatalog.find(a => a.id === typeId);
                const basePrice = assetType.basePrice;
                const sellPrice = Math.round(basePrice * priceMultiplier * 0.9); // 10% depreciation? or just market price: we use full multiplier
                // we'll use full multiplier (you can sell at current value)
                const finalSell = Math.round(basePrice * priceMultiplier);

                cash += finalSell;
                ownedAssets.splice(index, 1);
                currentEvent = `üí∞ sold one ${assetType.name} for $${finalSell}.`;
                refreshUI();
            }

            // ----- end turn: collect income, random event, update multipliers -----
            function endTurn() {
                // collect income
                let totalIncome = ownedAssets.reduce((sum, asset) => {
                    const type = assetCatalog.find(a => a.id === asset.typeId);
                    return sum + (type ? type.income : 0);
                }, 0);
                totalIncome = Math.round(totalIncome * incomeMultiplier);
                cash += totalIncome;

                // random event: change multipliers
                const eventRand = Math.random();
                let eventStr = '';

                if (eventRand < 0.2) {
                    // boom times: price increase, income increase
                    priceMultiplier = Math.min(2.0, priceMultiplier + 0.2);
                    incomeMultiplier = Math.min(2.0, incomeMultiplier + 0.15);
                    eventStr = `üöÄ economic boom! prices +20%, income +15%`;
                } else if (eventRand < 0.4) {
                    // recession
                    priceMultiplier = Math.max(0.5, priceMultiplier - 0.15);
                    incomeMultiplier = Math.max(0.5, incomeMultiplier - 0.1);
                    eventStr = `üìâ recession hits! prices -15%, income -10%`;
                } else if (eventRand < 0.6) {
                    // tax hike
                    cash = Math.max(0, cash - 800);
                    eventStr = `üí∞ tax day! you paid $800 in taxes.`;
                } else if (eventRand < 0.75) {
                    // investor dividend
                    const bonus = Math.round(cash * 0.05);
                    cash += bonus;
                    eventStr = `üéâ dividend payout! +$${bonus}`;
                } else {
                    // market stable, small fluctuation
                    const shift = (Math.random() * 0.1) - 0.05;
                    priceMultiplier = Math.max(0.5, Math.min(2.0, priceMultiplier + shift));
                    eventStr = `üìä market drifts slightly.`;
                }

                // ensure multipliers within bounds
                priceMultiplier = Math.max(0.5, Math.min(2.0, priceMultiplier));
                incomeMultiplier = Math.max(0.5, Math.min(2.0, incomeMultiplier));

                turn++;
                currentEvent = eventStr || "market stable.";

                // check win condition? no, just update
                refreshUI();
            }

            // ----- reset game -----
            function resetGame() {
                cash = 10000;
                turn = 1;
                ownedAssets = [];
                priceMultiplier = 1.0;
                incomeMultiplier = 1.0;
                currentEvent = "Game reset. Build your empire!";
                refreshUI();
            }

            // ----- attach global listeners -----
            document.getElementById('endTurnBtn').addEventListener('click', endTurn);
            document.getElementById('resetBtn').addEventListener('click', resetGame);

            // initial render
            refreshUI();
        })();
    </script>
</body>
</html>