<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#0a0a0f">
    <meta name="description" content="Vibration Composer - Create music from vibration patterns">
    <title>Vibration Composer</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@500;700&display=swap" rel="stylesheet">
    
    <!-- Styles -->
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/timeline.css">
</head>
<body>
    <!-- App Container -->
    <div class="app-container">
        
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <h1 class="app-title">
                    <span class="title-icon">‚ö°</span>
                    Vibration Composer
                </h1>
                <div class="support-indicator" id="supportIndicator">
                    <span class="indicator-dot"></span>
                    <span class="indicator-text">Checking...</span>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            
            <!-- Timeline Section -->
            <section class="timeline-section">
                <div class="timeline-header">
                    <h2 class="section-title">Timeline</h2>
                    <div class="timeline-info">
                        <span class="beat-counter" id="beatCounter">1/16</span>
                        <span class="tempo-display" id="tempoDisplay">120 BPM</span>
                    </div>
                </div>
                
                <div class="timeline-container" id="timelineContainer">
                    <div class="timeline-grid" id="timelineGrid">
                        <!-- Track 1 -->
                        <div class="track" data-track="0">
                            <div class="track-label">
                                <span class="track-name">Track 1</span>
                                <button class="track-clear" data-track="0" aria-label="Clear track 1">
                                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                        <path d="M12 4L4 12M4 4L12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                    </svg>
                                </button>
                            </div>
                            <div class="beat-row" data-track="0">
                                <!-- 16 beats will be generated by JS -->
                            </div>
                        </div>
                        
                        <!-- Track 2 -->
                        <div class="track" data-track="1">
                            <div class="track-label">
                                <span class="track-name">Track 2</span>
                                <button class="track-clear" data-track="1" aria-label="Clear track 2">
                                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                        <path d="M12 4L4 12M4 4L12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                    </svg>
                                </button>
                            </div>
                            <div class="beat-row" data-track="1">
                                <!-- 16 beats will be generated by JS -->
                            </div>
                        </div>
                        
                        <!-- Track 3 -->
                        <div class="track" data-track="2">
                            <div class="track-label">
                                <span class="track-name">Track 3</span>
                                <button class="track-clear" data-track="2" aria-label="Clear track 3">
                                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                        <path d="M12 4L4 12M4 4L12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                    </svg>
                                </button>
                            </div>
                            <div class="beat-row" data-track="2">
                                <!-- 16 beats will be generated by JS -->
                            </div>
                        </div>
                        
                        <!-- Track 4 -->
                        <div class="track" data-track="3">
                            <div class="track-label">
                                <span class="track-name">Track 4</span>
                                <button class="track-clear" data-track="3" aria-label="Clear track 4">
                                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                        <path d="M12 4L4 12M4 4L12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                    </svg>
                                </button>
                            </div>
                            <div class="beat-row" data-track="3">
                                <!-- 16 beats will be generated by JS -->
                            </div>
                        </div>
                        
                        <!-- Playhead -->
                        <div class="playhead" id="playhead"></div>
                    </div>
                </div>
            </section>

            <!-- Controls Section -->
            <section class="controls-section">
                <div class="control-group">
                    <h3 class="control-label">Playback</h3>
                    <div class="playback-controls">
                        <button class="control-btn primary" id="playBtn" aria-label="Play">
                            <svg class="play-icon" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <path d="M8 5V19L19 12L8 5Z" fill="currentColor"/>
                            </svg>
                            <svg class="pause-icon hidden" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <rect x="6" y="5" width="4" height="14" fill="currentColor"/>
                                <rect x="14" y="5" width="4" height="14" fill="currentColor"/>
                            </svg>
                        </button>
                        <button class="control-btn" id="stopBtn" aria-label="Stop">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <rect x="6" y="6" width="12" height="12" fill="currentColor"/>
                            </svg>
                        </button>
                        <button class="control-btn" id="loopBtn" aria-label="Toggle loop">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <path d="M17 2L21 6L17 10M21 6H9C6.79086 6 5 7.79086 5 10V14M7 22L3 18L7 14M3 18H15C17.2091 18 19 16.2091 19 14V10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </button>
                        <button class="control-btn" id="clearBtn" aria-label="Clear all">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <path d="M3 6H21M19 6V20C19 21.1046 18.1046 22 17 22H7C5.89543 22 5 21.1046 5 20V6M8 6V4C8 2.89543 8.89543 2 10 2H14C15.1046 2 16 2.89543 16 4V6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <div class="control-group">
                    <label class="control-label" for="tempoSlider">
                        Tempo
                        <span class="control-value" id="tempoValue">120</span>
                    </label>
                    <input 
                        type="range" 
                        id="tempoSlider" 
                        class="slider" 
                        min="60" 
                        max="180" 
                        value="120" 
                        step="1"
                    >
                    <div class="slider-labels">
                        <span>60</span>
                        <span>180</span>
                    </div>
                </div>

                <div class="control-group">
                    <label class="control-label" for="intensitySlider">
                        Intensity
                        <span class="control-value" id="intensityValue">80%</span>
                    </label>
                    <input 
                        type="range" 
                        id="intensitySlider" 
                        class="slider" 
                        min="0" 
                        max="100" 
                        value="80" 
                        step="5"
                    >
                    <div class="slider-labels">
                        <span>Soft</span>
                        <span>Strong</span>
                    </div>
                </div>
            </section>

            <!-- Presets Section -->
            <section class="presets-section">
                <h3 class="section-title">Presets</h3>
                <div class="presets-grid" id="presetsGrid">
                    <button class="preset-card" data-preset="basic">
                        <div class="preset-icon">ü•Å</div>
                        <div class="preset-name">Basic Beat</div>
                        <div class="preset-pattern">‚Ä¢ ‚Ä¢ ‚Ä¢ ‚Ä¢</div>
                    </button>
                    
                    <button class="preset-card" data-preset="heartbeat">
                        <div class="preset-icon">üíì</div>
                        <div class="preset-name">Heartbeat</div>
                        <div class="preset-pattern">‚Ä¢‚Ä¢ - ‚Ä¢‚Ä¢ -</div>
                    </button>
                    
                    <button class="preset-card" data-preset="morse">
                        <div class="preset-icon">üì°</div>
                        <div class="preset-name">Morse SOS</div>
                        <div class="preset-pattern">‚Ä¢‚Ä¢‚Ä¢ --- ‚Ä¢‚Ä¢‚Ä¢</div>
                    </button>
                    
                    <button class="preset-card" data-preset="gallop">
                        <div class="preset-icon">üêé</div>
                        <div class="preset-name">Gallop</div>
                        <div class="preset-pattern">‚Ä¢-‚Ä¢ ‚Ä¢-‚Ä¢</div>
                    </button>
                    
                    <button class="preset-card" data-preset="techno">
                        <div class="preset-icon">üéµ</div>
                        <div class="preset-name">Techno</div>
                        <div class="preset-pattern">‚Ä¢--‚Ä¢ ‚Ä¢--‚Ä¢</div>
                    </button>
                    
                    <button class="preset-card" data-preset="shaker">
                        <div class="preset-icon">üîä</div>
                        <div class="preset-name">Shaker</div>
                        <div class="preset-pattern">‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢</div>
                    </button>
                </div>
            </section>

        </main>

        <!-- Visual Feedback Overlay -->
        <div class="feedback-overlay" id="feedbackOverlay"></div>

        <!-- Unsupported Message -->
        <div class="unsupported-message hidden" id="unsupportedMessage">
            <div class="unsupported-content">
                <div class="unsupported-icon">‚ö†Ô∏è</div>
                <h2>Vibration Not Supported</h2>
                <p>This device doesn't support the Vibration API. Please use an Android mobile device for the full experience.</p>
                <button class="control-btn primary" id="dismissUnsupported">Continue Anyway</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/vibration-engine.js"></script>
    <script src="js/sequencer.js"></script>
    <script src="js/ui-controller.js"></script>
</body>
</html>
