<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Money Master - Financial Literacy Game</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Roboto:wght@300;400;500&display=swap">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background: linear-gradient(135deg, #1a2980, #26d0ce);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        h1 {
            font-family: 'Poppins', sans-serif;
            font-size: 3rem;
            color: #1a2980;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        h1 i {
            color: #FFD700;
            margin-right: 15px;
        }

        .subtitle {
            font-size: 1.2rem;
            color: #555;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.6;
        }

        .game-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-bottom: 30px;
        }

        @media (max-width: 992px) {
            .game-container {
                grid-template-columns: 1fr;
            }
        }

        .player-info {
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }

        .section-title {
            font-family: 'Poppins', sans-serif;
            font-size: 1.8rem;
            color: #1a2980;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #26d0ce;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 25px;
        }

        .stat-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            border-left: 5px solid;
            transition: transform 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-card.income {
            border-left-color: #4CAF50;
        }

        .stat-card.expenses {
            border-left-color: #F44336;
        }

        .stat-card.savings {
            border-left-color: #2196F3;
        }

        .stat-card.debt {
            border-left-color: #FF9800;
        }

        .stat-value {
            font-size: 2.2rem;
            font-weight: 700;
            color: #1a2980;
        }

        .stat-label {
            font-size: 0.95rem;
            color: #666;
            margin-top: 5px;
        }

        .progress-container {
            margin-top: 25px;
        }

        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }

        .progress-bar {
            height: 20px;
            background-color: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        .savings-progress {
            background: linear-gradient(to right, #2196F3, #21CBF3);
        }

        .financial-health-progress {
            background: linear-gradient(to right, #4CAF50, #8BC34A);
        }

        .game-area {
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }

        .scenario-container {
            background-color: white;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            min-height: 300px;
        }

        .scenario-title {
            font-family: 'Poppins', sans-serif;
            font-size: 1.5rem;
            color: #1a2980;
            margin-bottom: 15px;
        }

        .scenario-text {
            font-size: 1.1rem;
            line-height: 1.6;
            margin-bottom: 20px;
            color: #444;
        }

        .options-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .option-btn {
            padding: 15px;
            background-color: #f5f5f5;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1rem;
            text-align: left;
            cursor: pointer;
            transition: all 0.3s;
        }

        .option-btn:hover {
            background-color: #e8f4ff;
            border-color: #2196F3;
            transform: translateY(-3px);
        }

        .option-btn.selected {
            background-color: #e3f2fd;
            border-color: #2196F3;
            box-shadow: 0 4px 8px rgba(33, 150, 243, 0.2);
        }

        .action-btn {
            display: block;
            width: 100%;
            padding: 18px;
            background: linear-gradient(to right, #1a2980, #26d0ce);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 15px;
            box-shadow: 0 4px 10px rgba(38, 208, 206, 0.3);
        }

        .action-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(38, 208, 206, 0.4);
        }

        .action-btn:disabled {
            background: #cccccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .feedback-container {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            display: none;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        }

        .feedback-title {
            font-family: 'Poppins', sans-serif;
            font-size: 1.3rem;
            margin-bottom: 15px;
            color: #1a2980;
        }

        .feedback-text {
            font-size: 1.1rem;
            line-height: 1.6;
            margin-bottom: 15px;
            padding: 15px;
            border-radius: 8px;
        }

        .feedback-positive {
            background-color: #e8f5e9;
            border-left: 5px solid #4CAF50;
        }

        .feedback-negative {
            background-color: #ffebee;
            border-left: 5px solid #F44336;
        }

        .feedback-info {
            background-color: #e3f2fd;
            border-left: 5px solid #2196F3;
        }

        .game-progress {
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
            margin-bottom: 30px;
        }

        .level-indicator {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .level-info {
            text-align: center;
        }

        .level-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: #1a2980;
        }

        .level-label {
            font-size: 1rem;
            color: #666;
        }

        .xp-bar {
            height: 15px;
            background-color: #e0e0e0;
            border-radius: 7.5px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .xp-fill {
            height: 100%;
            background: linear-gradient(to right, #FFD700, #FFA500);
            border-radius: 7.5px;
            transition: width 0.5s ease;
        }

        .xp-text {
            text-align: center;
            font-weight: 500;
            color: #555;
        }

        .achievements {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
        }

        .achievement-card {
            background-color: white;
            border-radius: 10px;
            padding: 15px;
            display: flex;
            align-items: center;
            gap: 15px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .achievement-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: #FFD700;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
        }

        .achievement-locked {
            background-color: #cccccc;
        }

        .achievement-info h4 {
            font-size: 1rem;
            margin-bottom: 5px;
            color: #1a2980;
        }

        .achievement-info p {
            font-size: 0.85rem;
            color: #666;
        }

        .footer {
            text-align: center;
            padding: 20px;
            color: white;
            font-size: 0.9rem;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background-color: white;
            padding: 30px;
            border-radius: 15px;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            animation: modalFadeIn 0.3s;
        }

        @keyframes modalFadeIn {
            from { opacity: 0; transform: translateY(-50px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .modal-title {
            font-family: 'Poppins', sans-serif;
            font-size: 1.8rem;
            color: #1a2980;
            margin-bottom: 20px;
            text-align: center;
        }

        .modal-text {
            font-size: 1.1rem;
            line-height: 1.6;
            margin-bottom: 25px;
            color: #444;
        }

        .modal-btn {
            display: block;
            width: 100%;
            padding: 15px;
            background: linear-gradient(to right, #1a2980, #26d0ce);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .modal-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(38, 208, 206, 0.4);
        }

        .tabs {
            display: flex;
            border-bottom: 2px solid #eee;
            margin-bottom: 20px;
        }

        .tab-btn {
            padding: 12px 20px;
            background: none;
            border: none;
            font-size: 1rem;
            font-weight: 600;
            color: #666;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }

        .tab-btn.active {
            color: #1a2980;
            border-bottom-color: #1a2980;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .transactions-list {
            max-height: 300px;
            overflow-y: auto;
        }

        .transaction-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 15px;
            border-bottom: 1px solid #eee;
        }

        .transaction-item:last-child {
            border-bottom: none;
        }

        .transaction-income {
            color: #4CAF50;
        }

        .transaction-expense {
            color: #F44336;
        }

        .investment-item {
            padding: 15px;
            background-color: #f9f9f9;
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 4px solid;
        }

        .investment-stock {
            border-left-color: #2196F3;
        }

        .investment-bond {
            border-left-color: #4CAF50;
        }

        .investment-realestate {
            border-left-color: #FF9800;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2.2rem;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .options-container {
                grid-template-columns: 1fr;
            }
            
            .achievements {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-coins"></i> Money Master</h1>
            <p class="subtitle">Learn financial literacy through interactive gameplay. Master budgeting, saving, investing, and smart financial decisions to build your virtual wealth!</p>
        </header>

        <div class="game-container">
            <div class="player-info">
                <h2 class="section-title"><i class="fas fa-user-circle"></i> Financial Profile</h2>
                
                <div class="stats-grid">
                    <div class="stat-card income">
                        <div class="stat-value" id="balance">$5,000</div>
                        <div class="stat-label">Current Balance</div>
                    </div>
                    <div class="stat-card expenses">
                        <div class="stat-value" id="expenses">$2,800</div>
                        <div class="stat-label">Monthly Expenses</div>
                    </div>
                    <div class="stat-card savings">
                        <div class="stat-value" id="savings">$1,200</div>
                        <div class="stat-label">Total Savings</div>
                    </div>
                    <div class="stat-card debt">
                        <div class="stat-value" id="debt">$1,500</div>
                        <div class="stat-label">Current Debt</div>
                    </div>
                </div>
                
                <div class="progress-container">
                    <div class="progress-label">
                        <span>Savings Goal</span>
                        <span id="savings-goal-text">$1,200 / $5,000</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill savings-progress" id="savings-progress" style="width: 24%"></div>
                    </div>
                </div>
                
                <div class="progress-container">
                    <div class="progress-label">
                        <span>Financial Health</span>
                        <span id="financial-health-text">65%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill financial-health-progress" id="financial-health-progress" style="width: 65%"></div>
                    </div>
                </div>
                
                <div class="tabs">
                    <button class="tab-btn active" data-tab="transactions">Transactions</button>
                    <button class="tab-btn" data-tab="investments">Investments</button>
                    <button class="tab-btn" data-tab="goals">Goals</button>
                </div>
                
                <div class="tab-content active" id="transactions-tab">
                    <h3>Recent Transactions</h3>
                    <div class="transactions-list" id="transactions-list">
                        <!-- Transactions will be added here -->
                    </div>
                </div>
                
                <div class="tab-content" id="investments-tab">
                    <h3>Your Investments</h3>
                    <div id="investments-list">
                        <!-- Investments will be added here -->
                    </div>
                </div>
                
                <div class="tab-content" id="goals-tab">
                    <h3>Financial Goals</h3>
                    <div id="goals-list">
                        <!-- Goals will be added here -->
                    </div>
                </div>
            </div>
            
            <div class="game-area">
                <h2 class="section-title"><i class="fas fa-gamepad"></i> Financial Challenge</h2>
                
                <div class="scenario-container">
                    <h3 class="scenario-title" id="scenario-title">Welcome to Money Master!</h3>
                    <p class="scenario-text" id="scenario-text">
                        You're starting with $5,000. Your monthly income is $3,500, and your expenses are $2,800. 
                        Your goal is to build your savings, reduce debt, and make smart financial decisions. 
                        Let's begin with your first financial decision!
                    </p>
                    
                    <div class="options-container" id="options-container">
                        <!-- Options will be generated here -->
                    </div>
                    
                    <button class="action-btn" id="submit-btn" disabled>Submit Decision</button>
                </div>
                
                <div class="feedback-container" id="feedback-container">
                    <h3 class="feedback-title">Financial Feedback</h3>
                    <div class="feedback-text" id="feedback-text"></div>
                    <button class="action-btn" id="next-btn">Continue</button>
                </div>
            </div>
        </div>
        
        <div class="game-progress">
            <h2 class="section-title"><i class="fas fa-chart-line"></i> Game Progress</h2>
            
            <div class="level-indicator">
                <div class="level-info">
                    <div class="level-number" id="level-number">1</div>
                    <div class="level-label">Level</div>
                </div>
                
                <div style="flex: 1; margin: 0 20px;">
                    <div class="xp-bar">
                        <div class="xp-fill" id="xp-fill" style="width: 30%"></div>
                    </div>
                    <div class="xp-text" id="xp-text">150 / 500 XP</div>
                </div>
                
                <div class="level-info">
                    <div class="level-number" id="scenario-number">1</div>
                    <div class="level-label">Scenario</div>
                </div>
            </div>
            
            <h3 style="margin-bottom: 15px; color: #1a2980;">Achievements</h3>
            <div class="achievements" id="achievements-container">
                <!-- Achievements will be added here -->
            </div>
        </div>
        
        <div class="footer">
            <p>Money Master - Financial Literacy Game &copy; 2026 | Learn real-world financial skills through interactive gameplay</p>
        </div>
    </div>

    <!-- Welcome Modal -->
    <div class="modal" id="welcome-modal">
        <div class="modal-content">
            <h2 class="modal-title"><i class="fas fa-graduation-cap"></i> Welcome to Money Master!</h2>
            <div class="modal-text">
                <p>In this game, you'll learn essential financial skills through interactive scenarios.</p>
                <p>You'll start with $5,000 and make decisions about:</p>
                <ul style="margin-left: 20px; margin-top: 10px;">
                    <li>Budgeting and expense management</li>
                    <li>Saving and investing</li>
                    <li>Managing debt</li>
                    <li>Making smart financial choices</li>
                </ul>
                <p>Your goal is to build your financial health score, increase your savings, and unlock achievements!</p>
            </div>
            <button class="modal-btn" id="start-game-btn">Start Learning!</button>
        </div>
    </div>

    <script>
        // Game Data
        const gameData = {
            player: {
                balance: 5000,
                monthlyIncome: 3500,
                expenses: 2800,
                savings: 1200,
                debt: 1500,
                creditScore: 650,
                financialHealth: 65,
                level: 1,
                xp: 150,
                xpToNextLevel: 500,
                scenariosCompleted: 0
            },
            
            achievements: [
                { id: 1, name: "First Savings", description: "Save your first $1,000", unlocked: true, icon: "fas fa-piggy-bank" },
                { id: 2, name: "Budget Master", description: "Complete 5 budgeting scenarios", unlocked: false, icon: "fas fa-chart-pie" },
                { id: 3, name: "Debt Free", description: "Reduce debt to $0", unlocked: false, icon: "fas fa-hand-holding-usd" },
                { id: 4, name: "Investment Guru", description: "Make 3 successful investments", unlocked: false, icon: "fas fa-chart-line" },
                { id: 5, name: "Emergency Fund", description: "Save 3 months of expenses", unlocked: false, icon: "fas fa-umbrella" },
                { id: 6, name: "Financial Expert", description: "Reach financial health of 90%", unlocked: false, icon: "fas fa-award" }
            ],
            
            transactions: [
                { id: 1, description: "Monthly Income", amount: 3500, type: "income", date: "Today" },
                { id: 2, description: "Rent Payment", amount: -1200, type: "expense", date: "Today" },
                { id: 3, description: "Groceries", amount: -400, type: "expense", date: "Today" },
                { id: 4, description: "Utilities", amount: -200, type: "expense", date: "Today" },
                { id: 5, description: "Savings Deposit", amount: -500, type: "savings", date: "Yesterday" }
            ],
            
            investments: [
                { id: 1, name: "Stock Market ETF", type: "stock", value: 500, return: 8, risk: "Medium" },
                { id: 2, name: "Government Bonds", type: "bond", value: 300, return: 3, risk: "Low" }
            ],
            
            goals: [
                { id: 1, name: "Emergency Fund", target: 5000, current: 1200, completed: false },
                { id: 2, name: "Pay Off Credit Card", target: 1500, current: 0, completed: false },
                { id: 3, name: "Vacation Fund", target: 2000, current: 0, completed: false }
            ],
            
            scenarios: [
                {
                    id: 1,
                    title: "Budgeting Decision",
                    text: "You receive an unexpected bonus of $500. How would you allocate this money?",
                    options: [
                        { id: 1, text: "Put $400 into savings and use $100 for a nice dinner", financialImpact: { savings: 400, balance: 100 }, feedback: "Great choice! Prioritizing savings while allowing a small reward is smart budgeting.", xp: 50 },
                        { id: 2, text: "Spend all $500 on a new gaming console", financialImpact: { expenses: 500 }, feedback: "While treats are okay, spending a windfall entirely on non-essentials misses an opportunity to improve your financial health.", xp: 20 },
                        { id: 3, text: "Use all $500 to pay down credit card debt", financialImpact: { debt: -500 }, feedback: "Excellent! Paying down high-interest debt gives you a guaranteed return and reduces financial stress.", xp: 60 },
                        { id: 4, text: "Split equally between savings, debt, and fun money", financialImpact: { savings: 167, debt: -167, balance: 166 }, feedback: "Good balanced approach! You're addressing multiple financial priorities at once.", xp: 45 }
                    ],
                    category: "budgeting"
                },
                {
                    id: 2,
                    title: "Investment Choice",
                    text: "You have $1,000 to invest. Which option would you choose?",
                    options: [
                        { id: 1, text: "High-yield savings account (2% return, no risk)", financialImpact: { savings: 1000, investmentReturn: 20 }, feedback: "Safe choice! A high-yield savings account provides liquidity and security for your emergency fund.", xp: 40 },
                        { id: 2, text: "Stock market ETF (average 7% return, medium risk)", financialImpact: { savings: -1000, investments: 1000, investmentReturn: 70 }, feedback: "Good for long-term growth! Stocks historically outperform savings accounts over 5+ years.", xp: 60 },
                        { id: 3, text: "Cryptocurrency (potential 20% return, high risk)", financialImpact: { savings: -1000, investments: 1000, investmentReturn: 200, risk: "high" }, feedback: "Very risky! Cryptocurrency is volatile and should only be a small part of a diversified portfolio.", xp: 30 },
                        { id: 4, text: "Pay down high-interest credit card debt (15% guaranteed return)", financialImpact: { debt: -1000 }, feedback: "Smart move! Paying off high-interest debt gives you a guaranteed 15% return, which is hard to beat with investments.", xp: 70 }
                    ],
                    category: "investing"
                },
                {
                    id: 3,
                    title: "Emergency Expense",
                    text: "Your car needs $800 in repairs. How do you handle this unexpected expense?",
                    options: [
                        { id: 1, text: "Use your emergency fund", financialImpact: { savings: -800, expenses: 800 }, feedback: "Perfect! This is exactly what an emergency fund is for. You avoid going into debt for unexpected expenses.", xp: 60 },
                        { id: 2, text: "Put it on a credit card and pay over time", financialImpact: { debt: 800, expenses: 800 }, feedback: "This will cost you more in interest. Try to build an emergency fund for future unexpected expenses.", xp: 25 },
                        { id: 3, text: "Skip the repair and hope for the best", financialImpact: { risk: "high" }, feedback: "Risky! Delaying necessary repairs could lead to more expensive problems later.", xp: 15 },
                        { id: 4, text: "Borrow from your retirement account", financialImpact: { savings: -800, expenses: 800, retirementPenalty: 100 }, feedback: "Borrowing from retirement should be a last resort due to penalties and lost growth potential.", xp: 20 }
                    ],
                    category: "saving"
                },
                {
                    id: 4,
                    title: "Housing Decision",
                    text: "You're considering moving to a new apartment. What's your approach?",
                    options: [
                        { id: 1, text: "Choose a place where rent is 25% of your monthly income", financialImpact: { expenses: -200 }, feedback: "Excellent! Keeping housing costs below 30% of income is a key financial stability rule.", xp: 65 },
                        { id: 2, text: "Get a luxury apartment that's 50% of your income", financialImpact: { expenses: 500 }, feedback: "This leaves little for other expenses and savings. High housing costs are a common financial stressor.", xp: 20 },
                        { id: 3, text: "Get a roommate to split costs", financialImpact: { expenses: -400 }, feedback: "Smart! Sharing housing costs frees up money for other financial goals.", xp: 55 },
                        { id: 4, text: "Buy a house with a small down payment", financialImpact: { debt: 200000, expenses: 300 }, feedback: "Homeownership can build wealth long-term, but make sure you're financially ready for all the costs.", xp: 40 }
                    ],
                    category: "budgeting"
                },
                {
                    id: 5,
                    title: "Income Opportunity",
                    text: "You're offered a side job that pays $300/month but requires 10 hours/week. What do you do?",
                    options: [
                        { id: 1, text: "Take it and put all extra income toward debt", financialImpact: { monthlyIncome: 300, debt: -300 }, feedback: "Great plan! Using extra income to accelerate debt payoff saves you interest payments.", xp: 60 },
                        { id: 2, text: "Take it and split between savings and fun money", financialImpact: { monthlyIncome: 300, savings: 150, balance: 150 }, feedback: "Good balance! You're building savings while enjoying some of your extra effort.", xp: 50 },
                        { id: 3, text: "Decline to protect your work-life balance", financialImpact: {}, feedback: "Respecting your time is important. Just make sure your budget works with your current income.", xp: 35 },
                        { id: 4, text: "Take it but spend all extra income on dining out", financialImpact: { monthlyIncome: 300, expenses: 300 }, feedback: "You're working harder but not improving your financial situation. Consider allocating some to savings or debt.", xp: 25 }
                    ],
                    category: "income"
                }
            ],
            
            currentScenarioIndex: 0,
            selectedOption: null,
            gameActive: true
        };

        // DOM Elements
        const balanceEl = document.getElementById('balance');
        const expensesEl = document.getElementById('expenses');
        const savingsEl = document.getElementById('savings');
        const debtEl = document.getElementById('debt');
        const savingsProgressEl = document.getElementById('savings-progress');
        const savingsGoalTextEl = document.getElementById('savings-goal-text');
        const financialHealthProgressEl = document.getElementById('financial-health-progress');
        const financialHealthTextEl = document.getElementById('financial-health-text');
        const transactionsListEl = document.getElementById('transactions-list');
        const investmentsListEl = document.getElementById('investments-list');
        const goalsListEl = document.getElementById('goals-list');
        const scenarioTitleEl = document.getElementById('scenario-title');
        const scenarioTextEl = document.getElementById('scenario-text');
        const optionsContainerEl = document.getElementById('options-container');
        const submitBtnEl = document.getElementById('submit-btn');
        const feedbackContainerEl = document.getElementById('feedback-container');
        const feedbackTextEl = document.getElementById('feedback-text');
        const nextBtnEl = document.getElementById('next-btn');
        const levelNumberEl = document.getElementById('level-number');
        const xpFillEl = document.getElementById('xp-fill');
        const xpTextEl = document.getElementById('xp-text');
        const scenarioNumberEl = document.getElementById('scenario-number');
        const achievementsContainerEl = document.getElementById('achievements-container');
        const welcomeModalEl = document.getElementById('welcome-modal');
        const startGameBtnEl = document.getElementById('start-game-btn');
        const tabButtons = document.querySelectorAll('.tab-btn');

        // Initialize the game
        function initGame() {
            // Show welcome modal
            welcomeModalEl.style.display = 'flex';
            
            // Set up event listeners
            startGameBtnEl.addEventListener('click', startGame);
            submitBtnEl.addEventListener('click', submitDecision);
            nextBtnEl.addEventListener('click', nextScenario);
            
            // Set up tab switching
            tabButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const tabId = this.dataset.tab;
                    
                    // Update active tab button
                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Show active tab content
                    document.querySelectorAll('.tab-content').forEach(content => {
                        content.classList.remove('active');
                    });
                    document.getElementById(`${tabId}-tab`).classList.add('active');
                });
            });
            
            // Load initial UI
            updatePlayerStats();
            updateTransactions();
            updateInvestments();
            updateGoals();
            updateAchievements();
            
            // Load first scenario
            loadScenario(0);
        }

        // Start the game
        function startGame() {
            welcomeModalEl.style.display = 'none';
            gameData.gameActive = true;
        }

        // Update player stats UI
        function updatePlayerStats() {
            const p = gameData.player;
            
            // Format currency
            const formatter = new Intl.NumberFormat('en-US', {
                style: 'currency',
                currency: 'USD',
                minimumFractionDigits: 0
            });
            
            balanceEl.textContent = formatter.format(p.balance);
            expensesEl.textContent = formatter.format(gameData.transactions
                .filter(t => t.type === 'expense')
                .reduce((sum, t) => sum + Math.abs(t.amount), 0));
            savingsEl.textContent = formatter.format(p.savings);
            debtEl.textContent = formatter.format(p.debt);
            
            // Update savings progress
            const savingsGoal = 5000;
            const savingsProgress = Math.min(100, (p.savings / savingsGoal) * 100);
            savingsProgressEl.style.width = `${savingsProgress}%`;
            savingsGoalTextEl.textContent = `${formatter.format(p.savings)} / ${formatter.format(savingsGoal)}`;
            
            // Update financial health progress
            financialHealthProgressEl.style.width = `${p.financialHealth}%`;
            financialHealthTextEl.textContent = `${p.financialHealth}%`;
            
            // Update level and XP
            levelNumberEl.textContent = p.level;
            const xpProgress = (p.xp / p.xpToNextLevel) * 100;
            xpFillEl.style.width = `${xpProgress}%`;
            xpTextEl.textContent = `${p.xp} / ${p.xpToNextLevel} XP`;
            
            // Update scenario number
            scenarioNumberEl.textContent = gameData.currentScenarioIndex + 1;
        }

        // Update transactions list
        function updateTransactions() {
            transactionsListEl.innerHTML = '';
            
            gameData.transactions.forEach(transaction => {
                const transactionEl = document.createElement('div');
                transactionEl.className = 'transaction-item';
                
                const amountClass = transaction.amount > 0 ? 'transaction-income' : 'transaction-expense';
                const formattedAmount = new Intl.NumberFormat('en-US', {
                    style: 'currency',
                    currency: 'USD',
                    minimumFractionDigits: 0
                }).format(transaction.amount);
                
                transactionEl.innerHTML = `
                    <div>
                        <strong>${transaction.description}</strong>
                        <div style="font-size: 0.85rem; color: #888;">${transaction.date}</div>
                    </div>
                    <div class="${amountClass}" style="font-weight: 600;">${formattedAmount}</div>
                `;
                
                transactionsListEl.appendChild(transactionEl);
            });
        }

        // Update investments list
        function updateInvestments() {
            investmentsListEl.innerHTML = '';
            
            if (gameData.investments.length === 0) {
                investmentsListEl.innerHTML = '<p style="color: #666; text-align: center;">No investments yet. Complete investment scenarios to start building your portfolio!</p>';
                return;
            }
            
            gameData.investments.forEach(investment => {
                const investmentEl = document.createElement('div');
                investmentEl.className = `investment-item investment-${investment.type}`;
                
                investmentEl.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                        <h4 style="margin: 0;">${investment.name}</h4>
                        <span style="font-weight: 600; color: #1a2980;">${new Intl.NumberFormat('en-US', {
                            style: 'currency',
                            currency: 'USD',
                            minimumFractionDigits: 0
                        }).format(investment.value)}</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; font-size: 0.9rem;">
                        <span>Expected Return: <strong>${investment.return}%</strong></span>
                        <span>Risk: <strong>${investment.risk}</strong></span>
                    </div>
                `;
                
                investmentsListEl.appendChild(investmentEl);
            });
        }

        // Update goals list
        function updateGoals() {
            goalsListEl.innerHTML = '';
            
            gameData.goals.forEach(goal => {
                const goalProgress = Math.min(100, (goal.current / goal.target) * 100);
                const goalEl = document.createElement('div');
                goalEl.className = 'stat-card';
                goalEl.style.marginBottom = '15px';
                
                goalEl.innerHTML = `
                    <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                        <strong>${goal.name}</strong>
                        <span>${goal.current.toLocaleString('en-US', {style: 'currency', currency: 'USD', minimumFractionDigits: 0})} / ${goal.target.toLocaleString('en-US', {style: 'currency', currency: 'USD', minimumFractionDigits: 0})}</span>
                    </div>
                    <div class="progress-bar" style="height: 10px;">
                        <div class="progress-fill" style="width: ${goalProgress}%; background-color: #4CAF50;"></div>
                    </div>
                    <div style="text-align: right; font-size: 0.85rem; margin-top: 5px; color: ${goal.completed ? '#4CAF50' : '#666'}">
                        ${goal.completed ? '✓ Completed' : `${Math.round(goalProgress)}%`}
                    </div>
                `;
                
                goalsListEl.appendChild(goalEl);
            });
        }

        // Update achievements
        function updateAchievements() {
            achievementsContainerEl.innerHTML = '';
            
            gameData.achievements.forEach(achievement => {
                const achievementEl = document.createElement('div');
                achievementEl.className = 'achievement-card';
                
                achievementEl.innerHTML = `
                    <div class="achievement-icon ${achievement.unlocked ? '' : 'achievement-locked'}">
                        <i class="${achievement.icon}"></i>
                    </div>
                    <div class="achievement-info">
                        <h4>${achievement.name}</h4>
                        <p>${achievement.description}</p>
                        <div style="font-size: 0.8rem; color: ${achievement.unlocked ? '#4CAF50' : '#999'}">
                            ${achievement.unlocked ? '✓ Unlocked' : 'Locked'}
                        </div>
                    </div>
                `;
                
                achievementsContainerEl.appendChild(achievementEl);
            });
        }

        // Load a scenario
        function loadScenario(index) {
            const scenario = gameData.scenarios[index];
            gameData.currentScenarioIndex = index;
            gameData.selectedOption = null;
            
            // Update UI
            scenarioTitleEl.textContent = scenario.title;
            scenarioTextEl.textContent = scenario.text;
            
            // Clear previous options
            optionsContainerEl.innerHTML = '';
            
            // Create option buttons
            scenario.options.forEach((option, i) => {
                const optionBtn = document.createElement('button');
                optionBtn.className = 'option-btn';
                optionBtn.textContent = `${String.fromCharCode(65 + i)}) ${option.text}`;
                optionBtn.dataset.optionId = option.id;
                
                optionBtn.addEventListener('click', () => {
                    // Remove selected class from all options
                    document.querySelectorAll('.option-btn').forEach(btn => {
                        btn.classList.remove('selected');
                    });
                    
                    // Add selected class to clicked option
                    optionBtn.classList.add('selected');
                    gameData.selectedOption = option;
                    
                    // Enable submit button
                    submitBtnEl.disabled = false;
                });
                
                optionsContainerEl.appendChild(optionBtn);
            });
            
            // Reset buttons
            submitBtnEl.disabled = true;
            feedbackContainerEl.style.display = 'none';
            
            // Update scenario number
            scenarioNumberEl.textContent = index + 1;
        }

        // Submit decision
        function submitDecision() {
            if (!gameData.selectedOption) return;
            
            const option = gameData.selectedOption;
            const player = gameData.player;
            
            // Apply financial impact
            if (option.financialImpact) {
                Object.keys(option.financialImpact).forEach(key => {
                    if (key === 'savings') {
                        player.savings += option.financialImpact[key];
                        if (option.financialImpact[key] > 0) {
                            gameData.transactions.unshift({
                                id: Date.now(),
                                description: "Savings Deposit",
                                amount: option.financialImpact[key],
                                type: "savings",
                                date: "Now"
                            });
                        } else if (option.financialImpact[key] < 0) {
                            gameData.transactions.unshift({
                                id: Date.now(),
                                description: "Savings Withdrawal",
                                amount: option.financialImpact[key],
                                type: "savings",
                                date: "Now"
                            });
                        }
                    } else if (key === 'debt') {
                        player.debt += option.financialImpact[key];
                        if (option.financialImpact[key] < 0) {
                            gameData.transactions.unshift({
                                id: Date.now(),
                                description: "Debt Payment",
                                amount: option.financialImpact[key],
                                type: "debt",
                                date: "Now"
                            });
                        }
                    } else if (key === 'balance') {
                        player.balance += option.financialImpact[key];
                        if (option.financialImpact[key] > 0) {
                            gameData.transactions.unshift({
                                id: Date.now(),
                                description: "Extra Income",
                                amount: option.financialImpact[key],
                                type: "income",
                                date: "Now"
                            });
                        } else if (option.financialImpact[key] < 0) {
                            gameData.transactions.unshift({
                                id: Date.now(),
                                description: "Personal Spending",
                                amount: option.financialImpact[key],
                                type: "expense",
                                date: "Now"
                            });
                        }
                    } else if (key === 'expenses') {
                        // Update monthly expenses
                        const expenseChange = option.financialImpact[key];
                        
                        if (expenseChange > 0) {
                            gameData.transactions.unshift({
                                id: Date.now(),
                                description: "Monthly Expense Increase",
                                amount: -expenseChange,
                                type: "expense",
                                date: "Monthly"
                            });
                        } else if (expenseChange < 0) {
                            gameData.transactions.unshift({
                                id: Date.now(),
                                description: "Monthly Expense Decrease",
                                amount: expenseChange,
                                type: "expense",
                                date: "Monthly"
                            });
                        }
                    } else if (key === 'monthlyIncome') {
                        player.monthlyIncome += option.financialImpact[key];
                        gameData.transactions.unshift({
                            id: Date.now(),
                            description: "Additional Monthly Income",
                            amount: option.financialImpact[key],
                            type: "income",
                            date: "Monthly"
                        });
                    } else if (key === 'investments') {
                        // Add to investments
                        const investmentAmount = option.financialImpact[key];
                        gameData.investments.push({
                            id: Date.now(),
                            name: "New Investment",
                            type: "stock",
                            value: investmentAmount,
                            return: 5,
                            risk: "Medium"
                        });
                        gameData.transactions.unshift({
                            id: Date.now(),
                            description: "Investment Purchase",
                            amount: -investmentAmount,
                            type: "investment",
                            date: "Now"
                        });
                    } else if (key === 'investmentReturn') {
                        // Simulate investment return
                        player.savings += option.financialImpact[key];
                        if (option.financialImpact[key] > 0) {
                            gameData.transactions.unshift({
                                id: Date.now(),
                                description: "Investment Return",
                                amount: option.financialImpact[key],
                                type: "income",
                                date: "Now"
                            });
                        }
                    }
                });
            }
            
            // Update player stats
            updatePlayerStats();
            updateTransactions();
            updateInvestments();
            updateGoals();
            
            // Calculate and update financial health
            updateFinancialHealth();
            
            // Award XP
            player.xp += option.xp;
            player.scenariosCompleted++;
            
            // Check for level up
            if (player.xp >= player.xpToNextLevel) {
                player.level++;
                player.xp -= player.xpToNextLevel;
                player.xpToNextLevel = Math.floor(player.xpToNextLevel * 1.5);
                
                // Show level up message
                showLevelUpModal();
            }
            
            // Check for achievements
            checkAchievements();
            
            // Show feedback
            feedbackTextEl.textContent = option.feedback;
            feedbackTextEl.className = 'feedback-text';
            
            // Determine feedback type based on XP awarded
            if (option.xp >= 60) {
                feedbackTextEl.classList.add('feedback-positive');
            } else if (option.xp >= 40) {
                feedbackTextEl.classList.add('feedback-info');
            } else {
                feedbackTextEl.classList.add('feedback-negative');
            }
            
            feedbackContainerEl.style.display = 'block';
            submitBtnEl.disabled = true;
        }

        // Update financial health score
        function updateFinancialHealth() {
            const player = gameData.player;
            
            // Calculate factors
            const savingsRatio = Math.min(1, player.savings / (player.monthlyIncome * 3)); // 3-month emergency fund
            const debtRatio = Math.max(0, 1 - (player.debt / (player.monthlyIncome * 12))); // Debt to annual income
            const expenseRatio = Math.max(0, 1 - (Math.abs(gameData.transactions
                .filter(t => t.type === 'expense')
                .reduce((sum, t) => sum + Math.abs(t.amount), 0) - 2800) / 1000)); // Expense stability
            
            // Update financial health (weighted average)
            player.financialHealth = Math.min(100, Math.max(0, 
                (savingsRatio * 40) + 
                (debtRatio * 40) + 
                (expenseRatio * 20)
            ));
            
            // Update UI
            updatePlayerStats();
        }

        // Check for unlocked achievements
        function checkAchievements() {
            const player = gameData.player;
            let updated = false;
            
            // Check each achievement
            gameData.achievements.forEach(achievement => {
                if (achievement.unlocked) return;
                
                let unlock = false;
                
                switch(achievement.id) {
                    case 1: // First Savings
                        unlock = player.savings >= 1000;
                        break;
                    case 2: // Budget Master
                        unlock = player.scenariosCompleted >= 5;
                        break;
                    case 3: // Debt Free
                        unlock = player.debt <= 0;
                        break;
                    case 4: // Investment Guru
                        unlock = gameData.investments.length >= 3;
                        break;
                    case 5: // Emergency Fund
                        unlock = player.savings >= (player.monthlyIncome * 3);
                        break;
                    case 6: // Financial Expert
                        unlock = player.financialHealth >= 90;
                        break;
                }
                
                if (unlock) {
                    achievement.unlocked = true;
                    updated = true;
                    showAchievementModal(achievement);
                }
            });
            
            if (updated) {
                updateAchievements();
            }
        }

        // Show level up modal
        function showLevelUpModal() {
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.style.display = 'flex';
            
            modal.innerHTML = `
                <div class="modal-content">
                    <h2 class="modal-title"><i class="fas fa-trophy"></i> Level Up!</h2>
                    <div class="modal-text">
                        <p>Congratulations! You've reached level <strong>${gameData.player.level}</strong>!</p>
                        <p>Your financial knowledge is growing. Keep making smart decisions to build your wealth!</p>
                    </div>
                    <button class="modal-btn" id="close-level-modal">Continue</button>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            modal.querySelector('#close-level-modal').addEventListener('click', () => {
                document.body.removeChild(modal);
            });
        }

        // Show achievement modal
        function showAchievementModal(achievement) {
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.style.display = 'flex';
            
            modal.innerHTML = `
                <div class="modal-content">
                    <h2 class="modal-title"><i class="${achievement.icon}"></i> Achievement Unlocked!</h2>
                    <div class="modal-text">
                        <p style="text-align: center; font-size: 1.3rem; color: #1a2980; margin-bottom: 15px;">
                            <strong>${achievement.name}</strong>
                        </p>
                        <p>${achievement.description}</p>
                        <p>Great work! Your financial skills are improving.</p>
                    </div>
                    <button class="modal-btn" id="close-achievement-modal">Continue</button>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            modal.querySelector('#close-achievement-modal').addEventListener('click', () => {
                document.body.removeChild(modal);
            });
        }

        // Next scenario
        function nextScenario() {
            // Hide feedback
            feedbackContainerEl.style.display = 'none';
            
            // Move to next scenario or loop back
            const nextIndex = (gameData.currentScenarioIndex + 1) % gameData.scenarios.length;
            loadScenario(nextIndex);
        }

        // Start the game when page loads
        document.addEventListener('DOMContentLoaded', initGame);
    </script>
</body>
</html>