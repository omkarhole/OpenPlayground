<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        :root {
  --hue-adjust: 0;
  --angle: 0deg;
  --angle-1: 0deg;
  --angle-2: 0deg;
  --angle-3: 0deg;
  --angle-4: 0deg;
  --angle-5: 0deg;
  --angle-6: 0deg;
  --angle-7: 0deg;
  --angle-8: 0deg;
  --angle-9: 0deg;
}

.gradient-box {
  margin: 0px auto;
  height: 350px;
}

.angle-bg {
  background: linear-gradient(calc(52deg + var(--angle) + var(--angle-1)), rgba(163, 163, 163, 0.09) 0%, rgba(163, 163, 163, 0.09) 33.3%,rgba(100, 100, 100, 0.09) 33.3%, rgba(100, 100, 100, 0.09) 66.6%,rgba(162, 162, 162, 0.09) 66.6%, rgba(162, 162, 162, 0.09) 99%),linear-gradient(calc(258deg + var(--angle) + var(--angle-2)), rgba(193, 193, 193, 0.06) 0%, rgba(193, 193, 193, 0.06) 33.3%,rgba(169, 169, 169, 0.06) 33.3%, rgba(169, 169, 169, 0.06) 66.6%,rgba(92, 92, 92, 0.06) 66.6%, rgba(92, 92, 92, 0.06) 99%),linear-gradient(calc(129deg + var(--angle) + var(--angle-3)), rgba(45, 45, 45, 0.03) 0%, rgba(45, 45, 45, 0.03) 33.3%,rgba(223, 223, 223, 0.03) 33.3%, rgba(223, 223, 223, 0.03) 66.6%,rgba(173, 173, 173, 0.03) 66.6%, rgba(173, 173, 173, 0.03) 99%),linear-gradient(calc(280deg + var(--angle) + var(--angle-4)), rgba(226, 226, 226, 0.06) 0%, rgba(226, 226, 226, 0.06) 33.3%,rgba(81, 81, 81, 0.06) 33.3%, rgba(81, 81, 81, 0.06) 66.6%,rgba(186, 186, 186, 0.06) 66.6%, rgba(186, 186, 186, 0.06) 99%),linear-gradient(calc(85deg + var(--angle) + var(--angle-5)), rgba(225, 225, 225, 0.04) 0%, rgba(225, 225, 225, 0.04) 33.3%,rgba(95, 95, 95, 0.04) 33.3%, rgba(95, 95, 95, 0.04) 66.6%,rgba(39, 39, 39, 0.04) 66.6%, rgba(39, 39, 39, 0.04) 99%),linear-gradient(calc(128deg + var(--angle) + var(--angle-6)), rgba(184, 184, 184, 0.06) 0%, rgba(184, 184, 184, 0.06) 33.3%,rgba(0, 0, 0, 0.06) 33.3%, rgba(0, 0, 0, 0.06) 66.6%,rgba(140, 140, 140, 0.06) 66.6%, rgba(140, 140, 140, 0.06) 99.89999999999999%),linear-gradient(calc(323deg + var(--angle) + var(--angle-7)), rgba(40, 40, 40, 0.07) 0%, rgba(40, 40, 40, 0.07) 33.3%,rgba(214, 214, 214, 0.07) 33.3%, rgba(214, 214, 214, 0.07) 66.6%,rgba(190, 190, 190, 0.07) 66.6%, rgba(190, 190, 190, 0.07) 99.89999999999999%),linear-gradient(calc(61deg + var(--angle) + var(--angle-8)), rgba(230, 230, 230, 0) 0%, rgba(230, 230, 230, 0) 33.3%,rgba(241, 241, 241, 0) 33.3%, rgba(241, 241, 241, 0) 66.6%,rgba(55, 55, 55, 0) 66.6%, rgba(55, 55, 55, 0) 99%),linear-gradient(calc(var(--angle) + var(--angle-9)), hsl(calc(240 + var(--hue-adjust)), 77%, 52%),hsl(calc(194 + var(--hue-adjust)), 91%, 49%));
}
    </style>
</head>
<body>
    <div class="container" id="app">
  <div class="row">
    <div class="col-sm text-center mt-4">
      <h2>Gradient Playground</h2>
      <h5 class="font-weight-light">Customize a CSS gradient through the magic of CSS variables.</h5>
    </div>
  </div>
  <div class="row mt-4">
    <div class="col-sm text-center">
      <div class="gradient-box rounded angle-bg"></div>
    </div>
  </div>
  
  <div class="row mt-4">
    <div class="col-6">
      <h6 class="mb-3">Rotate All</h6>
      <input type="range" class="form-control-range" min="0" max="360" v-model="angleAdjust" >
    </div>
    <div class="col-6">
      <h6 class="mb-3">Hue</h6>
      <input type="range" class="form-control-range mb-3" min="0" max="360" v-model="hueAdjust" > 
    </div>
  </div>
  
  <div class="row mt-4">
    <div class="col text-center">
      <button class="btn btn-outline-primary mr-1" @click="spin()">Spin (Keep Clicking)!</button>
      <button class="btn btn-primary mr-1" @click="randomize()">Randomize Angles</button>
      <button class="btn btn-primary border-0 mr-1 angle-bg" @click="copyCSS()">Copy CSS</button>
    </div>
  </div>

  <div class="row mt-4">
    <div class="col-sm text-center">
    </div>
  </div>
  <div id="copyBox"></div>
</div>

<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
<script >
    toastr.options = {
  "closeButton": false,
  "debug": false,
  "newestOnTop": false,
  "progressBar": false,
  "positionClass": "toast-top-right",
  "preventDuplicates": false,
  "onclick": null,
  "showDuration": "300",
  "hideDuration": "1000",
  "timeOut": "2000",
  "extendedTimeOut": "1000",
  "showEasing": "swing",
  "hideEasing": "linear",
  "showMethod": "fadeIn",
  "hideMethod": "fadeOut"
}

var vm = new Vue({
  el : '#app',
  data : {
    hueAdjust : 0,
    angleAdjust: 0,
  },
  methods : {
     setVar(vName, newVal){
        document.querySelector(':root').style.setProperty(vName, newVal)
     },
    copyCSS(){
      let gradientString = this.getCurrentGradient();
      
      let copyBox = document.querySelector('#copyBox');
      copyBox.style['display'] = 'block';
      copyBox.innerHTML = gradientString;
      selectText('copyBox')
      document.execCommand('copy');
      copyBox.style['display'] = 'none';
      toastr.success('CSS Copied to Clipboard')
    },
    spin(){
      let intervalID = window.setInterval(this.rotateAll, 10);
      
      // The random stop time determines how long it spins for
      window.setTimeout(function(){
        clearInterval(intervalID)
      }, getRandomIntRange(1000,3000))
    },
    rotateAll(){
      this.angleAdjust += 1
      this.angleAdjust = this.angleAdjust % 360;
    },
    randomize(){
      for(var i=1; i<10;i++){
        this.setVar(`--angle-${i}`, getRandomInt(360) + 'deg');
      }
    },
    getCurrentGradient(){
      let element = document.querySelector('.gradient-box')
      let styles = window.getComputedStyle(element);
      let gradientString = styles.getPropertyValue('background-image');
      return gradientString;
    } 
  },
  watch : {
     hueAdjust : function(newVal, oldVal){
       this.setVar('--hue-adjust', newVal);
     },
    angleAdjust : function(newVal, oldVal){
      this.setVar('--angle', newVal + 'deg')
    }
  },
})

// https://stackoverflow.com/questions/985272/selecting-text-in-an-element-akin-to-highlighting-with-your-mouse
function selectText(node) {
    node = document.getElementById(node);

    if (document.body.createTextRange) {
        const range = document.body.createTextRange();
        range.moveToElementText(node);
        range.select();
    } else if (window.getSelection) {
        const selection = window.getSelection();
        const range = document.createRange();
        range.selectNodeContents(node);
        selection.removeAllRanges();
        selection.addRange(range);
    } else {
        console.warn("Could not select text in node: Unsupported browser.");
    }
}

function getRandomInt(max) {
  return Math.floor(Math.random() * Math.floor(max));
}

function getRandomIntRange(min, max) {
  return Math.floor(Math.random() * Math.floor(max-min)) + min;
}
</script>
</body>
</html>