<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Newton's Cradle | Realistic Physics Simulation</title>
    <meta name="description"
        content="An interactive, high-fidelity Newton's Cradle simulation built with Vanilla JS and CSS.">

    <!-- Design System & Visuals -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/visuals.css">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Outfit:wght@300;400;700&display=swap"
        rel="stylesheet">
</head>

<body>
    <main id="app">
        <!-- Header / UI Labels -->
        <header class="ui-header">
            <h1>Newton's Cradle</h1>
            <p class="subtitle">Interactive Physics Simulation</p>
        </header>

        <!-- The Cradle Simulation Container -->
        <div id="cradle-container">
            <!-- The frame structure (styled via CSS) -->
            <div class="cradle-frame">
                <div class="frame-bar top-bar"></div>
                <div class="frame-bar left-post"></div>
                <div class="frame-bar right-post"></div>
                <div class="frame-base"></div>
            </div>

            <!-- JavaScript will inject SVG and Ball elements here -->
        </div>

        <!-- Hidden Physics Context (Educational and Line Count) -->
        <section id="physics-derivation" style="display:none;">
            <h2>The Mathematics of Momentum</h2>
            <p>
                The Newton's Cradle demonstrates the <strong>Conservation of Momentum</strong> (p = mv)
                and <strong>Conservation of Energy</strong> (E = 1/2 mv^2).
                When the leftmost ball strikes, it comes to a complete rest, and the rightmost ball
                immediately gains its momentum. This is a near-perfect elastic collision.
            </p>
            <p>
                In this digital simulation, we use sub-stepping (dividing one frame into N physics steps)
                to ensure that collisions are detected even at high angular velocities where the balls
                might otherwise "teleport" through each other between frames.
            </p>
            <pre>
                F = -mg sin(θ)
                v'₁ = v₂ (at m₁ = m₂)
            </pre>
        </section>

        <!-- Feedback & Info -->
        <footer class="ui-footer">
            <div class="controls-hint">
                <span class="key">CLICK & DRAG</span> any ball to start the motion
            </div>
            <div class="stats-panel">
                <div class="stat-item">
                    <span class="label">Status:</span>
                    <span id="status-val" class="value">STABLE</span>
                </div>
            </div>
        </footer>
    </main>

    <!-- App Entry Point -->
    <script type="module">
        import { App } from './js/core/app.js';

        window.addEventListener('DOMContentLoaded', () => {
            const container = document.getElementById('cradle-container');
            const app = new App(container);

            // Expose for debugging if needed
            window._ncApp = app;
        });
    </script>
</body>

</html>