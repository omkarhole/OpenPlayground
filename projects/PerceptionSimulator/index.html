<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perception Simulator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --pastel-blue: #c1e3ff;
            --pastel-pink: #ffd6e7;
            --pastel-green: #d4f4dd;
            --pastel-purple: #e2d4f7;
            --pastel-yellow: #fff9c4;
            --pastel-orange: #ffdfba;
            --pastel-teal: #b2ebf2;
            --text-dark: #5a5a5a;
            --text-light: #888;
            --shadow: rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        body {
            background-color: #f9f7ff;
            color: var(--text-dark);
            line-height: 1.6;
            overflow-x: hidden;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        header {
            background: linear-gradient(135deg, var(--pastel-purple), var(--pastel-teal));
            padding: 2.5rem 0;
            text-align: center;
            box-shadow: 0 5px 20px var(--shadow);
            border-radius: 0 0 30px 30px;
            margin-bottom: 2.5rem;
        }

        .logo {
            font-size: 3.2rem;
            color: var(--text-dark);
            margin-bottom: 0.8rem;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
        }

        h1 {
            font-size: 2.8rem;
            margin-bottom: 0.5rem;
            color: #5d5b7a;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
        }

        .tagline {
            font-size: 1.3rem;
            color: var(--text-light);
            max-width: 800px;
            margin: 0 auto 1.5rem;
        }

        /* Navigation */
        .simulator-nav {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 1.5rem;
        }

        .simulator-nav button {
            background-color: rgba(255, 255, 255, 0.9);
            border: none;
            padding: 12px 24px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-dark);
            transition: var(--transition);
            box-shadow: 0 4px 10px var(--shadow);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .simulator-nav button:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px var(--shadow);
        }

        .simulator-nav button.active {
            background-color: #8a7fcc;
            color: white;
        }

        /* Main Content */
        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 3rem;
        }

        @media (max-width: 1024px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }

        .simulator-section {
            background-color: white;
            border-radius: 25px;
            padding: 30px;
            box-shadow: 0 10px 25px var(--shadow);
            transition: var(--transition);
            min-height: 600px;
            display: flex;
            flex-direction: column;
        }

        .simulator-section:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px var(--shadow);
        }

        .section-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }

        .section-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--pastel-pink), var(--pastel-orange));
            border-radius: 15px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.8rem;
            color: #5d5b7a;
        }

        .section-title {
            font-size: 1.8rem;
            color: #5d5b7a;
        }

        .section-description {
            color: var(--text-light);
            margin-bottom: 25px;
            line-height: 1.7;
        }

        /* Simulator Areas */
        .simulator-area {
            background-color: #f9f9f9;
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 25px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 300px;
        }

        .simulator-area h3 {
            margin-bottom: 20px;
            color: #5d5b7a;
            text-align: center;
        }

        /* Control Panels */
        .control-panel {
            background-color: #f5f5f5;
            border-radius: 20px;
            padding: 25px;
            margin-top: 15px;
        }

        .control-group {
            margin-bottom: 20px;
        }

        .control-group:last-child {
            margin-bottom: 0;
        }

        .control-label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--text-dark);
            font-size: 1.1rem;
        }

        .slider-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .slider {
            flex-grow: 1;
            height: 12px;
            border-radius: 10px;
            background: #ddd;
            outline: none;
            opacity: 0.9;
            transition: var(--transition);
        }

        .slider:hover {
            opacity: 1;
        }

        .slider::-webkit-slider-thumb {
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #8a7fcc;
            cursor: pointer;
            box-shadow: 0 3px 8px rgba(0,0,0,0.2);
        }

        .slider-value {
            min-width: 40px;
            text-align: center;
            font-weight: 600;
            color: #8a7fcc;
        }

        .button-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background-color: #8a7fcc;
            color: white;
        }

        .btn-secondary {
            background-color: var(--pastel-blue);
            color: var(--text-dark);
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px var(--shadow);
        }

        .checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
        }

        .checkbox-label {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            padding: 8px 12px;
            background-color: white;
            border-radius: 8px;
            transition: var(--transition);
        }

        .checkbox-label:hover {
            background-color: #f0f0f0;
        }

        .checkbox-label input {
            cursor: pointer;
        }

        /* Visual Stimuli */
        .stimulus-container {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        #motionCanvas {
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .shape-container {
            display: flex;
            gap: 30px;
            flex-wrap: wrap;
            justify-content: center;
            margin-top: 20px;
        }

        .perception-shape {
            width: 120px;
            height: 120px;
            border-radius: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: var(--transition);
            cursor: pointer;
            box-shadow: 0 5px 15px var(--shadow);
        }

        .perception-shape:hover {
            transform: scale(1.05);
        }

        .audio-container {
            width: 100%;
            text-align: center;
        }

        .audio-wave {
            width: 100%;
            height: 120px;
            background-color: #f0f0f0;
            border-radius: 10px;
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
        }

        .wave-bar {
            position: absolute;
            bottom: 0;
            width: 8px;
            background-color: #8a7fcc;
            border-radius: 4px 4px 0 0;
            transition: height 0.1s ease;
        }

        .cognitive-test {
            width: 100%;
            text-align: center;
        }

        .test-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin: 20px 0;
        }

        .test-cell {
            aspect-ratio: 1;
            background-color: #f0f0f0;
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.5rem;
            cursor: pointer;
            transition: var(--transition);
        }

        .test-cell.active {
            background-color: #8a7fcc;
            color: white;
        }

        .test-cell:hover {
            transform: scale(1.05);
        }

        /* Results Panel */
        .results-panel {
            background-color: #f5f5f5;
            border-radius: 20px;
            padding: 20px;
            margin-top: 20px;
        }

        .results-title {
            font-size: 1.3rem;
            margin-bottom: 15px;
            color: #5d5b7a;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid #ddd;
        }

        .result-label {
            font-weight: 600;
        }

        .result-value {
            color: #8a7fcc;
            font-weight: 600;
        }

        /* Footer */
        footer {
            background: linear-gradient(135deg, var(--pastel-green), var(--pastel-blue));
            padding: 2.5rem 0;
            text-align: center;
            border-radius: 30px 30px 0 0;
            margin-top: 3rem;
        }

        .footer-content {
            max-width: 800px;
            margin: 0 auto;
        }

        .footer-content p {
            margin-bottom: 1.2rem;
            font-size: 1.1rem;
        }

        .perception-fact {
            background-color: rgba(255, 255, 255, 0.7);
            padding: 15px;
            border-radius: 15px;
            margin: 20px 0;
            font-style: italic;
        }

        .social-icons {
            display: flex;
            justify-content: center;
            gap: 25px;
            margin-top: 1.5rem;
        }

        .social-icons a {
            color: var(--text-dark);
            font-size: 1.5rem;
            transition: var(--transition);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .social-icons a:hover {
            color: #8a7fcc;
            transform: translateY(-5px);
            box-shadow: 0 5px 15px var(--shadow);
        }

        .copyright {
            margin-top: 2rem;
            font-size: 0.9rem;
            color: var(--text-light);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .logo {
                font-size: 2.5rem;
            }
            
            h1 {
                font-size: 2.2rem;
            }
            
            .simulator-nav button {
                padding: 10px 15px;
                font-size: 1rem;
            }
            
            .section-title {
                font-size: 1.5rem;
            }
            
            .simulator-section {
                padding: 20px;
            }
            
            .test-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        /* Animations */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 2s infinite;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="logo">
                <i class="fas fa-brain"></i> Perception Simulator
            </div>
            <h1>Explore How Your Brain Interprets Reality</h1>
            <p class="tagline">Discover the fascinating ways your senses gather information and your brain constructs your experience of the world through interactive simulations.</p>
            
            <nav class="simulator-nav">
                <button class="active" data-section="visual">
                    <i class="fas fa-eye"></i> Visual Perception
                </button>
                <button data-section="auditory">
                    <i class="fas fa-ear"></i> Auditory Perception
                </button>
                <button data-section="cognitive">
                    <i class="fas fa-lightbulb"></i> Cognitive Perception
                </button>
                <button data-section="multisensory">
                    <i class="fas fa-sync-alt"></i> Multisensory Integration
                </button>
            </nav>
        </div>
    </header>

    <main class="container">
        <div class="main-content">
            <!-- Visual Perception Simulator -->
            <section class="simulator-section" id="visual-section">
                <div class="section-header">
                    <div class="section-icon">
                        <i class="fas fa-eye"></i>
                    </div>
                    <div>
                        <h2 class="section-title">Visual Perception Simulator</h2>
                        <p class="section-description">Explore how your brain processes visual information, filling in gaps and making assumptions about shape, color, and motion.</p>
                    </div>
                </div>
                
                <div class="simulator-area">
                    <h3>Motion-Induced Blindness</h3>
                    <div class="stimulus-container">
                        <canvas id="motionCanvas" width="500" height="300"></canvas>
                        <div class="shape-container">
                            <div class="perception-shape" id="shape1" style="background-color: #ff9e9e;"></div>
                            <div class="perception-shape" id="shape2" style="background-color: #9eff9e;"></div>
                            <div class="perception-shape" id="shape3" style="background-color: #9e9eff;"></div>
                        </div>
                    </div>
                </div>
                
                <div class="control-panel">
                    <div class="control-group">
                        <label class="control-label">Motion Speed</label>
                        <div class="slider-container">
                            <input type="range" min="1" max="20" value="10" class="slider" id="motionSpeed">
                            <span class="slider-value" id="motionSpeedValue">10</span>
                        </div>
                    </div>
                    
                    <div class="control-group">
                        <label class="control-label">Background Pattern</label>
                        <div class="checkbox-group">
                            <label class="checkbox-label">
                                <input type="radio" name="patternType" value="spiral" checked> Spiral
                            </label>
                            <label class="checkbox-label">
                                <input type="radio" name="patternType" value="grid"> Grid
                            </label>
                            <label class="checkbox-label">
                                <input type="radio" name="patternType" value="dots"> Dots
                            </label>
                        </div>
                    </div>
                    
                    <div class="control-group">
                        <label class="control-label">Stare at the center dot and notice what happens to the colored shapes</label>
                        <div class="button-group">
                            <button class="btn btn-primary" id="startMotion">
                                <i class="fas fa-play"></i> Start Motion
                            </button>
                            <button class="btn btn-secondary" id="resetVisual">
                                <i class="fas fa-redo"></i> Reset
                            </button>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Auditory Perception Simulator -->
            <section class="simulator-section" id="auditory-section">
                <div class="section-header">
                    <div class="section-icon">
                        <i class="fas fa-ear"></i>
                    </div>
                    <div>
                        <h2 class="section-title">Auditory Perception Simulator</h2>
                        <p class="section-description">Discover how your brain interprets sounds, filters noise, and creates the experience of hearing.</p>
                    </div>
                </div>
                
                <div class="simulator-area">
                    <h3>Shepard Tone Illusion</h3>
                    <div class="audio-container">
                        <div class="audio-wave" id="audioWave">
                            <!-- Wave bars will be generated by JavaScript -->
                        </div>
                        <p id="audioStatus">Press "Play Tone" to start the auditory illusion</p>
                        <p class="perception-fact" style="font-size: 0.9rem; margin-top: 10px;">
                            <i class="fas fa-info-circle"></i> This auditory illusion creates the perception of a constantly rising tone that never actually increases in pitch.
                        </p>
                    </div>
                </div>
                
                <div class="control-panel">
                    <div class="control-group">
                        <label class="control-label">Tone Frequency</label>
                        <div class="slider-container">
                            <input type="range" min="200" max="800" value="400" class="slider" id="toneFrequency">
                            <span class="slider-value" id="toneFrequencyValue">400 Hz</span>
                        </div>
                    </div>
                    
                    <div class="control-group">
                        <label class="control-label">Illusion Type</label>
                        <div class="checkbox-group">
                            <label class="checkbox-label">
                                <input type="radio" name="illusionType" value="rising" checked> Rising Tone
                            </label>
                            <label class="checkbox-label">
                                <input type="radio" name="illusionType" value="falling"> Falling Tone
                            </label>
                            <label class="checkbox-label">
                                <input type="radio" name="illusionType" value="oscillating"> Oscillating
                            </label>
                        </div>
                    </div>
                    
                    <div class="control-group">
                        <div class="button-group">
                            <button class="btn btn-primary" id="playTone">
                                <i class="fas fa-play"></i> Play Tone
                            </button>
                            <button class="btn btn-secondary" id="stopTone">
                                <i class="fas fa-stop"></i> Stop Tone
                            </button>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Cognitive Perception Simulator -->
            <section class="simulator-section" id="cognitive-section">
                <div class="section-header">
                    <div class="section-icon">
                        <i class="fas fa-lightbulb"></i>
                    </div>
                    <div>
                        <h2 class="section-title">Cognitive Perception Simulator</h2>
                        <p class="section-description">Test how attention, memory, and expectation shape what you perceive and remember.</p>
                    </div>
                </div>
                
                <div class="simulator-area">
                    <h3>Selective Attention Test</h3>
                    <div class="cognitive-test">
                        <p id="testInstructions">Count how many times the blue cells flash. Ignore the yellow cells.</p>
                        <div class="test-grid" id="testGrid">
                            <!-- Test cells will be generated by JavaScript -->
                        </div>
                        <div style="margin-top: 20px;">
                            <p>Your count: <span id="userCount">0</span></p>
                            <p>Actual count: <span id="actualCount">0</span></p>
                        </div>
                    </div>
                </div>
                
                <div class="control-panel">
                    <div class="control-group">
                        <label class="control-label">Test Difficulty</label>
                        <div class="slider-container">
                            <input type="range" min="1" max="3" value="2" class="slider" id="testDifficulty">
                            <span class="slider-value" id="testDifficultyValue">Medium</span>
                        </div>
                    </div>
                    
                    <div class="control-group">
                        <label class="control-label">Count Target</label>
                        <div class="checkbox-group">
                            <label class="checkbox-label">
                                <input type="radio" name="countTarget" value="blue" checked> Blue Cells
                            </label>
                            <label class="checkbox-label">
                                <input type="radio" name="countTarget" value="yellow"> Yellow Cells
                            </label>
                        </div>
                    </div>
                    
                    <div class="control-group">
                        <div class="button-group">
                            <button class="btn btn-primary" id="startTest">
                                <i class="fas fa-play"></i> Start Test
                            </button>
                            <button class="btn btn-secondary" id="checkTest">
                                <i class="fas fa-check"></i> Check Answer
                            </button>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Multisensory Integration Simulator -->
            <section class="simulator-section" id="multisensory-section">
                <div class="section-header">
                    <div class="section-icon">
                        <i class="fas fa-sync-alt"></i>
                    </div>
                    <div>
                        <h2 class="section-title">Multisensory Integration</h2>
                        <p class="section-description">Explore how combining information from different senses changes perception.</p>
                    </div>
                </div>
                
                <div class="simulator-area">
                    <h3>McGurk Effect Simulator</h3>
                    <div class="stimulus-container">
                        <div style="width: 100%; text-align: center; margin-bottom: 20px;">
                            <div style="width: 200px; height: 150px; background: linear-gradient(135deg, var(--pastel-blue), var(--pastel-purple)); border-radius: 20px; margin: 0 auto; display: flex; justify-content: center; align-items: center; font-size: 3rem;">
                                <i class="fas fa-user" id="mouthIcon"></i>
                            </div>
                        </div>
                        <p id="multisensoryStatus">Press "Play Audio" to experience the McGurk effect</p>
                        <p class="perception-fact" style="font-size: 0.9rem; margin-top: 10px;">
                            <i class="fas fa-info-circle"></i> The McGurk effect demonstrates how visual information (lip movements) can change what you think you're hearing.
                        </p>
                    </div>
                </div>
                
                <div class="control-panel">
                    <div class="control-group">
                        <label class="control-label">Audio Syllable</label>
                        <div class="checkbox-group">
                            <label class="checkbox-label">
                                <input type="radio" name="audioSyllable" value="ba" checked> "Ba"
                            </label>
                            <label class="checkbox-label">
                                <input type="radio" name="audioSyllable" value="fa"> "Fa"
                            </label>
                            <label class="checkbox-label">
                                <input type="radio" name="audioSyllable" value="va"> "Va"
                            </label>
                        </div>
                    </div>
                    
                    <div class="control-group">
                        <label class="control-label">Visual Syllable (Lip Movements)</label>
                        <div class="checkbox-group">
                            <label class="checkbox-label">
                                <input type="radio" name="visualSyllable" value="ba"> "Ba"
                            </label>
                            <label class="checkbox-label">
                                <input type="radio" name="visualSyllable" value="fa" checked> "Fa"
                            </label>
                            <label class="checkbox-label">
                                <input type="radio" name="visualSyllable" value="va"> "Va"
                            </label>
                        </div>
                    </div>
                    
                    <div class="control-group">
                        <div class="button-group">
                            <button class="btn btn-primary" id="playMcGurk">
                                <i class="fas fa-play"></i> Play Audio
                            </button>
                            <button class="btn btn-secondary" id="repeatMcGurk">
                                <i class="fas fa-redo"></i> Repeat
                            </button>
                        </div>
                    </div>
                </div>
            </section>
        </div>
        
        <!-- Results Panel -->
        <div class="results-panel">
            <h3 class="results-title">
                <i class="fas fa-chart-line"></i> Perception Results
            </h3>
            <div class="result-item">
                <span class="result-label">Visual Accuracy:</span>
                <span class="result-value" id="visualAccuracy">0%</span>
            </div>
            <div class="result-item">
                <span class="result-label">Auditory Detection:</span>
                <span class="result-value" id="auditoryDetection">0%</span>
            </div>
            <div class="result-item">
                <span class="result-label">Cognitive Performance:</span>
                <span class="result-value" id="cognitivePerformance">0%</span>
            </div>
            <div class="result-item">
                <span class="result-label">Multisensory Integration:</span>
                <span class="result-value" id="multisensoryIntegration">0%</span>
            </div>
        </div>
    </main>

    <footer>
        <div class="container footer-content">
            <h3>Understanding Perception</h3>
            <p>Perception is not a direct recording of the world, but rather a constructed experience created by your brain based on sensory inputs, past experiences, and expectations.</p>
            
            <div class="perception-fact">
                <i class="fas fa-brain"></i> Did you know? Your brain processes visual information in about 13 milliseconds - that's faster than the blink of an eye!
            </div>
            
            <p>This simulator demonstrates how easily our perceptions can be manipulated and how our brains fill in gaps to create a coherent experience of reality.</p>
            
            <div class="social-icons">
                <a href="#"><i class="fab fa-twitter"></i></a>
                <a href="#"><i class="fab fa-facebook"></i></a>
                <a href="#"><i class="fab fa-instagram"></i></a>
                <a href="#"><i class="fab fa-youtube"></i></a>
            </div>
            
            <p class="copyright">&copy; 2026 Perception Simulator. Created for educational purposes. All simulations based on established psychological phenomena.</p>
        </div>
    </footer>

    <script>
        // DOM Elements
        const navButtons = document.querySelectorAll('.simulator-nav button');
        const simulatorSections = document.querySelectorAll('.simulator-section');
        
        // Results elements
        const visualAccuracyElement = document.getElementById('visualAccuracy');
        const auditoryDetectionElement = document.getElementById('auditoryDetection');
        const cognitivePerformanceElement = document.getElementById('cognitivePerformance');
        const multisensoryIntegrationElement = document.getElementById('multisensoryIntegration');
        
        // Results tracking
        let perceptionResults = {
            visual: 0,
            auditory: 0,
            cognitive: 0,
            multisensory: 0
        };
        
        // Navigation between sections
        navButtons.forEach(button => {
            button.addEventListener('click', () => {
                const sectionId = button.getAttribute('data-section');
                
                // Update active button
                navButtons.forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');
                
                // Show the selected section
                simulatorSections.forEach(section => {
                    section.style.display = 'none';
                });
                
                document.getElementById(`${sectionId}-section`).style.display = 'flex';
            });
        });
        
        // Initialize by showing visual section
        document.getElementById('visual-section').style.display = 'flex';
        document.getElementById('auditory-section').style.display = 'none';
        document.getElementById('cognitive-section').style.display = 'none';
        document.getElementById('multisensory-section').style.display = 'none';

        // --------------------------
        // VISUAL PERCEPTION SIMULATOR
        // --------------------------
        const motionCanvas = document.getElementById('motionCanvas');
        const motionCtx = motionCanvas.getContext('2d');
        const motionSpeedSlider = document.getElementById('motionSpeed');
        const motionSpeedValue = document.getElementById('motionSpeedValue');
        const patternTypeRadios = document.querySelectorAll('input[name="patternType"]');
        const startMotionBtn = document.getElementById('startMotion');
        const resetVisualBtn = document.getElementById('resetVisual');
        const shapes = [
            document.getElementById('shape1'),
            document.getElementById('shape2'),
            document.getElementById('shape3')
        ];
        
        let isMotionActive = false;
        let motionAngle = 0;
        let animationId = null;
        let shapeVisible = [true, true, true];
        
        // Update slider value display
        motionSpeedSlider.addEventListener('input', function() {
            motionSpeedValue.textContent = this.value;
        });
        
        // Start motion illusion
        startMotionBtn.addEventListener('click', function() {
            if (isMotionActive) {
                isMotionActive = false;
                cancelAnimationFrame(animationId);
                this.innerHTML = '<i class="fas fa-play"></i> Start Motion';
                perceptionResults.visual = Math.min(100, perceptionResults.visual + 10);
                updateResults();
            } else {
                isMotionActive = true;
                this.innerHTML = '<i class="fas fa-pause"></i> Stop Motion';
                animateMotion();
            }
        });
        
        // Reset visual simulator
        resetVisualBtn.addEventListener('click', function() {
            isMotionActive = false;
            cancelAnimationFrame(animationId);
            startMotionBtn.innerHTML = '<i class="fas fa-play"></i> Start Motion';
            motionAngle = 0;
            shapeVisible = [true, true, true];
            drawMotionBackground();
            updateShapes();
        });
        
        // Draw motion background
        function drawMotionBackground() {
            const width = motionCanvas.width;
            const height = motionCanvas.height;
            const centerX = width / 2;
            const centerY = height / 2;
            
            motionCtx.clearRect(0, 0, width, height);
            
            // Get selected pattern type
            let patternType = 'spiral';
            patternTypeRadios.forEach(radio => {
                if (radio.checked) patternType = radio.value;
            });
            
            // Draw background based on pattern type
            motionCtx.fillStyle = '#f0f0f0';
            motionCtx.fillRect(0, 0, width, height);
            
            // Draw center dot
            motionCtx.beginPath();
            motionCtx.arc(centerX, centerY, 8, 0, Math.PI * 2);
            motionCtx.fillStyle = '#5d5b7a';
            motionCtx.fill();
            
            // Draw pattern
            motionCtx.strokeStyle = '#8a7fcc';
            motionCtx.lineWidth = 2;
            
            if (patternType === 'spiral') {
                // Draw spiral pattern
                for (let i = 0; i < 100; i++) {
                    const angle = 0.1 * i + motionAngle;
                    const radius = 2 * i;
                    
                    const x = centerX + radius * Math.cos(angle);
                    const y = centerY + radius * Math.sin(angle);
                    
                    if (i === 0) {
                        motionCtx.beginPath();
                        motionCtx.moveTo(x, y);
                    } else {
                        motionCtx.lineTo(x, y);
                    }
                }
                motionCtx.stroke();
                
            } else if (patternType === 'grid') {
                // Draw rotating grid
                motionCtx.save();
                motionCtx.translate(centerX, centerY);
                motionCtx.rotate(motionAngle);
                
                for (let i = -5; i <= 5; i++) {
                    // Vertical lines
                    motionCtx.beginPath();
                    motionCtx.moveTo(i * 40, -200);
                    motionCtx.lineTo(i * 40, 200);
                    motionCtx.stroke();
                    
                    // Horizontal lines
                    motionCtx.beginPath();
                    motionCtx.moveTo(-200, i * 40);
                    motionCtx.lineTo(200, i * 40);
                    motionCtx.stroke();
                }
                
                motionCtx.restore();
                
            } else if (patternType === 'dots') {
                // Draw rotating dots
                motionCtx.save();
                motionCtx.translate(centerX, centerY);
                motionCtx.rotate(motionAngle);
                
                for (let i = 0; i < 50; i++) {
                    const angle = (Math.PI * 2 * i) / 50;
                    const radius = 100 + Math.sin(motionAngle * 2 + i * 0.5) * 30;
                    
                    const x = radius * Math.cos(angle);
                    const y = radius * Math.sin(angle);
                    
                    motionCtx.beginPath();
                    motionCtx.arc(x, y, 4, 0, Math.PI * 2);
                    motionCtx.fillStyle = '#8a7fcc';
                    motionCtx.fill();
                }
                
                motionCtx.restore();
            }
            
            // Occasionally make shapes "disappear" (motion-induced blindness effect)
            if (isMotionActive && Math.random() < 0.02) {
                const randomShape = Math.floor(Math.random() * 3);
                shapeVisible[randomShape] = !shapeVisible[randomShape];
                updateShapes();
            }
        }
        
        // Update shape visibility
        function updateShapes() {
            shapes.forEach((shape, index) => {
                if (shapeVisible[index]) {
                    shape.style.opacity = '1';
                    shape.style.boxShadow = '0 5px 15px rgba(0,0,0,0.1)';
                } else {
                    shape.style.opacity = '0.3';
                    shape.style.boxShadow = 'none';
                }
            });
        }
        
        // Animate motion
        function animateMotion() {
            if (!isMotionActive) return;
            
            const speed = parseInt(motionSpeedSlider.value) / 50;
            motionAngle += speed;
            
            drawMotionBackground();
            
            animationId = requestAnimationFrame(animateMotion);
        }
        
        // Initialize visual simulator
        drawMotionBackground();
        
        // --------------------------
        // AUDITORY PERCEPTION SIMULATOR
        // --------------------------
        const toneFrequencySlider = document.getElementById('toneFrequency');
        const toneFrequencyValue = document.getElementById('toneFrequencyValue');
        const illusionTypeRadios = document.querySelectorAll('input[name="illusionType"]');
        const playToneBtn = document.getElementById('playTone');
        const stopToneBtn = document.getElementById('stopTone');
        const audioWave = document.getElementById('audioWave');
        const audioStatus = document.getElementById('audioStatus');
        
        let audioContext;
        let oscillator;
        let isPlaying = false;
        let waveBars = [];
        
        // Create wave visualization
        function createWaveBars() {
            audioWave.innerHTML = '';
            waveBars = [];
            
            for (let i = 0; i < 50; i++) {
                const bar = document.createElement('div');
                bar.className = 'wave-bar';
                bar.style.left = `${i * (100 / 50)}%`;
                bar.style.height = `${Math.random() * 30 + 20}%`;
                audioWave.appendChild(bar);
                waveBars.push(bar);
            }
        }
        
        // Animate wave bars
        function animateWave() {
            if (!isPlaying) return;
            
            waveBars.forEach((bar, i) => {
                const time = Date.now() / 1000;
                const height = 20 + Math.sin(time * 2 + i * 0.5) * 30;
                bar.style.height = `${height}%`;
                
                // Change color based on frequency
                const frequency = parseInt(toneFrequencySlider.value);
                const hue = (frequency / 10) % 360;
                bar.style.backgroundColor = `hsl(${hue}, 70%, 60%)`;
            });
            
            requestAnimationFrame(animateWave);
        }
        
        // Update slider value display
        toneFrequencySlider.addEventListener('input', function() {
            toneFrequencyValue.textContent = `${this.value} Hz`;
            
            if (isPlaying && oscillator) {
                oscillator.frequency.setValueAtTime(parseInt(this.value), audioContext.currentTime);
            }
        });
        
        // Play tone
        playToneBtn.addEventListener('click', function() {
            if (!isPlaying) {
                try {
                    // Create audio context if needed
                    if (!audioContext) {
                        audioContext = new (window.AudioContext || window.webkitAudioContext)();
                    }
                    
                    // Create oscillator
                    oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();
                    
                    // Configure oscillator
                    oscillator.type = 'sine';
                    oscillator.frequency.setValueAtTime(parseInt(toneFrequencySlider.value), audioContext.currentTime);
                    
                    // Get illusion type
                    let illusionType = 'rising';
                    illusionTypeRadios.forEach(radio => {
                        if (radio.checked) illusionType = radio.value;
                    });
                    
                    // Apply illusion effect
                    if (illusionType === 'rising') {
                        // Create rising tone illusion
                        const now = audioContext.currentTime;
                        oscillator.frequency.exponentialRampToValueAtTime(parseInt(toneFrequencySlider.value) * 1.5, now + 2);
                        oscillator.frequency.setValueAtTime(parseInt(toneFrequencySlider.value), now + 2.01);
                    } else if (illusionType === 'falling') {
                        // Create falling tone illusion
                        const now = audioContext.currentTime;
                        oscillator.frequency.exponentialRampToValueAtTime(parseInt(toneFrequencySlider.value) * 0.5, now + 2);
                        oscillator.frequency.setValueAtTime(parseInt(toneFrequencySlider.value), now + 2.01);
                    } else if (illusionType === 'oscillating') {
                        // Create oscillating tone
                        oscillator.frequency.setValueAtTime(parseInt(toneFrequencySlider.value), audioContext.currentTime);
                        oscillator.frequency.linearRampToValueAtTime(parseInt(toneFrequencySlider.value) * 1.2, audioContext.currentTime + 1);
                        oscillator.frequency.linearRampToValueAtTime(parseInt(toneFrequencySlider.value) * 0.8, audioContext.currentTime + 2);
                        oscillator.frequency.linearRampToValueAtTime(parseInt(toneFrequencySlider.value), audioContext.currentTime + 3);
                    }
                    
                    // Connect nodes
                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    
                    // Set volume
                    gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                    
                    // Start playing
                    oscillator.start();
                    isPlaying = true;
                    
                    // Update UI
                    audioStatus.textContent = 'Playing Shepard tone illusion... Focus on whether the tone seems to constantly rise.';
                    playToneBtn.innerHTML = '<i class="fas fa-pause"></i> Pause Tone';
                    
                    // Start wave animation
                    animateWave();
                    
                    // Update results
                    perceptionResults.auditory = Math.min(100, perceptionResults.auditory + 15);
                    updateResults();
                    
                } catch (error) {
                    console.error('Audio error:', error);
                    audioStatus.textContent = 'Audio playback not supported in this browser. Try Chrome or Firefox.';
                }
            } else {
                // Stop playing
                if (oscillator) {
                    oscillator.stop();
                    oscillator = null;
                }
                
                isPlaying = false;
                playToneBtn.innerHTML = '<i class="fas fa-play"></i> Play Tone';
                audioStatus.textContent = 'Tone stopped. Press "Play Tone" to experience the illusion again.';
            }
        });
        
        // Stop tone
        stopToneBtn.addEventListener('click', function() {
            if (oscillator) {
                oscillator.stop();
                oscillator = null;
            }
            
            isPlaying = false;
            playToneBtn.innerHTML = '<i class="fas fa-play"></i> Play Tone';
            audioStatus.textContent = 'Tone stopped. Press "Play Tone" to experience the illusion again.';
        });
        
        // Initialize wave visualization
        createWaveBars();
        
        // --------------------------
        // COGNITIVE PERCEPTION SIMULATOR
        // --------------------------
        const testDifficultySlider = document.getElementById('testDifficulty');
        const testDifficultyValue = document.getElementById('testDifficultyValue');
        const countTargetRadios = document.querySelectorAll('input[name="countTarget"]');
        const startTestBtn = document.getElementById('startTest');
        const checkTestBtn = document.getElementById('checkTest');
        const testGrid = document.getElementById('testGrid');
        const testInstructions = document.getElementById('testInstructions');
        const userCountElement = document.getElementById('userCount');
        const actualCountElement = document.getElementById('actualCount');
        
        let testActive = false;
        let testInterval;
        let userCount = 0;
        let actualCount = 0;
        let targetColor = 'blue';
        let difficulty = 2;
        let flashSequence = [];
        let currentFlashIndex = 0;
        
        // Update difficulty display
        testDifficultySlider.addEventListener('input', function() {
            difficulty = parseInt(this.value);
            const difficultyText = ['Easy', 'Medium', 'Hard'][difficulty - 1];
            testDifficultyValue.textContent = difficultyText;
        });
        
        // Initialize test grid
        function initializeTestGrid() {
            testGrid.innerHTML = '';
            
            // Create 5x5 grid (25 cells)
            for (let i = 0; i < 25; i++) {
                const cell = document.createElement('div');
                cell.className = 'test-cell';
                cell.dataset.index = i;
                cell.textContent = i + 1;
                testGrid.appendChild(cell);
            }
        }
        
        // Start cognitive test
        startTestBtn.addEventListener('click', function() {
            if (testActive) {
                // Stop test if already active
                clearInterval(testInterval);
                testActive = false;
                this.innerHTML = '<i class="fas fa-play"></i> Start Test';
                testInstructions.textContent = 'Test stopped. Press "Start Test" to begin again.';
            } else {
                // Start new test
                testActive = true;
                this.innerHTML = '<i class="fas fa-pause"></i> Stop Test';
                userCount = 0;
                currentFlashIndex = 0;
                userCountElement.textContent = userCount;
                
                // Get target color
                countTargetRadios.forEach(radio => {
                    if (radio.checked) targetColor = radio.value;
                });
                
                // Set instructions
                testInstructions.textContent = `Count how many times the ${targetColor} cells flash. Ignore the other color.`;
                
                // Generate flash sequence
                generateFlashSequence();
                
                // Start flashing
                testInterval = setInterval(flashNextCell, 800 - (difficulty * 200));
            }
        });
        
        // Generate random flash sequence
        function generateFlashSequence() {
            flashSequence = [];
            actualCount = 0;
            
            // Determine how many flashes based on difficulty
            const flashCount = 10 + difficulty * 5;
            
            for (let i = 0; i < flashCount; i++) {
                const cellIndex = Math.floor(Math.random() * 25);
                const isTarget = Math.random() > 0.5;
                
                flashSequence.push({
                    cellIndex: cellIndex,
                    isTarget: isTarget,
                    color: isTarget ? targetColor : (targetColor === 'blue' ? 'yellow' : 'blue')
                });
                
                if (isTarget) actualCount++;
            }
            
            actualCountElement.textContent = actualCount;
        }
        
        // Flash next cell in sequence
        function flashNextCell() {
            if (currentFlashIndex >= flashSequence.length) {
                // End of sequence
                clearInterval(testInterval);
                testActive = false;
                startTestBtn.innerHTML = '<i class="fas fa-play"></i> Start Test';
                testInstructions.textContent = 'Sequence complete! Click "Check Answer" to see how you did.';
                return;
            }
            
            const flash = flashSequence[currentFlashIndex];
            const cell = testGrid.children[flash.cellIndex];
            
            // Flash the cell
            cell.classList.add('active');
            cell.style.backgroundColor = flash.color === 'blue' ? '#8a7fcc' : '#ffcc80';
            
            // Remove flash after delay
            setTimeout(() => {
                cell.classList.remove('active');
                cell.style.backgroundColor = '';
            }, 300);
            
            currentFlashIndex++;
        }
        
        // Allow user to increment count
        testGrid.addEventListener('click', function(e) {
            if (!testActive) return;
            
            const cell = e.target.closest('.test-cell');
            if (!cell) return;
            
            // Find if this cell was a target in the last flash
            if (currentFlashIndex > 0) {
                const lastFlash = flashSequence[currentFlashIndex - 1];
                if (parseInt(cell.dataset.index) === lastFlash.cellIndex && lastFlash.isTarget) {
                    userCount++;
                    userCountElement.textContent = userCount;
                    
                    // Visual feedback
                    cell.style.transform = 'scale(1.1)';
                    setTimeout(() => {
                        cell.style.transform = '';
                    }, 300);
                }
            }
        });
        
        // Check test results
        checkTestBtn.addEventListener('click', function() {
            const accuracy = actualCount > 0 ? Math.round(Math.min(100, (1 - Math.abs(userCount - actualCount) / actualCount) * 100)) : 0;
            
            testInstructions.textContent = `You counted ${userCount} ${targetColor} flashes. There were actually ${actualCount}. Your accuracy: ${accuracy}%`;
            
            // Update results
            perceptionResults.cognitive = Math.min(100, perceptionResults.cognitive + accuracy / 2);
            updateResults();
        });
        
        // Initialize test grid
        initializeTestGrid();
        
        // --------------------------
        // MULTISENSORY INTEGRATION SIMULATOR
        // --------------------------
        const audioSyllableRadios = document.querySelectorAll('input[name="audioSyllable"]');
        const visualSyllableRadios = document.querySelectorAll('input[name="visualSyllable"]');
        const playMcGurkBtn = document.getElementById('playMcGurk');
        const repeatMcGurkBtn = document.getElementById('repeatMcGurk');
        const mouthIcon = document.getElementById('mouthIcon');
        const multisensoryStatus = document.getElementById('multisensoryStatus');
        
        let mcgurkAudioContext;
        let mcgurkOscillator;
        
        // Play McGurk effect simulation
        playMcGurkBtn.addEventListener('click', function() {
            // Get selected syllables
            let audioSyllable = 'ba';
            let visualSyllable = 'fa';
            
            audioSyllableRadios.forEach(radio => {
                if (radio.checked) audioSyllable = radio.value;
            });
            
            visualSyllableRadios.forEach(radio => {
                if (radio.checked) visualSyllable = radio.value;
            });
            
            // Update mouth icon based on visual syllable
            updateMouthIcon(visualSyllable);
            
            // Play audio
            playSyllableAudio(audioSyllable);
            
            // Update status with McGurk effect explanation
            let perceivedSyllable = getPerceivedSyllable(audioSyllable, visualSyllable);
            
            multisensoryStatus.innerHTML = `
                Audio: "<strong>${audioSyllable.toUpperCase()}</strong>", 
                Visual: "<strong>${visualSyllable.toUpperCase()}</strong>"<br>
                Many people perceive: "<strong>${perceivedSyllable.toUpperCase()}</strong>"<br>
                <small>This demonstrates how visual information can override auditory perception.</small>
            `;
            
            // Update results
            perceptionResults.multisensory = Math.min(100, perceptionResults.multisensory + 20);
            updateResults();
        });
        
        // Repeat McGurk effect
        repeatMcGurkBtn.addEventListener('click', function() {
            playMcGurkBtn.click();
        });
        
        // Update mouth icon based on syllable
        function updateMouthIcon(syllable) {
            // Change mouth icon based on visual syllable
            if (syllable === 'ba') {
                mouthIcon.className = 'fas fa-circle';
                mouthIcon.style.color = '#ff9e9e';
            } else if (syllable === 'fa') {
                mouthIcon.className = 'fas fa-ellipsis-h';
                mouthIcon.style.color = '#9eff9e';
            } else if (syllable === 'va') {
                mouthIcon.className = 'fas fa-circle';
                mouthIcon.style.color = '#9e9eff';
            }
            
            // Add animation
            mouthIcon.classList.add('pulse');
            setTimeout(() => {
                mouthIcon.classList.remove('pulse');
            }, 1000);
        }
        
        // Play syllable audio
        function playSyllableAudio(syllable) {
            try {
                // Create audio context if needed
                if (!mcgurkAudioContext) {
                    mcgurkAudioContext = new (window.AudioContext || window.webkitAudioContext)();
                }
                
                // Stop previous oscillator
                if (mcgurkOscillator) {
                    mcgurkOscillator.stop();
                    mcgurkOscillator = null;
                }
                
                // Create oscillator for audio
                mcgurkOscillator = mcgurkAudioContext.createOscillator();
                const gainNode = mcgurkAudioContext.createGain();
                
                // Set frequency based on syllable
                let frequency = 200;
                if (syllable === 'ba') frequency = 250;
                else if (syllable === 'fa') frequency = 300;
                else if (syllable === 'va') frequency = 350;
                
                // Configure oscillator
                mcgurkOscillator.type = 'sine';
                mcgurkOscillator.frequency.setValueAtTime(frequency, mcgurkAudioContext.currentTime);
                
                // Create envelope for syllable-like sound
                const now = mcgurkAudioContext.currentTime;
                gainNode.gain.setValueAtTime(0, now);
                gainNode.gain.linearRampToValueAtTime(0.3, now + 0.05);
                gainNode.gain.exponentialRampToValueAtTime(0.01, now + 0.3);
                
                // Connect nodes
                mcgurkOscillator.connect(gainNode);
                gainNode.connect(mcgurkAudioContext.destination);
                
                // Start and stop oscillator
                mcgurkOscillator.start();
                mcgurkOscillator.stop(now + 0.35);
                
            } catch (error) {
                console.error('Audio error:', error);
            }
        }
        
        // Determine perceived syllable based on McGurk effect
        function getPerceivedSyllable(audio, visual) {
            // Common McGurk effect combinations
            if (audio === 'ba' && visual === 'fa') return 'fa';
            if (audio === 'fa' && visual === 'ba') return 'ba';
            if (audio === 'va' && visual === 'ba') return 'va';
            if (audio === 'ba' && visual === 'va') return 'va';
            return audio; // Default to audio if no strong McGurk effect
        }
        
        // --------------------------
        // UPDATE RESULTS DISPLAY
        // --------------------------
        function updateResults() {
            visualAccuracyElement.textContent = `${Math.round(perceptionResults.visual)}%`;
            auditoryDetectionElement.textContent = `${Math.round(perceptionResults.auditory)}%`;
            cognitivePerformanceElement.textContent = `${Math.round(perceptionResults.cognitive)}%`;
            multisensoryIntegrationElement.textContent = `${Math.round(perceptionResults.multisensory)}%`;
        }
        
        // Initialize with some results
        setTimeout(() => {
            perceptionResults.visual = 25;
            perceptionResults.auditory = 20;
            perceptionResults.cognitive = 15;
            perceptionResults.multisensory = 30;
            updateResults();
        }, 1000);
        
        // Add some interactivity to social icons
        const socialIcons = document.querySelectorAll('.social-icons a');
        socialIcons.forEach(icon => {
            icon.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-5px) scale(1.1)';
            });
            
            icon.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0) scale(1)';
            });
        });
    </script>
</body>
</html>