<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEO-GEN | Audio-Reactive Nebula</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;700&family=Orbitron:wght@400;700;900&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
</head>

<body class="sci-fi-theme">
    <!-- Background Canvas for Global Visuals -->
    <canvas id="global-bg"></canvas>

    <div id="app-container">
        <!-- Navigation -->
        <nav id="main-nav" class="hidden">
            <div class="nav-brand">NEO-GEN</div>
            <div class="nav-links">
                <button class="nav-item active" data-page="visualizer">ENGINE</button>
                <button class="nav-item" data-page="presets">PRESETS</button>
                <button class="nav-item" data-page="profile">PROFILE</button>
                <button id="logout-btn" class="nav-item logout">TERMINATE_SESSION</button>
            </div>
            <div id="user-display" class="user-tag">UNAUTHORIZED</div>
        </nav>

        <!-- Pages Section -->
        <main id="view-port">

            <!-- Auth Page -->
            <section id="page-auth" class="page active">
                <div class="auth-card glass">
                    <div class="auth-header">
                        <h1 class="glitch" data-text="NEO-GEN">NEO-GEN</h1>
                        <p class="subtitle">QUANTUM FREQUENCY VISUALIZER</p>
                    </div>

                    <div class="auth-toggle">
                        <button id="show-login" class="toggle-btn active">LOGIN</button>
                        <button id="show-signup" class="toggle-btn">INITIALIZE</button>
                    </div>

                    <form id="auth-form">
                        <div class="input-group">
                            <label for="username">IDENT_ID</label>
                            <input type="text" id="username" required placeholder="Enter sequence...">
                        </div>
                        <div class="input-group">
                            <label for="password">ACCESS_KEY</label>
                            <input type="password" id="password" required placeholder="••••••••">
                        </div>
                        <button type="submit" id="auth-submit" class="cyber-button">
                            <span class="btn-text">ACCESS ENGINE</span>
                            <span class="btn-glitch"></span>
                        </button>
                    </form>
                    <div id="auth-msg" class="status-msg"></div>
                </div>
            </section>

            <!-- Visualizer Page -->
            <section id="page-visualizer" class="page hidden">
                <div class="engine-interface">
                    <div class="controls-panel left glass">
                        <h3>SYSTEM_PARAMS</h3>
                        <div class="control-group">
                            <label>SENSITIVITY</label>
                            <input type="range" id="param-sensitivity" min="1" max="100" value="50">
                        </div>
                        <div class="control-group">
                            <label>NEBULA_DENSITY</label>
                            <input type="range" id="param-density" min="10" max="200" value="100">
                        </div>
                        <div class="control-group">
                            <label>FLOW_RATE</label>
                            <input type="range" id="param-flow" min="1" max="20" value="5">
                        </div>
                        <div class="control-group">
                            <label>COLOR_SHIFT</label>
                            <select id="param-theme">
                                <option value="cyber">CYBER_AURA</option>
                                <option value="void">VOID_DEPTH</option>
                                <option value="nova">SUPERNOVA</option>
                            </select>
                        </div>
                        <button id="save-preset-btn" class="cyber-button" style="margin-top: 2rem;">SAVE_CONFIG</button>
                    </div>

                    <div class="visual-container">
                        <canvas id="nebula-canvas"></canvas>

                        <button id="toggle-controls" class="cyber-button mobile-only">TOGGLE_CONTROLS</button>

                        <div class="audio-overlay">
                            <div id="drop-zone" class="glass">
                                <p>DROP AUDIO TRACK OR CLICK TO UPLOAD</p>
                                <input type="file" id="audio-input" accept="audio/*" hidden>
                            </div>
                            <div id="audio-controls" class="hidden glass">
                                <span id="track-name">NO_TRACK_LOADED</span>
                                <button id="play-pause" class="icon-btn">⏵</button>
                                <div class="progress-bar">
                                    <div id="progress-fill"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Presets Page -->
            <section id="page-presets" class="page hidden">
                <div class="presets-grid">
                    <h2 class="section-title">SAVED_SEQUENCES</h2>
                    <div id="presets-container" class="grid-layout">
                        <!-- Presets injected here -->
                        <div class="preset-empty">No sequences found in local storage.</div>
                    </div>
                </div>
            </section>

            <!-- Profile Page -->
            <section id="page-profile" class="page hidden">
                <div class="auth-card glass">
                    <div class="auth-header">
                        <h2 class="section-title">IDENTITY_PROFILE</h2>
                        <p class="subtitle">UPDATE_LOCAL_CREDENTIALS</p>
                    </div>
                    <form id="profile-form">
                        <div class="input-group">
                            <label for="profile-username">NEW_IDENT_ID</label>
                            <input type="text" id="profile-username" required>
                        </div>
                        <div class="input-group">
                            <label for="profile-password">NEW_ACCESS_KEY</label>
                            <input type="password" id="profile-password" required>
                        </div>
                        <button type="submit" class="cyber-button">UPDATE_IDENTITY</button>
                    </form>
                    <div id="profile-msg" class="status-msg"></div>
                </div>
            </section>

        </main>
    </div>

    <!-- UI Scripts -->
    <script src="js/auth.js" type="module"></script>
    <script src="js/audioEngine.js" type="module"></script>
    <script src="js/nebulaCore.js" type="module"></script>
    <script src="js/uiManager.js" type="module"></script>
    <script src="js/app.js" type="module"></script>
</body>

</html>